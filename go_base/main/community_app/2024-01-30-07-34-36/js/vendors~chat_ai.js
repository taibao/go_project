(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors~chat_ai"],{"../../node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/fetch.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** /root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/fetch.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/*! exports provided: EventStreamContentType, fetchEventSource */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventStreamContentType", function() { return EventStreamContentType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchEventSource", function() { return fetchEventSource; });\n/* harmony import */ var _parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse */ "../../node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/parse.js");\nvar __rest = (undefined && undefined.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === "function")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\n\r\nconst EventStreamContentType = \'text/event-stream\';\r\nconst DefaultRetryInterval = 1000;\r\nconst LastEventId = \'last-event-id\';\r\nfunction fetchEventSource(input, _a) {\r\n    var { signal: inputSignal, headers: inputHeaders, onopen: inputOnOpen, onmessage, onclose, onerror, openWhenHidden, fetch: inputFetch } = _a, rest = __rest(_a, ["signal", "headers", "onopen", "onmessage", "onclose", "onerror", "openWhenHidden", "fetch"]);\r\n    return new Promise((resolve, reject) => {\r\n        const headers = Object.assign({}, inputHeaders);\r\n        if (!headers.accept) {\r\n            headers.accept = EventStreamContentType;\r\n        }\r\n        let curRequestController;\r\n        function onVisibilityChange() {\r\n            curRequestController.abort();\r\n            if (!document.hidden) {\r\n                create();\r\n            }\r\n        }\r\n        if (!openWhenHidden) {\r\n            document.addEventListener(\'visibilitychange\', onVisibilityChange);\r\n        }\r\n        let retryInterval = DefaultRetryInterval;\r\n        let retryTimer = 0;\r\n        function dispose() {\r\n            document.removeEventListener(\'visibilitychange\', onVisibilityChange);\r\n            window.clearTimeout(retryTimer);\r\n            curRequestController.abort();\r\n        }\r\n        inputSignal === null || inputSignal === void 0 ? void 0 : inputSignal.addEventListener(\'abort\', () => {\r\n            dispose();\r\n            resolve();\r\n        });\r\n        const fetch = inputFetch !== null && inputFetch !== void 0 ? inputFetch : window.fetch;\r\n        const onopen = inputOnOpen !== null && inputOnOpen !== void 0 ? inputOnOpen : defaultOnOpen;\r\n        async function create() {\r\n            var _a;\r\n            curRequestController = new AbortController();\r\n            try {\r\n                const response = await fetch(input, Object.assign(Object.assign({}, rest), { headers, signal: curRequestController.signal }));\r\n                await onopen(response);\r\n                await Object(_parse__WEBPACK_IMPORTED_MODULE_0__["getBytes"])(response.body, Object(_parse__WEBPACK_IMPORTED_MODULE_0__["getLines"])(Object(_parse__WEBPACK_IMPORTED_MODULE_0__["getMessages"])(id => {\r\n                    if (id) {\r\n                        headers[LastEventId] = id;\r\n                    }\r\n                    else {\r\n                        delete headers[LastEventId];\r\n                    }\r\n                }, retry => {\r\n                    retryInterval = retry;\r\n                }, onmessage)));\r\n                onclose === null || onclose === void 0 ? void 0 : onclose();\r\n                dispose();\r\n                resolve();\r\n            }\r\n            catch (err) {\r\n                if (!curRequestController.signal.aborted) {\r\n                    try {\r\n                        const interval = (_a = onerror === null || onerror === void 0 ? void 0 : onerror(err)) !== null && _a !== void 0 ? _a : retryInterval;\r\n                        window.clearTimeout(retryTimer);\r\n                        retryTimer = window.setTimeout(create, interval);\r\n                    }\r\n                    catch (innerErr) {\r\n                        dispose();\r\n                        reject(innerErr);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        create();\r\n    });\r\n}\r\nfunction defaultOnOpen(response) {\r\n    const contentType = response.headers.get(\'content-type\');\r\n    if (!(contentType === null || contentType === void 0 ? void 0 : contentType.startsWith(EventStreamContentType))) {\r\n        throw new Error(`Expected content-type to be ${EventStreamContentType}, Actual: ${contentType}`);\r\n    }\r\n}\r\n//# sourceMappingURL=fetch.js.map\n\n//# sourceURL=webpack:////root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/fetch.js?')},"../../node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/index.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** /root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/index.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/*! exports provided: fetchEventSource, EventStreamContentType */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fetch */ "../../node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/fetch.js");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "fetchEventSource", function() { return _fetch__WEBPACK_IMPORTED_MODULE_0__["fetchEventSource"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventStreamContentType", function() { return _fetch__WEBPACK_IMPORTED_MODULE_0__["EventStreamContentType"]; });\n\n\r\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack:////root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/index.js?')},"../../node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/parse.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** /root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/parse.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/*! exports provided: getBytes, getLines, getMessages */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getBytes\", function() { return getBytes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLines\", function() { return getLines; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getMessages\", function() { return getMessages; });\nasync function getBytes(stream, onChunk) {\r\n    const reader = stream.getReader();\r\n    let result;\r\n    while (!(result = await reader.read()).done) {\r\n        onChunk(result.value);\r\n    }\r\n}\r\nfunction getLines(onLine) {\r\n    let buffer;\r\n    let position;\r\n    let fieldLength;\r\n    let discardTrailingNewline = false;\r\n    return function onChunk(arr) {\r\n        if (buffer === undefined) {\r\n            buffer = arr;\r\n            position = 0;\r\n            fieldLength = -1;\r\n        }\r\n        else {\r\n            buffer = concat(buffer, arr);\r\n        }\r\n        const bufLength = buffer.length;\r\n        let lineStart = 0;\r\n        while (position < bufLength) {\r\n            if (discardTrailingNewline) {\r\n                if (buffer[position] === 10) {\r\n                    lineStart = ++position;\r\n                }\r\n                discardTrailingNewline = false;\r\n            }\r\n            let lineEnd = -1;\r\n            for (; position < bufLength && lineEnd === -1; ++position) {\r\n                switch (buffer[position]) {\r\n                    case 58:\r\n                        if (fieldLength === -1) {\r\n                            fieldLength = position - lineStart;\r\n                        }\r\n                        break;\r\n                    case 13:\r\n                        discardTrailingNewline = true;\r\n                    case 10:\r\n                        lineEnd = position;\r\n                        break;\r\n                }\r\n            }\r\n            if (lineEnd === -1) {\r\n                break;\r\n            }\r\n            onLine(buffer.subarray(lineStart, lineEnd), fieldLength);\r\n            lineStart = position;\r\n            fieldLength = -1;\r\n        }\r\n        if (lineStart === bufLength) {\r\n            buffer = undefined;\r\n        }\r\n        else if (lineStart !== 0) {\r\n            buffer = buffer.subarray(lineStart);\r\n            position -= lineStart;\r\n        }\r\n    };\r\n}\r\nfunction getMessages(onId, onRetry, onMessage) {\r\n    let message = newMessage();\r\n    const decoder = new TextDecoder();\r\n    return function onLine(line, fieldLength) {\r\n        if (line.length === 0) {\r\n            onMessage === null || onMessage === void 0 ? void 0 : onMessage(message);\r\n            message = newMessage();\r\n        }\r\n        else if (fieldLength > 0) {\r\n            const field = decoder.decode(line.subarray(0, fieldLength));\r\n            const valueOffset = fieldLength + (line[fieldLength + 1] === 32 ? 2 : 1);\r\n            const value = decoder.decode(line.subarray(valueOffset));\r\n            switch (field) {\r\n                case 'data':\r\n                    message.data = message.data\r\n                        ? message.data + '\\n' + value\r\n                        : value;\r\n                    break;\r\n                case 'event':\r\n                    message.event = value;\r\n                    break;\r\n                case 'id':\r\n                    onId(message.id = value);\r\n                    break;\r\n                case 'retry':\r\n                    const retry = parseInt(value, 10);\r\n                    if (!isNaN(retry)) {\r\n                        onRetry(message.retry = retry);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction concat(a, b) {\r\n    const res = new Uint8Array(a.length + b.length);\r\n    res.set(a);\r\n    res.set(b, a.length);\r\n    return res;\r\n}\r\nfunction newMessage() {\r\n    return {\r\n        data: '',\r\n        event: '',\r\n        id: '',\r\n        retry: undefined,\r\n    };\r\n}\r\n//# sourceMappingURL=parse.js.map\n\n//# sourceURL=webpack:////root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+@microsoft+fetch-event-source@2.0.1/node_modules/@microsoft/fetch-event-source/lib/esm/parse.js?")},"../../node_modules/.pnpm/registry.npmmirror.com+big.js@6.2.1/node_modules/big.js/big.js":
/*!*****************************************************************************************************************************************************************!*\
  !*** /root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+big.js@6.2.1/node_modules/big.js/big.js ***!
  \*****************************************************************************************************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_RESULT__;/*\r\n *  big.js v6.2.1\r\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\r\n *  Copyright (c) 2022 Michael Mclaughlin\r\n *  https://github.com/MikeMcl/big.js/LICENCE.md\r\n */\r\n;(function (GLOBAL) {\r\n  'use strict';\r\n  var Big,\r\n\r\n\r\n/************************************** EDITABLE DEFAULTS *****************************************/\r\n\r\n\r\n    // The default values below must be integers within the stated ranges.\r\n\r\n    /*\r\n     * The maximum number of decimal places (DP) of the results of operations involving division:\r\n     * div and sqrt, and pow with negative exponents.\r\n     */\r\n    DP = 20,            // 0 to MAX_DP\r\n\r\n    /*\r\n     * The rounding mode (RM) used when rounding to the above decimal places.\r\n     *\r\n     *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\r\n     *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\r\n     *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\r\n     *  3  Away from zero.                                  (ROUND_UP)\r\n     */\r\n    RM = 1,             // 0, 1, 2 or 3\r\n\r\n    // The maximum value of DP and Big.DP.\r\n    MAX_DP = 1E6,       // 0 to 1000000\r\n\r\n    // The maximum magnitude of the exponent argument to the pow method.\r\n    MAX_POWER = 1E6,    // 1 to 1000000\r\n\r\n    /*\r\n     * The negative exponent (NE) at and beneath which toString returns exponential notation.\r\n     * (JavaScript numbers: -7)\r\n     * -1000000 is the minimum recommended exponent value of a Big.\r\n     */\r\n    NE = -7,            // 0 to -1000000\r\n\r\n    /*\r\n     * The positive exponent (PE) at and above which toString returns exponential notation.\r\n     * (JavaScript numbers: 21)\r\n     * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\r\n     */\r\n    PE = 21,            // 0 to 1000000\r\n\r\n    /*\r\n     * When true, an error will be thrown if a primitive number is passed to the Big constructor,\r\n     * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\r\n     * primitive number without a loss of precision.\r\n     */\r\n    STRICT = false,     // true or false\r\n\r\n\r\n/**************************************************************************************************/\r\n\r\n\r\n    // Error messages.\r\n    NAME = '[big.js] ',\r\n    INVALID = NAME + 'Invalid ',\r\n    INVALID_DP = INVALID + 'decimal places',\r\n    INVALID_RM = INVALID + 'rounding mode',\r\n    DIV_BY_ZERO = NAME + 'Division by zero',\r\n\r\n    // The shared prototype object.\r\n    P = {},\r\n    UNDEFINED = void 0,\r\n    NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\r\n\r\n\r\n  /*\r\n   * Create and return a Big constructor.\r\n   */\r\n  function _Big_() {\r\n\r\n    /*\r\n     * The Big constructor and exported function.\r\n     * Create and return a new instance of a Big number object.\r\n     *\r\n     * n {number|string|Big} A numeric value.\r\n     */\r\n    function Big(n) {\r\n      var x = this;\r\n\r\n      // Enable constructor usage without new.\r\n      if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\r\n\r\n      // Duplicate.\r\n      if (n instanceof Big) {\r\n        x.s = n.s;\r\n        x.e = n.e;\r\n        x.c = n.c.slice();\r\n      } else {\r\n        if (typeof n !== 'string') {\r\n          if (Big.strict === true && typeof n !== 'bigint') {\r\n            throw TypeError(INVALID + 'value');\r\n          }\r\n\r\n          // Minus zero?\r\n          n = n === 0 && 1 / n < 0 ? '-0' : String(n);\r\n        }\r\n\r\n        parse(x, n);\r\n      }\r\n\r\n      // Retain a reference to this Big constructor.\r\n      // Shadow Big.prototype.constructor which points to Object.\r\n      x.constructor = Big;\r\n    }\r\n\r\n    Big.prototype = P;\r\n    Big.DP = DP;\r\n    Big.RM = RM;\r\n    Big.NE = NE;\r\n    Big.PE = PE;\r\n    Big.strict = STRICT;\r\n    Big.roundDown = 0;\r\n    Big.roundHalfUp = 1;\r\n    Big.roundHalfEven = 2;\r\n    Big.roundUp = 3;\r\n\r\n    return Big;\r\n  }\r\n\r\n\r\n  /*\r\n   * Parse the number or string value passed to a Big constructor.\r\n   *\r\n   * x {Big} A Big number instance.\r\n   * n {number|string} A numeric value.\r\n   */\r\n  function parse(x, n) {\r\n    var e, i, nl;\r\n\r\n    if (!NUMERIC.test(n)) {\r\n      throw Error(INVALID + 'number');\r\n    }\r\n\r\n    // Determine sign.\r\n    x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\r\n\r\n    // Decimal point?\r\n    if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\r\n\r\n    // Exponential form?\r\n    if ((i = n.search(/e/i)) > 0) {\r\n\r\n      // Determine exponent.\r\n      if (e < 0) e = i;\r\n      e += +n.slice(i + 1);\r\n      n = n.substring(0, i);\r\n    } else if (e < 0) {\r\n\r\n      // Integer.\r\n      e = n.length;\r\n    }\r\n\r\n    nl = n.length;\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\r\n\r\n    if (i == nl) {\r\n\r\n      // Zero.\r\n      x.c = [x.e = 0];\r\n    } else {\r\n\r\n      // Determine trailing zeros.\r\n      for (; nl > 0 && n.charAt(--nl) == '0';);\r\n      x.e = e - i - 1;\r\n      x.c = [];\r\n\r\n      // Convert string to array of digits without leading/trailing zeros.\r\n      for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Round Big x to a maximum of sd significant digits using rounding mode rm.\r\n   *\r\n   * x {Big} The Big to round.\r\n   * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\r\n   * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n   * [more] {boolean} Whether the result of division was truncated.\r\n   */\r\n  function round(x, sd, rm, more) {\r\n    var xc = x.c;\r\n\r\n    if (rm === UNDEFINED) rm = x.constructor.RM;\r\n    if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\r\n      throw Error(INVALID_RM);\r\n    }\r\n\r\n    if (sd < 1) {\r\n      more =\r\n        rm === 3 && (more || !!xc[0]) || sd === 0 && (\r\n        rm === 1 && xc[0] >= 5 ||\r\n        rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\r\n      );\r\n\r\n      xc.length = 1;\r\n\r\n      if (more) {\r\n\r\n        // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n        x.e = x.e - sd + 1;\r\n        xc[0] = 1;\r\n      } else {\r\n\r\n        // Zero.\r\n        xc[0] = x.e = 0;\r\n      }\r\n    } else if (sd < xc.length) {\r\n\r\n      // xc[sd] is the digit after the digit that may be rounded up.\r\n      more =\r\n        rm === 1 && xc[sd] >= 5 ||\r\n        rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\r\n          (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\r\n        rm === 3 && (more || !!xc[0]);\r\n\r\n      // Remove any digits after the required precision.\r\n      xc.length = sd;\r\n\r\n      // Round up?\r\n      if (more) {\r\n\r\n        // Rounding up may mean the previous digit has to be rounded up.\r\n        for (; ++xc[--sd] > 9;) {\r\n          xc[sd] = 0;\r\n          if (sd === 0) {\r\n            ++x.e;\r\n            xc.unshift(1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      // Remove trailing zeros.\r\n      for (sd = xc.length; !xc[--sd];) xc.pop();\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of Big x in normal or exponential notation.\r\n   * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\r\n   */\r\n  function stringify(x, doExponential, isNonzero) {\r\n    var e = x.e,\r\n      s = x.c.join(''),\r\n      n = s.length;\r\n\r\n    // Exponential notation?\r\n    if (doExponential) {\r\n      s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\r\n\r\n    // Normal notation.\r\n    } else if (e < 0) {\r\n      for (; ++e;) s = '0' + s;\r\n      s = '0.' + s;\r\n    } else if (e > 0) {\r\n      if (++e > n) {\r\n        for (e -= n; e--;) s += '0';\r\n      } else if (e < n) {\r\n        s = s.slice(0, e) + '.' + s.slice(e);\r\n      }\r\n    } else if (n > 1) {\r\n      s = s.charAt(0) + '.' + s.slice(1);\r\n    }\r\n\r\n    return x.s < 0 && isNonzero ? '-' + s : s;\r\n  }\r\n\r\n\r\n  // Prototype/instance methods\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the absolute value of this Big.\r\n   */\r\n  P.abs = function () {\r\n    var x = new this.constructor(this);\r\n    x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return 1 if the value of this Big is greater than the value of Big y,\r\n   *       -1 if the value of this Big is less than the value of Big y, or\r\n   *        0 if they have the same value.\r\n   */\r\n  P.cmp = function (y) {\r\n    var isneg,\r\n      x = this,\r\n      xc = x.c,\r\n      yc = (y = new x.constructor(y)).c,\r\n      i = x.s,\r\n      j = y.s,\r\n      k = x.e,\r\n      l = y.e;\r\n\r\n    // Either zero?\r\n    if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\r\n\r\n    // Signs differ?\r\n    if (i != j) return i;\r\n\r\n    isneg = i < 0;\r\n\r\n    // Compare exponents.\r\n    if (k != l) return k > l ^ isneg ? 1 : -1;\r\n\r\n    j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n    // Compare digit by digit.\r\n    for (i = -1; ++i < j;) {\r\n      if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\r\n    }\r\n\r\n    // Compare lengths.\r\n    return k == l ? 0 : k > l ^ isneg ? 1 : -1;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\r\n   * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\r\n   */\r\n  P.div = function (y) {\r\n    var x = this,\r\n      Big = x.constructor,\r\n      a = x.c,                  // dividend\r\n      b = (y = new Big(y)).c,   // divisor\r\n      k = x.s == y.s ? 1 : -1,\r\n      dp = Big.DP;\r\n\r\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n      throw Error(INVALID_DP);\r\n    }\r\n\r\n    // Divisor is zero?\r\n    if (!b[0]) {\r\n      throw Error(DIV_BY_ZERO);\r\n    }\r\n\r\n    // Dividend is 0? Return +-0.\r\n    if (!a[0]) {\r\n      y.s = k;\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    var bl, bt, n, cmp, ri,\r\n      bz = b.slice(),\r\n      ai = bl = b.length,\r\n      al = a.length,\r\n      r = a.slice(0, bl),   // remainder\r\n      rl = r.length,\r\n      q = y,                // quotient\r\n      qc = q.c = [],\r\n      qi = 0,\r\n      p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\r\n\r\n    q.s = k;\r\n    k = p < 0 ? 0 : p;\r\n\r\n    // Create version of divisor with leading zero.\r\n    bz.unshift(0);\r\n\r\n    // Add zeros to make remainder as long as divisor.\r\n    for (; rl++ < bl;) r.push(0);\r\n\r\n    do {\r\n\r\n      // n is how many times the divisor goes into current remainder.\r\n      for (n = 0; n < 10; n++) {\r\n\r\n        // Compare divisor and remainder.\r\n        if (bl != (rl = r.length)) {\r\n          cmp = bl > rl ? 1 : -1;\r\n        } else {\r\n          for (ri = -1, cmp = 0; ++ri < bl;) {\r\n            if (b[ri] != r[ri]) {\r\n              cmp = b[ri] > r[ri] ? 1 : -1;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        // If divisor < remainder, subtract divisor from remainder.\r\n        if (cmp < 0) {\r\n\r\n          // Remainder can't be more than 1 digit longer than divisor.\r\n          // Equalise lengths using divisor with extra leading zero?\r\n          for (bt = rl == bl ? b : bz; rl;) {\r\n            if (r[--rl] < bt[rl]) {\r\n              ri = rl;\r\n              for (; ri && !r[--ri];) r[ri] = 9;\r\n              --r[ri];\r\n              r[rl] += 10;\r\n            }\r\n            r[rl] -= bt[rl];\r\n          }\r\n\r\n          for (; !r[0];) r.shift();\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Add the digit n to the result array.\r\n      qc[qi++] = cmp ? n : ++n;\r\n\r\n      // Update the remainder.\r\n      if (r[0] && cmp) r[rl] = a[ai] || 0;\r\n      else r = [a[ai]];\r\n\r\n    } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\r\n\r\n    // Leading zero? Do not remove if result is simply zero (qi == 1).\r\n    if (!qc[0] && qi != 1) {\r\n\r\n      // There can't be more than one zero.\r\n      qc.shift();\r\n      q.e--;\r\n      p--;\r\n    }\r\n\r\n    // Round?\r\n    if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\r\n\r\n    return q;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\r\n   */\r\n  P.eq = function (y) {\r\n    return this.cmp(y) === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Big is greater than the value of Big y, otherwise return\r\n   * false.\r\n   */\r\n  P.gt = function (y) {\r\n    return this.cmp(y) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\r\n   * return false.\r\n   */\r\n  P.gte = function (y) {\r\n    return this.cmp(y) > -1;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Big is less than the value of Big y, otherwise return false.\r\n   */\r\n  P.lt = function (y) {\r\n    return this.cmp(y) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\r\n   * return false.\r\n   */\r\n  P.lte = function (y) {\r\n    return this.cmp(y) < 1;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the value of this Big minus the value of Big y.\r\n   */\r\n  P.minus = P.sub = function (y) {\r\n    var i, j, t, xlty,\r\n      x = this,\r\n      Big = x.constructor,\r\n      a = x.s,\r\n      b = (y = new Big(y)).s;\r\n\r\n    // Signs differ?\r\n    if (a != b) {\r\n      y.s = -b;\r\n      return x.plus(y);\r\n    }\r\n\r\n    var xc = x.c.slice(),\r\n      xe = x.e,\r\n      yc = y.c,\r\n      ye = y.e;\r\n\r\n    // Either zero?\r\n    if (!xc[0] || !yc[0]) {\r\n      if (yc[0]) {\r\n        y.s = -b;\r\n      } else if (xc[0]) {\r\n        y = new Big(x);\r\n      } else {\r\n        y.s = 1;\r\n      }\r\n      return y;\r\n    }\r\n\r\n    // Determine which is the bigger number. Prepend zeros to equalise exponents.\r\n    if (a = xe - ye) {\r\n\r\n      if (xlty = a < 0) {\r\n        a = -a;\r\n        t = xc;\r\n      } else {\r\n        ye = xe;\r\n        t = yc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (b = a; b--;) t.push(0);\r\n      t.reverse();\r\n    } else {\r\n\r\n      // Exponents equal. Check digit by digit.\r\n      j = ((xlty = xc.length < yc.length) ? xc : yc).length;\r\n\r\n      for (a = b = 0; b < j; b++) {\r\n        if (xc[b] != yc[b]) {\r\n          xlty = xc[b] < yc[b];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // x < y? Point xc to the array of the bigger number.\r\n    if (xlty) {\r\n      t = xc;\r\n      xc = yc;\r\n      yc = t;\r\n      y.s = -y.s;\r\n    }\r\n\r\n    /*\r\n     * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\r\n     * needs to start at yc.length.\r\n     */\r\n    if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\r\n\r\n    // Subtract yc from xc.\r\n    for (b = i; j > a;) {\r\n      if (xc[--j] < yc[j]) {\r\n        for (i = j; i && !xc[--i];) xc[i] = 9;\r\n        --xc[i];\r\n        xc[j] += 10;\r\n      }\r\n\r\n      xc[j] -= yc[j];\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (; xc[--b] === 0;) xc.pop();\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xc[0] === 0;) {\r\n      xc.shift();\r\n      --ye;\r\n    }\r\n\r\n    if (!xc[0]) {\r\n\r\n      // n - n = +0\r\n      y.s = 1;\r\n\r\n      // Result must be zero.\r\n      xc = [ye = 0];\r\n    }\r\n\r\n    y.c = xc;\r\n    y.e = ye;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the value of this Big modulo the value of Big y.\r\n   */\r\n  P.mod = function (y) {\r\n    var ygtx,\r\n      x = this,\r\n      Big = x.constructor,\r\n      a = x.s,\r\n      b = (y = new Big(y)).s;\r\n\r\n    if (!y.c[0]) {\r\n      throw Error(DIV_BY_ZERO);\r\n    }\r\n\r\n    x.s = y.s = 1;\r\n    ygtx = y.cmp(x) == 1;\r\n    x.s = a;\r\n    y.s = b;\r\n\r\n    if (ygtx) return new Big(x);\r\n\r\n    a = Big.DP;\r\n    b = Big.RM;\r\n    Big.DP = Big.RM = 0;\r\n    x = x.div(y);\r\n    Big.DP = a;\r\n    Big.RM = b;\r\n\r\n    return this.minus(x.times(y));\r\n  };\r\n  \r\n  \r\n  /*\r\n   * Return a new Big whose value is the value of this Big negated.\r\n   */\r\n  P.neg = function () {\r\n    var x = new this.constructor(this);\r\n    x.s = -x.s;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the value of this Big plus the value of Big y.\r\n   */\r\n  P.plus = P.add = function (y) {\r\n    var e, k, t,\r\n      x = this,\r\n      Big = x.constructor;\r\n\r\n    y = new Big(y);\r\n\r\n    // Signs differ?\r\n    if (x.s != y.s) {\r\n      y.s = -y.s;\r\n      return x.minus(y);\r\n    }\r\n\r\n    var xe = x.e,\r\n      xc = x.c,\r\n      ye = y.e,\r\n      yc = y.c;\r\n\r\n    // Either zero?\r\n    if (!xc[0] || !yc[0]) {\r\n      if (!yc[0]) {\r\n        if (xc[0]) {\r\n          y = new Big(x);\r\n        } else {\r\n          y.s = x.s;\r\n        }\r\n      }\r\n      return y;\r\n    }\r\n\r\n    xc = xc.slice();\r\n\r\n    // Prepend zeros to equalise exponents.\r\n    // Note: reverse faster than unshifts.\r\n    if (e = xe - ye) {\r\n      if (e > 0) {\r\n        ye = xe;\r\n        t = yc;\r\n      } else {\r\n        e = -e;\r\n        t = xc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (; e--;) t.push(0);\r\n      t.reverse();\r\n    }\r\n\r\n    // Point xc to the longer array.\r\n    if (xc.length - yc.length < 0) {\r\n      t = yc;\r\n      yc = xc;\r\n      xc = t;\r\n    }\r\n\r\n    e = yc.length;\r\n\r\n    // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\r\n    for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\r\n\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n\r\n    if (k) {\r\n      xc.unshift(k);\r\n      ++ye;\r\n    }\r\n\r\n    // Remove trailing zeros.\r\n    for (e = xc.length; xc[--e] === 0;) xc.pop();\r\n\r\n    y.c = xc;\r\n    y.e = ye;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a Big whose value is the value of this Big raised to the power n.\r\n   * If n is negative, round to a maximum of Big.DP decimal places using rounding\r\n   * mode Big.RM.\r\n   *\r\n   * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\r\n   */\r\n  P.pow = function (n) {\r\n    var x = this,\r\n      one = new x.constructor('1'),\r\n      y = one,\r\n      isneg = n < 0;\r\n\r\n    if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\r\n      throw Error(INVALID + 'exponent');\r\n    }\r\n\r\n    if (isneg) n = -n;\r\n\r\n    for (;;) {\r\n      if (n & 1) y = y.times(x);\r\n      n >>= 1;\r\n      if (!n) break;\r\n      x = x.times(x);\r\n    }\r\n\r\n    return isneg ? one.div(y) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\r\n   * significant digits using rounding mode rm, or Big.RM if rm is not specified.\r\n   *\r\n   * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\r\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n   */\r\n  P.prec = function (sd, rm) {\r\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\r\n      throw Error(INVALID + 'precision');\r\n    }\r\n    return round(new this.constructor(this), sd, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\r\n   * using rounding mode rm, or Big.RM if rm is not specified.\r\n   * If dp is negative, round to an integer which is a multiple of 10**-dp.\r\n   * If dp is not specified, round to 0 decimal places.\r\n   *\r\n   * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\r\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n   */\r\n  P.round = function (dp, rm) {\r\n    if (dp === UNDEFINED) dp = 0;\r\n    else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\r\n      throw Error(INVALID_DP);\r\n    }\r\n    return round(new this.constructor(this), dp + this.e + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the square root of the value of this Big, rounded, if\r\n   * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\r\n   */\r\n  P.sqrt = function () {\r\n    var r, c, t,\r\n      x = this,\r\n      Big = x.constructor,\r\n      s = x.s,\r\n      e = x.e,\r\n      half = new Big('0.5');\r\n\r\n    // Zero?\r\n    if (!x.c[0]) return new Big(x);\r\n\r\n    // Negative?\r\n    if (s < 0) {\r\n      throw Error(NAME + 'No square root');\r\n    }\r\n\r\n    // Estimate.\r\n    s = Math.sqrt(x + '');\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\r\n    if (s === 0 || s === 1 / 0) {\r\n      c = x.c.join('');\r\n      if (!(c.length + e & 1)) c += '0';\r\n      s = Math.sqrt(c);\r\n      e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\r\n      r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\r\n    } else {\r\n      r = new Big(s + '');\r\n    }\r\n\r\n    e = r.e + (Big.DP += 4);\r\n\r\n    // Newton-Raphson iteration.\r\n    do {\r\n      t = r;\r\n      r = half.times(t.plus(x.div(t)));\r\n    } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\r\n\r\n    return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new Big whose value is the value of this Big times the value of Big y.\r\n   */\r\n  P.times = P.mul = function (y) {\r\n    var c,\r\n      x = this,\r\n      Big = x.constructor,\r\n      xc = x.c,\r\n      yc = (y = new Big(y)).c,\r\n      a = xc.length,\r\n      b = yc.length,\r\n      i = x.e,\r\n      j = y.e;\r\n\r\n    // Determine sign of result.\r\n    y.s = x.s == y.s ? 1 : -1;\r\n\r\n    // Return signed 0 if either 0.\r\n    if (!xc[0] || !yc[0]) {\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    // Initialise exponent of result as x.e + y.e.\r\n    y.e = i + j;\r\n\r\n    // If array xc has fewer digits than yc, swap xc and yc, and lengths.\r\n    if (a < b) {\r\n      c = xc;\r\n      xc = yc;\r\n      yc = c;\r\n      j = a;\r\n      a = b;\r\n      b = j;\r\n    }\r\n\r\n    // Initialise coefficient array of result with zeros.\r\n    for (c = new Array(j = a + b); j--;) c[j] = 0;\r\n\r\n    // Multiply.\r\n\r\n    // i is initially xc.length.\r\n    for (i = b; i--;) {\r\n      b = 0;\r\n\r\n      // a is yc.length.\r\n      for (j = a + i; j > i;) {\r\n\r\n        // Current sum of products at this digit position, plus carry.\r\n        b = c[j] + yc[i] * xc[j - i - 1] + b;\r\n        c[j--] = b % 10;\r\n\r\n        // carry\r\n        b = b / 10 | 0;\r\n      }\r\n\r\n      c[j] = b;\r\n    }\r\n\r\n    // Increment result exponent if there is a final carry, otherwise remove leading zero.\r\n    if (b) ++y.e;\r\n    else c.shift();\r\n\r\n    // Remove trailing zeros.\r\n    for (i = c.length; !c[--i];) c.pop();\r\n    y.c = c;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Big in exponential notation rounded to dp fixed\r\n   * decimal places using rounding mode rm, or Big.RM if rm is not specified.\r\n   *\r\n   * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\r\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    var x = this,\r\n      n = x.c[0];\r\n\r\n    if (dp !== UNDEFINED) {\r\n      if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n        throw Error(INVALID_DP);\r\n      }\r\n      x = round(new x.constructor(x), ++dp, rm);\r\n      for (; x.c.length < dp;) x.c.push(0);\r\n    }\r\n\r\n    return stringify(x, true, !!n);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Big in normal notation rounded to dp fixed\r\n   * decimal places using rounding mode rm, or Big.RM if rm is not specified.\r\n   *\r\n   * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\r\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n   *\r\n   * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\r\n   * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    var x = this,\r\n      n = x.c[0];\r\n\r\n    if (dp !== UNDEFINED) {\r\n      if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\r\n        throw Error(INVALID_DP);\r\n      }\r\n      x = round(new x.constructor(x), dp + x.e + 1, rm);\r\n\r\n      // x.e may have changed if the value is rounded up.\r\n      for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\r\n    }\r\n\r\n    return stringify(x, false, !!n);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Big.\r\n   * Return exponential notation if this Big has a positive exponent equal to or greater than\r\n   * Big.PE, or a negative exponent equal to or less than Big.NE.\r\n   * Omit the sign for negative zero.\r\n   */\r\n  P.toJSON = P.toString = function () {\r\n    var x = this,\r\n      Big = x.constructor;\r\n    return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this Big as a primitve number.\r\n   */\r\n  P.toNumber = function () {\r\n    var n = Number(stringify(this, true, true));\r\n    if (this.constructor.strict === true && !this.eq(n.toString())) {\r\n      throw Error(NAME + 'Imprecise conversion');\r\n    }\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Big rounded to sd significant digits using\r\n   * rounding mode rm, or Big.RM if rm is not specified.\r\n   * Use exponential notation if sd is less than the number of digits necessary to represent\r\n   * the integer part of the value in normal notation.\r\n   *\r\n   * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\r\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    var x = this,\r\n      Big = x.constructor,\r\n      n = x.c[0];\r\n\r\n    if (sd !== UNDEFINED) {\r\n      if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\r\n        throw Error(INVALID + 'precision');\r\n      }\r\n      x = round(new Big(x), sd, rm);\r\n      for (; x.c.length < sd;) x.c.push(0);\r\n    }\r\n\r\n    return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this Big.\r\n   * Return exponential notation if this Big has a positive exponent equal to or greater than\r\n   * Big.PE, or a negative exponent equal to or less than Big.NE.\r\n   * Include the sign for negative zero.\r\n   */\r\n  P.valueOf = function () {\r\n    var x = this,\r\n      Big = x.constructor;\r\n    if (Big.strict === true) {\r\n      throw Error(NAME + 'valueOf disallowed');\r\n    }\r\n    return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\r\n  };\r\n\r\n\r\n  // Export\r\n\r\n\r\n  Big = _Big_();\r\n\r\n  Big['default'] = Big.Big = Big;\r\n\r\n  //AMD.\r\n  if (true) {\r\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () { return Big; }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\r\n  // Node and other CommonJS-like environments that support module.exports.\r\n  } else {}\r\n})(this);\r\n\n\n//# sourceURL=webpack:////root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+big.js@6.2.1/node_modules/big.js/big.js?")},"../../node_modules/.pnpm/registry.npmmirror.com+dayjs@1.11.10/node_modules/dayjs/dayjs.min.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** /root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+dayjs@1.11.10/node_modules/dayjs/dayjs.min.js ***!
  \***********************************************************************************************************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('!function(t,e){ true?module.exports=e():undefined}(this,(function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",c="month",f="quarter",h="year",d="date",l="Invalid Date",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",D={};D[g]=M;var p="$isDayjsObject",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if("string"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split("-");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+"Hours",0);case u:return $(v+"Minutes",1);case s:return $(v+"Seconds",2);case i:return $(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f="set"+(this.$u?"UTC":""),l=(n={},n[a]=f+"Date",n[d]=f+"Date",n[c]=f+"Month",n[h]=f+"FullYear",n[u]=f+"Hours",n[s]=f+"Minutes",n[i]=f+"Seconds",n[r]=f+"Milliseconds",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,"0")},$=f||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return b.s(e.$y,4,"0");case"M":return a+1;case"MM":return b.s(a+1,2,"0");case"MMM":return h(n.monthsShort,a,c,3);case"MMMM":return h(c,a);case"D":return e.$D;case"DD":return b.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,o,2);case"ddd":return h(n.weekdaysShort,e.$W,o,3);case"dddd":return o[e.$W];case"H":return String(s);case"HH":return b.s(s,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return $(s,u,!0);case"A":return $(s,u,!1);case"m":return String(u);case"mm":return b.s(u,2,"0");case"s":return String(e.$s);case"ss":return b.s(e.$s,2,"0");case"SSS":return b.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",c],["$y",h],["$D",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));\n\n//# sourceURL=webpack:////root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+dayjs@1.11.10/node_modules/dayjs/dayjs.min.js?')},"../../node_modules/.pnpm/registry.npmmirror.com+easy-marker@1.1.23/node_modules/easy-marker/dist/easy-marker.esm.js":
/*!*********************************************************************************************************************************************************************************************!*\
  !*** /root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+easy-marker@1.1.23/node_modules/easy-marker/dist/easy-marker.esm.js ***!
  \*********************************************************************************************************************************************************************************************/
/*! exports provided: default, NodeEasyMarker, RegionEasyMarker */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NodeEasyMarker\", function() { return NodeEasyMarker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RegionEasyMarker\", function() { return RegionEasyMarker; });\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n// 7.2.1 RequireObjectCoercible(argument)\nvar _defined = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n// 7.1.13 ToObject(argument)\n\nvar _toObject = function (it) {\n  return Object(_defined(it));\n};\n\nvar hasOwnProperty = {}.hasOwnProperty;\nvar _has = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\nvar _core = createCommonjsModule(function (module) {\nvar core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n});\nvar _core_1 = _core.version;\n\nvar _global = createCommonjsModule(function (module) {\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n});\n\nvar _library = true;\n\nvar _shared = createCommonjsModule(function (module) {\nvar SHARED = '__core-js_shared__';\nvar store = _global[SHARED] || (_global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: _core.version,\n  mode: _library ? 'pure' : 'global',\n  copyright: ' 2018 Denis Pushkarev (zloirock.ru)'\n});\n});\n\nvar id = 0;\nvar px = Math.random();\nvar _uid = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\nvar shared = _shared('keys');\n\nvar _sharedKey = function (key) {\n  return shared[key] || (shared[key] = _uid(key));\n};\n\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\n\n\nvar IE_PROTO = _sharedKey('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nvar _objectGpo = Object.getPrototypeOf || function (O) {\n  O = _toObject(O);\n  if (_has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\nvar _aFunction = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n// optional / simple context binding\n\nvar _ctx = function (fn, that, length) {\n  _aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\nvar _isObject = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\nvar _anObject = function (it) {\n  if (!_isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\nvar _fails = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n// Thank's IE8 for his funny defineProperty\nvar _descriptors = !_fails(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\nvar document$1 = _global.document;\n// typeof document.createElement is 'object' in old IE\nvar is = _isObject(document$1) && _isObject(document$1.createElement);\nvar _domCreate = function (it) {\n  return is ? document$1.createElement(it) : {};\n};\n\nvar _ie8DomDefine = !_descriptors && !_fails(function () {\n  return Object.defineProperty(_domCreate('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\n\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nvar _toPrimitive = function (it, S) {\n  if (!_isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !_isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\nvar dP = Object.defineProperty;\n\nvar f = _descriptors ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  _anObject(O);\n  P = _toPrimitive(P, true);\n  _anObject(Attributes);\n  if (_ie8DomDefine) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\nvar _objectDp = {\n\tf: f\n};\n\nvar _propertyDesc = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\nvar _hide = _descriptors ? function (object, key, value) {\n  return _objectDp.f(object, key, _propertyDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? _core : _core[name] || (_core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? _global : IS_STATIC ? _global[name] : (_global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && _has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? _ctx(out, _global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? _ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) _hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nvar _export = $export;\n\n// most Object methods by ES6 should accept primitives\n\n\n\nvar _objectSap = function (KEY, exec) {\n  var fn = (_core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  _export(_export.S + _export.F * _fails(function () { fn(1); }), 'Object', exp);\n};\n\n// 19.1.2.9 Object.getPrototypeOf(O)\n\n\n\n_objectSap('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return _objectGpo(_toObject(it));\n  };\n});\n\nvar getPrototypeOf = _core.Object.getPrototypeOf;\n\nvar getPrototypeOf$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": getPrototypeOf, __esModule: true };\n});\n\nvar _Object$getPrototypeOf = unwrapExports(getPrototypeOf$1);\n\nvar classCallCheck = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n});\n\nvar _classCallCheck = unwrapExports(classCallCheck);\n\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n_export(_export.S + _export.F * !_descriptors, 'Object', { defineProperty: _objectDp.f });\n\nvar $Object = _core.Object;\nvar defineProperty = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\nvar defineProperty$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": defineProperty, __esModule: true };\n});\n\nunwrapExports(defineProperty$1);\n\nvar createClass = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\n\n\nvar _defineProperty2 = _interopRequireDefault(defineProperty$1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n});\n\nvar _createClass = unwrapExports(createClass);\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nvar _toInteger = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n// true  -> String#at\n// false -> String#codePointAt\nvar _stringAt = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(_defined(that));\n    var i = _toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\nvar _redefine = _hide;\n\nvar _iterators = {};\n\nvar toString = {}.toString;\n\nvar _cof = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\n// eslint-disable-next-line no-prototype-builtins\nvar _iobject = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return _cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\n\n\nvar _toIobject = function (it) {\n  return _iobject(_defined(it));\n};\n\n// 7.1.15 ToLength\n\nvar min = Math.min;\nvar _toLength = function (it) {\n  return it > 0 ? min(_toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\nvar max = Math.max;\nvar min$1 = Math.min;\nvar _toAbsoluteIndex = function (index, length) {\n  index = _toInteger(index);\n  return index < 0 ? max(index + length, 0) : min$1(index, length);\n};\n\n// false -> Array#indexOf\n// true  -> Array#includes\n\n\n\nvar _arrayIncludes = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = _toIobject($this);\n    var length = _toLength(O.length);\n    var index = _toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nvar arrayIndexOf = _arrayIncludes(false);\nvar IE_PROTO$1 = _sharedKey('IE_PROTO');\n\nvar _objectKeysInternal = function (object, names) {\n  var O = _toIobject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO$1) _has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (_has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n// IE 8- don't enum bug keys\nvar _enumBugKeys = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\n\n\n\nvar _objectKeys = Object.keys || function keys(O) {\n  return _objectKeysInternal(O, _enumBugKeys);\n};\n\nvar _objectDps = _descriptors ? Object.defineProperties : function defineProperties(O, Properties) {\n  _anObject(O);\n  var keys = _objectKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) _objectDp.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\nvar document$2 = _global.document;\nvar _html = document$2 && document$2.documentElement;\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n\n\n\nvar IE_PROTO$2 = _sharedKey('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE$1 = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = _domCreate('iframe');\n  var i = _enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  _html.appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE$1][_enumBugKeys[i]];\n  return createDict();\n};\n\nvar _objectCreate = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE$1] = _anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE$1] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO$2] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : _objectDps(result, Properties);\n};\n\nvar _wks = createCommonjsModule(function (module) {\nvar store = _shared('wks');\n\nvar Symbol = _global.Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : _uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n});\n\nvar def = _objectDp.f;\n\nvar TAG = _wks('toStringTag');\n\nvar _setToStringTag = function (it, tag, stat) {\n  if (it && !_has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n_hide(IteratorPrototype, _wks('iterator'), function () { return this; });\n\nvar _iterCreate = function (Constructor, NAME, next) {\n  Constructor.prototype = _objectCreate(IteratorPrototype, { next: _propertyDesc(1, next) });\n  _setToStringTag(Constructor, NAME + ' Iterator');\n};\n\nvar ITERATOR = _wks('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nvar _iterDefine = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  _iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = _objectGpo($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      _setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!_library && typeof IteratorPrototype[ITERATOR] != 'function') _hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!_library || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    _hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  _iterators[NAME] = $default;\n  _iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) _redefine(proto, key, methods[key]);\n    } else _export(_export.P + _export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\nvar $at = _stringAt(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n_iterDefine(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\nvar _iterStep = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nvar es6_array_iterator = _iterDefine(Array, 'Array', function (iterated, kind) {\n  this._t = _toIobject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return _iterStep(1);\n  }\n  if (kind == 'keys') return _iterStep(0, index);\n  if (kind == 'values') return _iterStep(0, O[index]);\n  return _iterStep(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n_iterators.Arguments = _iterators.Array;\n\nvar TO_STRING_TAG = _wks('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = _global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) _hide(proto, TO_STRING_TAG, NAME);\n  _iterators[NAME] = _iterators.Array;\n}\n\nvar f$1 = _wks;\n\nvar _wksExt = {\n\tf: f$1\n};\n\nvar iterator = _wksExt.f('iterator');\n\nvar iterator$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": iterator, __esModule: true };\n});\n\nunwrapExports(iterator$1);\n\nvar _meta = createCommonjsModule(function (module) {\nvar META = _uid('meta');\n\n\nvar setDesc = _objectDp.f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !_fails(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!_isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!_has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!_has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !_has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n});\nvar _meta_1 = _meta.KEY;\nvar _meta_2 = _meta.NEED;\nvar _meta_3 = _meta.fastKey;\nvar _meta_4 = _meta.getWeak;\nvar _meta_5 = _meta.onFreeze;\n\nvar defineProperty$3 = _objectDp.f;\nvar _wksDefine = function (name) {\n  var $Symbol = _core.Symbol || (_core.Symbol = _library ? {} : _global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty$3($Symbol, name, { value: _wksExt.f(name) });\n};\n\nvar f$2 = Object.getOwnPropertySymbols;\n\nvar _objectGops = {\n\tf: f$2\n};\n\nvar f$3 = {}.propertyIsEnumerable;\n\nvar _objectPie = {\n\tf: f$3\n};\n\n// all enumerable object keys, includes symbols\n\n\n\nvar _enumKeys = function (it) {\n  var result = _objectKeys(it);\n  var getSymbols = _objectGops.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = _objectPie.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n// 7.2.2 IsArray(argument)\n\nvar _isArray = Array.isArray || function isArray(arg) {\n  return _cof(arg) == 'Array';\n};\n\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\n\nvar hiddenKeys = _enumBugKeys.concat('length', 'prototype');\n\nvar f$4 = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return _objectKeysInternal(O, hiddenKeys);\n};\n\nvar _objectGopn = {\n\tf: f$4\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\n\nvar gOPN = _objectGopn.f;\nvar toString$1 = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nvar f$5 = function getOwnPropertyNames(it) {\n  return windowNames && toString$1.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(_toIobject(it));\n};\n\nvar _objectGopnExt = {\n\tf: f$5\n};\n\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar f$6 = _descriptors ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = _toIobject(O);\n  P = _toPrimitive(P, true);\n  if (_ie8DomDefine) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (_has(O, P)) return _propertyDesc(!_objectPie.f.call(O, P), O[P]);\n};\n\nvar _objectGopd = {\n\tf: f$6\n};\n\n// ECMAScript 6 symbols shim\n\n\n\n\n\nvar META = _meta.KEY;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar gOPD$1 = _objectGopd.f;\nvar dP$1 = _objectDp.f;\nvar gOPN$1 = _objectGopnExt.f;\nvar $Symbol = _global.Symbol;\nvar $JSON = _global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE$2 = 'prototype';\nvar HIDDEN = _wks('_hidden');\nvar TO_PRIMITIVE = _wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = _shared('symbol-registry');\nvar AllSymbols = _shared('symbols');\nvar OPSymbols = _shared('op-symbols');\nvar ObjectProto$1 = Object[PROTOTYPE$2];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = _global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE$2] || !QObject[PROTOTYPE$2].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = _descriptors && _fails(function () {\n  return _objectCreate(dP$1({}, 'a', {\n    get: function () { return dP$1(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD$1(ObjectProto$1, key);\n  if (protoDesc) delete ObjectProto$1[key];\n  dP$1(it, key, D);\n  if (protoDesc && it !== ObjectProto$1) dP$1(ObjectProto$1, key, protoDesc);\n} : dP$1;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _objectCreate($Symbol[PROTOTYPE$2]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto$1) $defineProperty(OPSymbols, key, D);\n  _anObject(it);\n  key = _toPrimitive(key, true);\n  _anObject(D);\n  if (_has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!_has(it, HIDDEN)) dP$1(it, HIDDEN, _propertyDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (_has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _objectCreate(D, { enumerable: _propertyDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP$1(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  _anObject(it);\n  var keys = _enumKeys(P = _toIobject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _objectCreate(it) : $defineProperties(_objectCreate(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = _toPrimitive(key, true));\n  if (this === ObjectProto$1 && _has(AllSymbols, key) && !_has(OPSymbols, key)) return false;\n  return E || !_has(this, key) || !_has(AllSymbols, key) || _has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = _toIobject(it);\n  key = _toPrimitive(key, true);\n  if (it === ObjectProto$1 && _has(AllSymbols, key) && !_has(OPSymbols, key)) return;\n  var D = gOPD$1(it, key);\n  if (D && _has(AllSymbols, key) && !(_has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN$1(_toIobject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!_has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto$1;\n  var names = gOPN$1(IS_OP ? OPSymbols : _toIobject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (_has(AllSymbols, key = names[i++]) && (IS_OP ? _has(ObjectProto$1, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = _uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto$1) $set.call(OPSymbols, value);\n      if (_has(this, HIDDEN) && _has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, _propertyDesc(1, value));\n    };\n    if (_descriptors && setter) setSymbolDesc(ObjectProto$1, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  _redefine($Symbol[PROTOTYPE$2], 'toString', function toString() {\n    return this._k;\n  });\n\n  _objectGopd.f = $getOwnPropertyDescriptor;\n  _objectDp.f = $defineProperty;\n  _objectGopn.f = _objectGopnExt.f = $getOwnPropertyNames;\n  _objectPie.f = $propertyIsEnumerable;\n  _objectGops.f = $getOwnPropertySymbols;\n\n  if (_descriptors && !_library) {\n    _redefine(ObjectProto$1, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  _wksExt.f = function (name) {\n    return wrap(_wks(name));\n  };\n}\n\n_export(_export.G + _export.W + _export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)_wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = _objectKeys(_wks.store), k = 0; wellKnownSymbols.length > k;) _wksDefine(wellKnownSymbols[k++]);\n\n_export(_export.S + _export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return _has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n_export(_export.S + _export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && _export(_export.S + _export.F * (!USE_NATIVE || _fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!_isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!_isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE$2][TO_PRIMITIVE] || _hide($Symbol[PROTOTYPE$2], TO_PRIMITIVE, $Symbol[PROTOTYPE$2].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\n_setToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\n_setToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\n_setToStringTag(_global.JSON, 'JSON', true);\n\n_wksDefine('asyncIterator');\n\n_wksDefine('observable');\n\nvar symbol = _core.Symbol;\n\nvar symbol$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": symbol, __esModule: true };\n});\n\nunwrapExports(symbol$1);\n\nvar _typeof_1 = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\n\n\nvar _iterator2 = _interopRequireDefault(iterator$1);\n\n\n\nvar _symbol2 = _interopRequireDefault(symbol$1);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n});\n\nunwrapExports(_typeof_1);\n\nvar possibleConstructorReturn = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\n\n\nvar _typeof3 = _interopRequireDefault(_typeof_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n});\n\nvar _possibleConstructorReturn = unwrapExports(possibleConstructorReturn);\n\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n\nvar $getOwnPropertyDescriptor$1 = _objectGopd.f;\n\n_objectSap('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor$1(_toIobject(it), key);\n  };\n});\n\nvar $Object$1 = _core.Object;\nvar getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  return $Object$1.getOwnPropertyDescriptor(it, key);\n};\n\nvar getOwnPropertyDescriptor$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": getOwnPropertyDescriptor, __esModule: true };\n});\n\nunwrapExports(getOwnPropertyDescriptor$1);\n\nvar get = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\n\n\nvar _getPrototypeOf2 = _interopRequireDefault(getPrototypeOf$1);\n\n\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(getOwnPropertyDescriptor$1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n});\n\nvar _get = unwrapExports(get);\n\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\n\n\nvar check = function (O, proto) {\n  _anObject(O);\n  if (!_isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nvar _setProto = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = _ctx(Function.call, _objectGopd.f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\n\n_export(_export.S, 'Object', { setPrototypeOf: _setProto.set });\n\nvar setPrototypeOf = _core.Object.setPrototypeOf;\n\nvar setPrototypeOf$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": setPrototypeOf, __esModule: true };\n});\n\nunwrapExports(setPrototypeOf$1);\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n_export(_export.S, 'Object', { create: _objectCreate });\n\nvar $Object$2 = _core.Object;\nvar create = function create(P, D) {\n  return $Object$2.create(P, D);\n};\n\nvar create$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": create, __esModule: true };\n});\n\nunwrapExports(create$1);\n\nvar inherits = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\n\n\nvar _setPrototypeOf2 = _interopRequireDefault(setPrototypeOf$1);\n\n\n\nvar _create2 = _interopRequireDefault(create$1);\n\n\n\nvar _typeof3 = _interopRequireDefault(_typeof_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n});\n\nvar _inherits = unwrapExports(inherits);\n\n// call something on iterator step with safe closing on error\n\nvar _iterCall = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(_anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) _anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n// check on default Array iterator\n\nvar ITERATOR$1 = _wks('iterator');\nvar ArrayProto = Array.prototype;\n\nvar _isArrayIter = function (it) {\n  return it !== undefined && (_iterators.Array === it || ArrayProto[ITERATOR$1] === it);\n};\n\nvar _createProperty = function (object, index, value) {\n  if (index in object) _objectDp.f(object, index, _propertyDesc(0, value));\n  else object[index] = value;\n};\n\n// getting tag from 19.1.3.6 Object.prototype.toString()\n\nvar TAG$1 = _wks('toStringTag');\n// ES3 wrong here\nvar ARG = _cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nvar _classof = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG$1)) == 'string' ? T\n    // builtinTag case\n    : ARG ? _cof(O)\n    // ES3 arguments fallback\n    : (B = _cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\nvar ITERATOR$2 = _wks('iterator');\n\nvar core_getIteratorMethod = _core.getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR$2]\n    || it['@@iterator']\n    || _iterators[_classof(it)];\n};\n\nvar ITERATOR$3 = _wks('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR$3]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n} catch (e) { /* empty */ }\n\nvar _iterDetect = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR$3]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR$3] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n_export(_export.S + _export.F * !_iterDetect(function (iter) { }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = _toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = core_getIteratorMethod(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = _ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && _isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        _createProperty(result, index, mapping ? _iterCall(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = _toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        _createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\nvar from_1 = _core.Array.from;\n\nvar from_1$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": from_1, __esModule: true };\n});\n\nunwrapExports(from_1$1);\n\nvar toConsumableArray = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\n\n\nvar _from2 = _interopRequireDefault(from_1$1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n});\n\nvar _toConsumableArray = unwrapExports(toConsumableArray);\n\n// 19.1.2.1 Object.assign(target, source, ...)\n\n\n\n\n\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nvar _objectAssign = !$assign || _fails(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = _toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = _objectGops.f;\n  var isEnum = _objectPie.f;\n  while (aLen > index) {\n    var S = _iobject(arguments[index++]);\n    var keys = getSymbols ? _objectKeys(S).concat(getSymbols(S)) : _objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n// 19.1.3.1 Object.assign(target, source)\n\n\n_export(_export.S + _export.F, 'Object', { assign: _objectAssign });\n\nvar assign = _core.Object.assign;\n\nvar assign$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": assign, __esModule: true };\n});\n\nvar _Object$assign = unwrapExports(assign$1);\n\n// 20.1.2.6 Number.MAX_SAFE_INTEGER\n\n\n_export(_export.S, 'Number', { MAX_SAFE_INTEGER: 0x1fffffffffffff });\n\nvar maxSafeInteger = 0x1fffffffffffff;\n\nvar maxSafeInteger$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": maxSafeInteger, __esModule: true };\n});\n\nvar _Number$MAX_SAFE_INTEGER = unwrapExports(maxSafeInteger$1);\n\n/**\n * Base element class\n *\n * @export\n * @class BaseElement\n */\nvar BaseElement = function () {\n  function BaseElement() {\n    _classCallCheck(this, BaseElement);\n\n    this.element = null;\n    this.container = document.body;\n  }\n\n  /**\n   * Create element interface\n   *\n   * @memberof BaseElement\n   */\n\n\n  _createClass(BaseElement, [{\n    key: 'createElement',\n    value: function createElement() {} // eslint-disable-line class-methods-use-this\n\n\n    /**\n     * Mount the element under the container\n     *\n     * @memberof BaseElement\n     */\n\n  }, {\n    key: 'mount',\n    value: function mount() {\n      this.container.appendChild(this.element);\n    }\n\n    /**\n     * get Element Style\n     *\n     * @memberof BaseElement\n     */\n\n  }, {\n    key: 'show',\n    value: function show() {\n      this.style.display = 'block';\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      this.style.display = 'none';\n    }\n  }, {\n    key: 'destroy',\n\n\n    /**\n     * Remove Element\n     *\n     * @memberof BaseElement\n     */\n    value: function destroy() {\n      if (this.element) {\n        this.element.parentElement.removeChild(this.element);\n      }\n    }\n  }, {\n    key: 'style',\n    get: function get() {\n      return this.element.style;\n    }\n  }, {\n    key: 'isShow',\n    get: function get() {\n      return this.style.display !== 'none' && this.style.display !== '';\n    }\n  }]);\n\n  return BaseElement;\n}();\n\nvar SelectStatus = {\n  NONE: 'none',\n  SELECTING: 'selecting',\n  FINISH: 'finish'\n};\n\nvar EasyMarkerMode = {\n  NODE: 'node',\n  REGION: 'region'\n};\n\nvar NoteType = {\n  UNDERLINE: 'underline',\n  HIGHLIGHT: 'highlight'\n};\n\nvar DeviceType = {\n  PC: 'pc',\n  MOBILE: 'MOBILE'\n};\n\nvar MenuType = {\n  SELECT: 'select',\n  HIGHLIGHT: 'highlight'\n};\n\n/**\n * Get the location of the clicked word\n *\n * @export\n * @param {HTMLElement} pElement\n * @param {number} x\n * @param {number}  y\n * @param {Array<string>} separators\n * @returns\n */\nfunction getClickWordsPosition(pElement, x, y) {\n  var separators = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [''];\n\n  if (!pElement || pElement && !pElement.childNodes) return null;\n  var lineHeight = Number(window.getComputedStyle(pElement).lineHeight.replace('px', ''));\n  for (var i = 0; i < pElement.childNodes.length; i++) {\n    var node = pElement.childNodes[i];\n\n    if (node.nodeName === '#text') {\n      var words = split(node.textContent, separators);\n      var currentTextIndex = 0;\n      var range = document.createRange();\n\n      for (var index = 0; index < words.length; index++) {\n        var wordsLength = words[index].length;\n        range.setStart(node, currentTextIndex);\n        range.setEnd(node, currentTextIndex + wordsLength);\n        var textRects = range.getClientRects();\n\n        for (var j = 0; j < textRects.length; j++) {\n          var rect = textRects[j];\n          lineHeight = lineHeight || rect.height;\n          var margin = (lineHeight - rect.height) / 2;\n          if (rect.left < x && rect.right > x && rect.top - margin < y && rect.bottom + margin > y) {\n            var rects = [];\n\n            for (var k = 0; k < textRects.length; k++) {\n              var textRect = textRects[k];\n              rects.push(_Object$assign({}, textRect, {\n                top: textRect.top - margin,\n                height: lineHeight,\n                bottom: textRect.bottom + margin,\n                left: textRect.left,\n                right: textRect.right,\n                width: textRect.width\n              }));\n            }\n            return {\n              node: node,\n              rects: rects,\n              textRects: textRects,\n              index: currentTextIndex,\n              wordsLength: wordsLength\n            };\n          }\n        }\n        currentTextIndex += wordsLength;\n      }\n    } else if (node.nodeName === '#comment') {\n      continue; // eslint-disable-line no-continue\n    } else {\n      var result = getClickWordsPosition(node, x, y, separators);\n      if (result) return result;\n    }\n  }\n  return null;\n}\n\n/**\n * Get the location of the click\n *\n * @export\n * @param {HTMLElement| Node} pElement\n * @param {number} x\n * @param {number} y\n * @param {boolean} isStart\n */\nfunction getClickPosition(pElement, x, y, isStart) {\n  if (!pElement || !pElement && pElement.childNodes) return null;\n  var lineHeight = Number(window.getComputedStyle(pElement).lineHeight.replace('px', ''));\n  var tempResult = void 0;\n  for (var i = 0; i < pElement.childNodes.length; i++) {\n    var node = pElement.childNodes[i];\n    var position = null;\n\n    if (node.nodeName === '#text') {\n      var words = [].concat(_toConsumableArray(node.textContent));\n      var range = document.createRange();\n      var preRect = void 0;\n      for (var index = 0; index < words.length; index++) {\n        range.setStart(node, index);\n        range.setEnd(node, index + 1);\n        var nextRect = void 0;\n        var rects = range.getClientRects();\n        var rect = void 0;\n        if (rects.length > 1) {\n          rect = rects[1]; // eslint-disable-line prefer-destructuring\n        } else if (rects.length === 1) {\n          rect = rects[0]; // eslint-disable-line prefer-destructuring\n        } else {\n            continue; // eslint-disable-line no-continue\n          }\n        lineHeight = lineHeight || rect.height;\n        var margin = (lineHeight - rect.height) / 2;\n        if (rect.top - margin <= y && rect.bottom + margin >= y) {\n          position = {\n            x: rect.left,\n            y: rect.top - margin,\n            height: lineHeight,\n            index: index,\n            node: node\n          };\n\n          try {\n            range.setStart(node, index + 1);\n            range.setEnd(node, index + 2);\n            var nextRects = range.getClientRects();\n\n            if (nextRects.length > 1) {\n              nextRect = nextRects[1]; // eslint-disable-line prefer-destructuring\n            } else if (nextRects.length === 1) {\n              nextRect = nextRects[0]; // eslint-disable-line prefer-destructuring\n            } else {\n              nextRect = null;\n            }\n          } catch (error) {\n            nextRect = null;\n          }\n\n          var isLineStart = preRect === undefined || preRect && preRect.bottom <= rect.top;\n          var isLineEnd = nextRect === null || nextRect && nextRect.top >= rect.bottom;\n\n          if (x < rect.right) {\n            var isLeft = x < (rect.left + rect.right) / 2;\n            if (isLineStart && !isStart || !isLeft && !(isLineEnd && isStart)) {\n              position.x += rect.width;\n              position.index += 1;\n            }\n            return position;\n          }\n\n          if (isLineEnd) {\n            if (!isStart) {\n              position.x += rect.width;\n              position.index += 1;\n            }\n            tempResult = position;\n          }\n        }\n        preRect = rect;\n      }\n    } else if (node.nodeName === '#comment') {\n      continue; // eslint-disable-line no-continue\n    } else {\n      var result = getClickPosition(node, x, y, isStart);\n      if (result) {\n        tempResult = result;\n      }\n    }\n    if (i === pElement.childNodes.length - 1 && tempResult) {\n      return tempResult;\n    }\n  }\n  return null;\n}\n\n/**\n * Get the relative position of the touch\n *\n * @export\n * @param {TouchEvent} e\n * @param {Object} offset Offset of the clicked location\n * @returns\n */\nfunction getTouchPosition(e) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { x: 0, y: 0 };\n\n  var touch = getTouch(e);\n  return {\n    x: touch.clientX + offset.x,\n    y: touch.clientY + offset.y\n  };\n}\n\n/**\n * Returns the distance between two points\n *\n * @export\n * @param {any} start\n * @param {any} end\n * @returns\n */\nfunction getDistance(start, end) {\n  return Math.sqrt(Math.pow(start.x - end.x, 2) + Math.pow(start.y - end.y, 2));\n}\n\n/**\n *\n *\n * @export\n * @param {any} pixelUnit\n * @returns\n */\nfunction anyToPx(pixelUnit) {\n  if (typeof pixelUnit === 'number') return pixelUnit;\n  if (typeof pixelUnit === 'string') {\n    if (pixelUnit.indexOf('px') > -1) return Number(pixelUnit.replace('px', ''));\n    if (pixelUnit.indexOf('rem') > -1) {\n      var baseFontSize = Number((document.documentElement.style.fontSize || '24px').replace('px', ''));\n      return Number(pixelUnit.replace('rem', '')) * baseFontSize;\n    }\n    return Number(pixelUnit);\n  }\n  return 0;\n}\n\n/**\n * Get the text node areas\n *\n * @export\n * @param {any} node\n * @param {any} start\n * @param {any} end\n * @returns\n */\nfunction getNodeRects(node, start, end) {\n  var range = document.createRange();\n  var startIndex = start === undefined ? 0 : start;\n  var endIndex = end === undefined ? node.textContent.length : end;\n  try {\n    range.setStart(node, startIndex);\n    range.setEnd(node, endIndex);\n    return domCollectionToArray(range.getClientRects());\n  } catch (error) {\n    console.error('EasyMarkerError:', error); // eslint-disable-line no-console\n    return [];\n  }\n}\n\n/**\n * Converts the location relative to the screen to the location relative to the parent container\n *\n * @export\n * @param {Object} position\n * @param {any} containerPosition\n * @param {any} scrollTop\n */\nfunction screenRelativeToContainerRelative(position, offset) {\n  if (!position.isSet) return position;\n\n  position.y -= offset.y;\n  position.x -= offset.x;\n\n  return position;\n}\n\n/**\n * Split the string, the result contains the separator\n * E.g:\n *    separators:[',','!']\n *    'hello, world! => ['hello,', ' world!']\n * @export\n * @param {string} string\n * @param {Array<string>} [separators=['']]\n */\nfunction split(string) {\n  var separators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [''];\n\n  var separatorRegStr = separators.reduce(function (acc, separator) {\n    if (separator === '') return acc;\n    if (acc === '') return '\\\\' + separator;\n    return acc + '|\\\\' + separator;\n  }, '');\n  var separator = new RegExp('(' + separatorRegStr + ')');\n  var splitStrings = string.split(separator);\n  var resultStrings = [];\n  for (var i = 0; i < splitStrings.length; i += 2) {\n    var mergedStr = splitStrings[i] + (splitStrings[i + 1] || '');\n    if (mergedStr.length > 0) {\n      resultStrings.push(mergedStr);\n    }\n  }\n  return resultStrings;\n}\n\n/**\n * Check whether in the rectangle\n *\n * @export\n * @param {number} x\n * @param {number} y\n * @param {ClientRect} rect\n * @returns {boolean}\n */\nfunction inRectangle(x, y, rect, margin) {\n  return rect.top - margin <= y && rect.bottom + margin >= y && rect.left <= x && rect.right >= x;\n}\n\nfunction copyRect(rect) {\n  return {\n    bottom: rect.bottom,\n    height: rect.height,\n    left: rect.left,\n    right: rect.right,\n    top: rect.top,\n    width: rect.width\n  };\n}\nfunction domCollectionToArray(collection) {\n  var array = [];\n  for (var i = 0; i < collection.length; i++) {\n    array.push(collection[i]);\n  }\n  return array;\n}\n\nfunction matchSubString() {\n  var originStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var subStr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  var matchSubstr = '';\n  var formatSubStr = subStr.replace(/\\s+/g, '');\n  for (var i = 0, j = 0; i < originStr.length; i++) {\n    if (j >= formatSubStr.length) {\n      return matchSubstr;\n    }\n    if (originStr[i] === formatSubStr[j]) {\n      matchSubstr += originStr[i];\n      j++;\n    } else if (originStr[i].match(/\\n|\\r|\\s/)) {\n      if (matchSubstr !== '') {\n        matchSubstr += originStr[i];\n      }\n    } else {\n      i -= matchSubstr.length;\n      j = 0;\n      matchSubstr = '';\n    }\n  }\n  return matchSubstr;\n}\n\n/**\n * get Device Type (mobile || PC)\n *\n * @param {Event} Event\n * @returns {object} { x, y }\n */\nfunction getDeviceType() {\n  if (typeof navigator !== 'undefined' && navigator.userAgent) {\n    var ua = navigator.userAgent;\n    if (ua.indexOf('Tablet') > -1 || ua.indexOf('Pad') > -1 || ua.indexOf('Nexus 7') > -1) return DeviceType.MOBILE;\n    if (ua.indexOf('Mobi') > -1 || ua.indexOf('Android') > -1 || ua.indexOf('iPh') > -1 || ua.indexOf('FLOW') > -1) {\n      return DeviceType.MOBILE;\n    }\n    return DeviceType.PC;\n  }\n  return DeviceType.MOBILE;\n}\n\n/**\n * get eventTouch Support mobile and PC\n *\n * @param {Event} Event\n * @returns {object} { x, y }\n */\nfunction getTouch(e) {\n  if (getDeviceType() === DeviceType.MOBILE) {\n    return e.changedTouches[0];\n  }\n  return {\n    clientX: e.clientX,\n    clientY: e.clientY\n  };\n}\n\n/**\n * Binary search\n *\n * @param {array} array\n * @param {object | string} target\n * @param {string} target key\n * @param {boolean} is the boundary strict\n * @returns {number} index\n */\nfunction BSearchUpperBound(arr, target, key) {\n  var isLoose = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  var start = 0;\n  var end = arr.length - 1;\n  var mid = Math.floor((start + end) / 2);\n  var targetValue = key ? target[key] : target;\n  if (targetValue >= (key ? arr[end][key] : arr[end])) {\n    return end;\n  } else if (targetValue < (key ? arr[start][key] : arr[start])) {\n    return isLoose ? start : -1;\n  }\n  while (start <= end) {\n    if (start === mid || end === mid) {\n      return mid;\n    }\n    if ((key ? arr[mid][key] : arr[mid]) > targetValue) {\n      end = mid;\n    } else {\n      start = mid;\n    }\n    mid = Math.floor((start + end) / 2);\n  }\n  return mid;\n}\n\n/**\n * rect => Point[]\n *\n * @static\n * @param {ClientRect} rect\n * @param {Object} offset\n * @param {number} offset.x\n * @param {number} offset.y\n * @memberof Highlight\n */\nfunction rectToPointArray(rect, offset, margin) {\n  var points = [];\n  if (rect.width === 0) return points;\n\n  points.push([rect.left - margin, rect.top - margin]);\n  points.push([rect.right + margin, rect.top - margin]);\n  points.push([rect.right + margin, rect.bottom + margin]);\n  points.push([rect.left - margin, rect.bottom + margin]);\n\n  points.forEach(function (point) {\n    point[0] -= offset.x;\n    point[1] -= offset.y;\n  });\n  return points;\n}\n\nvar CursorType = {\n  START: 'start',\n  END: 'end'\n};\n\nvar defaultOptions = {\n  color: '#ff6b00'\n\n  /**\n   * Cursor class\n   *\n   * @export\n   * @class Cursor\n   * @extends {BaseElement}\n   */\n};\nvar Cursor = function (_BaseElement) {\n  _inherits(Cursor, _BaseElement);\n\n  /**\n   * Creates an instance of Cursor.\n   * @param {any} container\n   * @param {any} type\n   * @param {any} options\n   * @memberof Cursor\n   */\n  function Cursor(container, type, options) {\n    _classCallCheck(this, Cursor);\n\n    var _this = _possibleConstructorReturn(this, (Cursor.__proto__ || _Object$getPrototypeOf(Cursor)).call(this));\n\n    _this.container = container;\n    _this.type = type;\n    _this.options = _Object$assign({}, defaultOptions, options);\n    _this.$position = { x: 0, y: 0 };\n    _this.$height = 0;\n    _this.touchCallbackStack = [];\n    _this.topPoint = null;\n    _this.lineElement = null;\n    _this.bottomPoint = null;\n    _this.deviceType = getDeviceType();\n    _this.createElement();\n    _this.mount();\n    return _this;\n  }\n\n  _createClass(Cursor, [{\n    key: 'show',\n    value: function show() {\n      if (this.deviceType === DeviceType.PC) {\n        return;\n      }\n\n      this.style.display = 'block';\n    }\n\n    /**\n     * Move to the specified location\n     *\n     * @param {number} x px\n     * @param {number} y px\n     * @memberof Cursor\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(x, y) {\n      this.style.top = y - this.width + 'px';\n      this.style.left = x - this.width / 2 + 'px';\n    }\n\n    /**\n     * Create the element\n     *\n     * @override\n     * @memberof Cursor\n     */\n\n  }, {\n    key: 'createElement',\n    value: function createElement() {\n      this.element = document.createElement('div');\n      this.style.userSelect = 'none';\n      this.style.webkitUserSelect = 'none';\n      this.style.zIndex = '30';\n      this.style.transition = 'top 0.1s, left 0.1s';\n      this.style.display = 'none';\n      this.style.position = 'absolute';\n\n      this.topPoint = document.createElement('div');\n      this.topPoint.style.borderRadius = '50%';\n      this.topPoint.style.margin = 'auto';\n\n      this.lineElement = document.createElement('div');\n      this.lineElement.style.margin = 'auto';\n      this.lineElement.style.backgroundColor = this.options.color;\n\n      this.bottomPoint = document.createElement('div');\n      this.bottomPoint.style.borderRadius = '50%';\n      this.bottomPoint.style.margin = 'auto';\n\n      if (this.type === CursorType.START) {\n        this.topPoint.style.backgroundColor = this.options.color;\n      } else {\n        this.bottomPoint.style.backgroundColor = this.options.color;\n      }\n\n      this.element.appendChild(this.topPoint);\n      this.element.appendChild(this.lineElement);\n      this.element.appendChild(this.bottomPoint);\n    }\n\n    /**\n     * Set the size of the cursor\n     *\n     * @param {number} size\n     * @memberof Cursor\n     */\n\n  }, {\n    key: 'setCursorSize',\n    value: function setCursorSize(size) {\n      var pointDiameter = this.width + 'px';\n\n      this.style.width = pointDiameter;\n\n      this.topPoint.style.height = pointDiameter;\n      this.topPoint.style.width = pointDiameter;\n      this.bottomPoint.style.height = pointDiameter;\n      this.bottomPoint.style.width = pointDiameter;\n\n      this.lineElement.style.height = size + 'px';\n      this.lineElement.style.width = size / 15 + 'px';\n    }\n\n    /**\n     * Check if it is in the region of the cursor\n     *\n     * @param {Object} position\n     * @param {number} position.x\n     * @param {number} position.y\n     * @memberof Cursor\n     */\n\n  }, {\n    key: 'inRegion',\n    value: function inRegion() {\n      var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this.deviceType === DeviceType.PC) {\n        return { inRegion: false };\n      }\n      var maxDistance = this.height;\n      var distance = _Number$MAX_SAFE_INTEGER;\n      if (position.y > this.position.y && position.y < this.position.y + this.height) {\n        distance = Math.abs(position.x - this.position.x);\n      }\n      if (position.y >= this.position.y + this.with) {\n        distance = getDistance(position, { x: this.position.x, y: this.position.y + this.height });\n      }\n      if (position.y <= this.position.y) {\n        distance = getDistance(position, this.position);\n      }\n      return { inRegion: distance <= maxDistance, distance: distance };\n    }\n  }, {\n    key: 'position',\n    set: function set(val) {\n      var x = val.x,\n          y = val.y;\n\n      this.$position = { x: x, y: y };\n\n      this.moveTo(x, y);\n    },\n    get: function get() {\n      return this.$position;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this.$height;\n    },\n    set: function set(val) {\n      if (val !== this.$height) {\n        this.$height = val;\n        this.setCursorSize(val);\n      }\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return this.height / 4;\n    }\n  }]);\n\n  return Cursor;\n}(BaseElement);\n\nvar _redefineAll = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else _hide(target, key, src[key]);\n  } return target;\n};\n\nvar _anInstance = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\nvar _forOf = createCommonjsModule(function (module) {\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : core_getIteratorMethod(iterable);\n  var f = _ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (_isArrayIter(iterFn)) for (length = _toLength(iterable.length); length > index; index++) {\n    result = entries ? f(_anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = _iterCall(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n});\n\nvar SPECIES = _wks('species');\n\nvar _setSpecies = function (KEY) {\n  var C = typeof _core[KEY] == 'function' ? _core[KEY] : _global[KEY];\n  if (_descriptors && C && !C[SPECIES]) _objectDp.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\nvar _validateCollection = function (it, TYPE) {\n  if (!_isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n\nvar dP$2 = _objectDp.f;\n\n\n\n\n\n\n\n\n\nvar fastKey = _meta.fastKey;\n\nvar SIZE = _descriptors ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nvar _collectionStrong = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      _anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = _objectCreate(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) _forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    _redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = _validateCollection(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = _validateCollection(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        _validateCollection(this, NAME);\n        var f = _ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(_validateCollection(this, NAME), key);\n      }\n    });\n    if (_descriptors) dP$2(C.prototype, 'size', {\n      get: function () {\n        return _validateCollection(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    _iterDefine(C, NAME, function (iterated, kind) {\n      this._t = _validateCollection(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return _iterStep(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return _iterStep(0, entry.k);\n      if (kind == 'values') return _iterStep(0, entry.v);\n      return _iterStep(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    _setSpecies(NAME);\n  }\n};\n\nvar SPECIES$1 = _wks('species');\n\nvar _arraySpeciesConstructor = function (original) {\n  var C;\n  if (_isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || _isArray(C.prototype))) C = undefined;\n    if (_isObject(C)) {\n      C = C[SPECIES$1];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\n\n\nvar _arraySpeciesCreate = function (original, length) {\n  return new (_arraySpeciesConstructor(original))(length);\n};\n\n// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\n\n\n\n\n\nvar _arrayMethods = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || _arraySpeciesCreate;\n  return function ($this, callbackfn, that) {\n    var O = _toObject($this);\n    var self = _iobject(O);\n    var f = _ctx(callbackfn, that, 3);\n    var length = _toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\nvar dP$3 = _objectDp.f;\nvar each = _arrayMethods(0);\n\n\nvar _collection = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = _global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!_descriptors || typeof C != 'function' || !(IS_WEAK || proto.forEach && !_fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    _redefineAll(C.prototype, methods);\n    _meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      _anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) _forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) _hide(C.prototype, KEY, function (a, b) {\n        _anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !_isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP$3(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  _setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  _export(_export.G + _export.W + _export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nvar es6_map = _collection(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = _collectionStrong.getEntry(_validateCollection(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return _collectionStrong.def(_validateCollection(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, _collectionStrong, true);\n\nvar _arrayFromIterable = function (iter, ITERATOR) {\n  var result = [];\n  _forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\n\n\nvar _collectionToJson = function (NAME) {\n  return function toJSON() {\n    if (_classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return _arrayFromIterable(this);\n  };\n};\n\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\n\n\n_export(_export.P + _export.R, 'Map', { toJSON: _collectionToJson('Map') });\n\n// https://tc39.github.io/proposal-setmap-offrom/\n\n\nvar _setCollectionOf = function (COLLECTION) {\n  _export(_export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n\n// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\n_setCollectionOf('Map');\n\n// https://tc39.github.io/proposal-setmap-offrom/\n\n\n\n\n\nvar _setCollectionFrom = function (COLLECTION) {\n  _export(_export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    _aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) _aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = _ctx(mapFn, arguments[2], 2);\n      _forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      _forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n\n// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\n_setCollectionFrom('Map');\n\nvar map = _core.Map;\n\nvar map$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": map, __esModule: true };\n});\n\nvar _Map = unwrapExports(map$1);\n\n/**\n * Position class\n *\n * @export\n * @class Position\n */\nvar Position = function () {\n  function Position() {\n    _classCallCheck(this, Position);\n\n    this.y = 0;\n    this.x = 0;\n    this.width = 0;\n    this.height = 0;\n  }\n\n  /**\n   * Return position set whether or not\n   *\n   * @readonly\n   * @memberof Position\n   */\n\n\n  _createClass(Position, [{\n    key: \"setAll\",\n\n\n    /**\n     * Set the position\n     *\n     * @param {any} position\n     * @memberof Position\n     */\n    value: function setAll(position) {\n      this.x = position.x;\n      this.y = position.y;\n      this.width = position.width;\n      this.height = position.height;\n    }\n\n    /**\n     * Check if the current position is equal to the specified position\n     *\n     * @param {any} position\n     * @returns {bool}\n     * @memberof Position\n     */\n\n  }, {\n    key: \"equal\",\n    value: function equal(position) {\n      return this.x === position.x && this.y === position.y && this.width === position.width && this.height === position.height;\n    }\n  }, {\n    key: \"isSet\",\n    get: function get() {\n      return this.y !== 0 || this.x !== 0 || this.width !== 0 || this.height !== 0;\n    }\n  }]);\n\n  return Position;\n}();\n\n/**\n * Text node\n *\n * @export\n * @class TextNode\n */\n\nvar TextNode = function () {\n  function TextNode(node, offset) {\n    _classCallCheck(this, TextNode);\n\n    this.node = node;\n    this.offset = offset;\n  }\n\n  /**\n   * Get the selected text\n   *\n   * @static\n   * @param {any} startTextNode\n   * @param {any} endTextNode\n   * @memberof TextNode\n   */\n\n\n  _createClass(TextNode, null, [{\n    key: 'getSelectText',\n    value: function getSelectText(startTextNode, endTextNode) {\n      try {\n        var _getSelectNodeRectAnd = this.getSelectNodeRectAndText(startTextNode.node, endTextNode.node, startTextNode.offset, endTextNode.offset),\n            text = _getSelectNodeRectAnd.text;\n\n        return text;\n      } catch (error) {\n        console.error('EasyMarkerError:', error); // eslint-disable-line no-console\n        return '';\n      }\n    }\n\n    /**\n     * Get the selected area\n     *\n     * @static\n     * @param {any} startTextNode\n     * @param {any} endTextNode\n     * @returns\n     * @memberof TextNode\n     */\n\n  }, {\n    key: 'getSelectRects',\n    value: function getSelectRects(startTextNode, endTextNode) {\n      var headerLine = new Position();\n      var bodyLine = new Position();\n      var footerLine = new Position();\n\n      if (!startTextNode || !endTextNode) {\n        return {\n          header: headerLine,\n          body: bodyLine,\n          footer: footerLine\n        };\n      }\n\n      if (startTextNode.node.nodeName !== '#text' || endTextNode.node.nodeName !== '#text') {\n        // eslint-disable-next-line no-console\n        console.error('The parameters for getting the selection rect should be a TextNode', {\n          startTextNode: startTextNode,\n          endTextNode: endTextNode\n        });\n        return {\n          header: headerLine,\n          body: bodyLine,\n          footer: footerLine\n        };\n      }\n      var rects = void 0;\n      try {\n        var _getSelectNodeRectAnd2 = this.getSelectNodeRectAndText(startTextNode.node, endTextNode.node, startTextNode.offset, endTextNode.offset);\n\n        rects = _getSelectNodeRectAnd2.rects;\n      } catch (error) {\n        console.error('EasyMarkerError:', error); // eslint-disable-line no-console\n        rects = [];\n      }\n\n      var lineMergedRects = [];\n      rects.forEach(function (rect) {\n        if (lineMergedRects.length > 0) {\n          var lastLineMergedRect = lineMergedRects[lineMergedRects.length - 1];\n          var safetyBoundary = lastLineMergedRect.height / 2;\n          if (Math.abs(lastLineMergedRect.top - rect.top) < safetyBoundary && Math.abs(lastLineMergedRect.bottom - rect.bottom) < safetyBoundary) {\n            lastLineMergedRect.width += rect.width;\n            lastLineMergedRect.height = lastLineMergedRect.height - rect.height > 0 ? lastLineMergedRect.height : rect.height;\n            lastLineMergedRect.top = lastLineMergedRect.top - rect.top < 0 ? lastLineMergedRect.top : rect.top;\n            lastLineMergedRect.bottom = lastLineMergedRect.bottom - rect.bottom > 0 ? lastLineMergedRect.bottom : rect.bottom;\n          } else {\n            lineMergedRects.push(copyRect(rect));\n          }\n        } else {\n          lineMergedRects.push(copyRect(rect));\n        }\n      });\n\n      var startLineHeight = 0;\n      var leftArr = [];\n      var rightArr = [];\n      if (lineMergedRects.length > 0) {\n        var headRect = lineMergedRects.shift();\n        startLineHeight = Number(window.getComputedStyle(startTextNode.node.parentElement).lineHeight.replace('px', '')) || headRect.height;\n        headerLine.x = headRect.left;\n        headerLine.width = headRect.width;\n        headerLine.y = headRect.top - (startLineHeight - headRect.height) / 2;\n        headerLine.height = startLineHeight;\n        leftArr.push(headerLine.x);\n        rightArr.push(headRect.right);\n      }\n\n      var endLineHight = 0;\n      if (lineMergedRects.length > 0) {\n        var footRect = lineMergedRects.pop();\n        endLineHight = Number(window.getComputedStyle(endTextNode.node.parentElement).lineHeight.replace('px', '')) || footRect.height;\n        footerLine.x = footRect.left;\n        footerLine.width = footRect.width;\n        footerLine.y = footRect.top - (endLineHight - footRect.height) / 2;\n        footerLine.height = endLineHight;\n\n        leftArr.push(footerLine.x);\n        rightArr.push(footRect.right);\n      }\n\n      if (lineMergedRects.length > 0) {\n        var _maxRight = 0;\n        lineMergedRects.forEach(function (lineRect) {\n          if (bodyLine.x && bodyLine.width) {\n            if (lineRect.left < bodyLine.x) {\n              bodyLine.x = lineRect.left;\n            }\n\n            if (lineRect.width > bodyLine.width) {\n              bodyLine.width = lineRect.width;\n            }\n            if (_maxRight < lineRect.right) {\n              _maxRight = lineRect.right;\n            }\n          } else {\n            bodyLine.x = lineRect.left;\n            bodyLine.width = lineRect.width;\n            _maxRight = lineRect.right;\n          }\n        });\n        leftArr.push(bodyLine.x);\n        rightArr.push(_maxRight);\n      }\n      var minLeft = Math.min.apply(Math, leftArr);\n      if (minLeft !== Infinity) {\n        bodyLine.x = minLeft;\n      }\n      var maxRight = Math.max.apply(Math, rightArr);\n      if (maxRight !== -Infinity) {\n        bodyLine.width = maxRight - bodyLine.x;\n      }\n\n      bodyLine.y = headerLine.y + startLineHeight;\n      if (footerLine.isSet) {\n        bodyLine.height = footerLine.y - bodyLine.y;\n      } else {\n        footerLine.x = headerLine.x;\n        footerLine.y = headerLine.y + startLineHeight;\n      }\n\n      return {\n        header: headerLine,\n        body: bodyLine,\n        footer: footerLine\n      };\n    }\n  }, {\n    key: 'getSelectNodeRectAndText',\n    value: function getSelectNodeRectAndText(startNode, endNode, startIndex, endIndex) {\n      var result = {\n        rects: [],\n        text: ''\n      };\n      if (startNode.childNodes.length > 0 && startNode.nodeName !== 'SCRIPT' && startNode.nodeName !== 'STYLE') {\n        var _result$rects;\n\n        var childNode = startNode.childNodes[0];\n\n        var _getSelectNodeRectAnd3 = this.getSelectNodeRectAndText(childNode, endNode, 0, endIndex),\n            text = _getSelectNodeRectAnd3.text,\n            rects = _getSelectNodeRectAnd3.rects;\n\n        (_result$rects = result.rects).push.apply(_result$rects, _toConsumableArray(rects));\n        result.text += text;\n        return result;\n      }\n\n      if (startNode.nodeName === '#text') {\n        var _result$rects2;\n\n        var textEndIndex = startNode === endNode ? endIndex : startNode.textContent.length;\n        (_result$rects2 = result.rects).push.apply(_result$rects2, _toConsumableArray(getNodeRects(startNode, startIndex, textEndIndex)));\n        result.text += startNode.textContent.substring(startIndex, textEndIndex);\n      }\n\n      if (startNode.nodeName === 'IMG') {\n        result.rects.push(startNode.getBoundingClientRect());\n      }\n\n      if (startNode === endNode) {\n        return result;\n      }\n\n      var nextNode = startNode.nextSibling;\n      if (nextNode) {\n        var _result$rects3;\n\n        var _getSelectNodeRectAnd4 = this.getSelectNodeRectAndText(nextNode, endNode, 0, endIndex),\n            _text = _getSelectNodeRectAnd4.text,\n            _rects = _getSelectNodeRectAnd4.rects;\n\n        (_result$rects3 = result.rects).push.apply(_result$rects3, _toConsumableArray(_rects));\n        result.text += _text;\n      } else {\n        var currentNode = startNode.parentNode;\n        while (currentNode && currentNode.nextSibling === null) {\n          currentNode = currentNode.parentNode;\n        }\n        if (currentNode) {\n          var _result$rects4;\n\n          var _getSelectNodeRectAnd5 = this.getSelectNodeRectAndText(currentNode.nextSibling, endNode, 0, endIndex),\n              _text2 = _getSelectNodeRectAnd5.text,\n              _rects2 = _getSelectNodeRectAnd5.rects;\n\n          (_result$rects4 = result.rects).push.apply(_result$rects4, _toConsumableArray(_rects2));\n          result.text += _text2;\n        } else {\n          throw new Error('Invalid end node');\n        }\n      }\n      return result;\n    }\n  }]);\n\n  return TextNode;\n}();\n\n/**\n *\n *\n * @export\n * @extends {BaseElement}\n */\n\nvar Menu = function (_BaseElement) {\n  _inherits(Menu, _BaseElement);\n\n  function Menu(container) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Menu);\n\n    var _this = _possibleConstructorReturn(this, (Menu.__proto__ || _Object$getPrototypeOf(Menu)).call(this));\n\n    _this.container = container;\n    _this.handler = null;\n    _this.mode = options.mode;\n    _this.option = {\n      items: options.menuItems,\n      isMultiColumnLayout: options.isMultiColumnLayout,\n      topOffset: anyToPx(options.topOffset),\n      style: {\n        menu: {\n          fontSize: '0.4rem',\n          backgroundColor: '#262626',\n          fontColor: '#fff',\n          borderRadius: '0.1rem',\n          color: '#fff',\n          border: '0px',\n          display: 'inline-block',\n          padding: '0 0.2rem',\n          margin: 'auto'\n        },\n        triangle: {\n          marginLeft: 'auto',\n          marginRight: 'auto',\n          borderTop: '0.2rem solid #262626',\n          borderRight: '0.2rem solid transparent',\n          borderLeft: '0.2rem solid transparent',\n          width: '0',\n          height: '0',\n          marginTop: '-1px'\n        },\n        item: {\n          lineHeight: '1.24rem',\n          padding: '0 0.3rem',\n          color: '#fff',\n          display: 'inline-block'\n        },\n        icon: {\n          display: 'block'\n        }\n      }\n    };\n\n    if (options.style) {\n      _Object$assign(_this.option.style.menu, options.style.menu);\n      _Object$assign(_this.option.style.triangle, options.style.triangle);\n      _Object$assign(_this.option.style.item, options.style.item);\n      _Object$assign(_this.option.style.icon, options.style.icon);\n    }\n\n    _this.easyMarker = null;\n    _this.menuElement = null;\n    _this.itemMap = new _Map();\n    _this.positionRange = {\n      top: 0,\n      bottom: 0,\n      left: 0\n    };\n    _this.windowWidth = document.documentElement.clientWidth;\n    _this.ticking = false;\n    _this.height = 0;\n    _this.width = 0;\n    _this.type = MenuType.SELECT;\n    _this.options = {};\n    _this.createElement();\n    _this.mount();\n    _this.hide();\n    return _this;\n  }\n\n  _createClass(Menu, [{\n    key: 'createElement',\n    value: function createElement() {\n      var _this2 = this;\n\n      var wrapper = document.createElement('div');\n      wrapper.style.position = 'absolute';\n      wrapper.style.width = 'max-content';\n      wrapper.style.textAlign = 'center';\n      wrapper.style.lineHeight = '0';\n      wrapper.style.zIndex = '50';\n      wrapper.style.transform = 'translate3d(-50%, -100%, 0)';\n      wrapper.style.webkitTransform = 'translate3d(-50%, -100%, 0)';\n      wrapper.style.transition = 'transform 0.2s ease, opacity 0.2s ease';\n\n      var menu = document.createElement('div');\n      menu.classList.add('em-menu');\n      _Object$assign(menu.style, this.option.style.menu);\n\n      var bottomTriangle = document.createElement('div');\n      bottomTriangle.classList.add('em-menu-triangle');\n      _Object$assign(bottomTriangle.style, this.option.style.triangle);\n\n      wrapper.appendChild(menu);\n      wrapper.appendChild(bottomTriangle);\n      this.option.items.forEach(function (item) {\n        var menuItem = _this2.createMenuItemElement(item);\n        _this2.itemMap.set(menuItem, item);\n        menu.appendChild(menuItem);\n      });\n      this.menuElement = menu;\n      this.element = wrapper;\n      var style = document.createElement('style');\n      style.type = 'text/css';\n      style.rel = 'stylesheet';\n      // eslint-disable-next-line max-len\n      var styleText = '.em-menu-wrapper-select .em-menu-item-highlight{display: none !important} .em-menu-wrapper-highlight .em-menu-item-select{display: none !important}';\n      style.appendChild(document.createTextNode(styleText));\n      var head = document.getElementsByTagName('head')[0];\n      head.appendChild(style);\n    }\n  }, {\n    key: 'createMenuItemElement',\n    value: function createMenuItemElement(_ref) {\n      var text = _ref.text,\n          iconName = _ref.iconName,\n          itemStyle = _ref.style,\n          iconStyle = _ref.iconStyle,\n          type = _ref.type;\n\n      // eslint-disable-line class-methods-use-this\n      var menuItem = document.createElement('span');\n      menuItem.classList.add('em-menu-item');\n      if (type !== undefined) {\n        menuItem.classList.add('em-menu-item-' + type);\n      }\n      _Object$assign(menuItem.style, this.option.style.item, itemStyle);\n      if (iconName) {\n        var iconItem = document.createElement('span');\n        _Object$assign(iconItem.style, this.option.style.icon, iconStyle);\n        iconItem.className = 'em-menu-item-icon '.concat(iconName);\n        var textNode = document.createTextNode(text);\n        menuItem.appendChild(iconItem);\n        menuItem.appendChild(textNode);\n      } else {\n        var _textNode = document.createTextNode(text);\n        menuItem.appendChild(_textNode);\n      }\n\n      return menuItem;\n    }\n  }, {\n    key: 'setPosition',\n    value: function setPosition(start, end) {\n      var _this3 = this;\n\n      var mergeRects = {};\n      if (this.mode === EasyMarkerMode.REGION) {\n        var rects = void 0;\n        if (start.pageIndex !== end.pageIndex) {\n          // menu \n          var startRegion = this.easyMarker.region.regions[end.pageIndex].regions[0].regions[0];\n          rects = this.easyMarker.region.getRects(startRegion, end);\n        } else {\n          rects = this.easyMarker.region.getRects(start, end);\n        }\n        // const rects = this.easyMarker.region.getRects(start, end)\n        rects.forEach(function (rect, index) {\n          if (index === 0) {\n            mergeRects.left = rect.left;\n            mergeRects.top = rect.top;\n            mergeRects.right = rect.right;\n            mergeRects.bottom = rect.bottom;\n          } else {\n            mergeRects.left = Math.min(rect.left, mergeRects.left);\n            mergeRects.top = Math.min(rect.top, mergeRects.top);\n            mergeRects.right = Math.max(rect.right, mergeRects.right);\n            mergeRects.bottom = Math.max(rect.bottom, mergeRects.bottom);\n          }\n        });\n      } else {\n        var _TextNode$getSelectNo = TextNode.getSelectNodeRectAndText(start.node, end.node, start.offset, end.offset),\n            _rects = _TextNode$getSelectNo.rects;\n\n        _rects.filter(function (item) {\n          return item.left <= _this3.windowWidth && item.left >= 0;\n        }).forEach(function (rect, index) {\n          if (index === 0) {\n            mergeRects.left = rect.left - _this3.screenRelativeOffset.x;\n            mergeRects.top = rect.top - _this3.screenRelativeOffset.y;\n            mergeRects.right = rect.right - _this3.screenRelativeOffset.x;\n            mergeRects.bottom = rect.bottom - _this3.screenRelativeOffset.y;\n          } else if (index === _rects.length - 1) {\n            mergeRects.bottom = rect.bottom - _this3.screenRelativeOffset.y;\n          } else {\n            mergeRects.left = Math.min(rect.left - _this3.screenRelativeOffset.x, mergeRects.left);\n            // mergeRects.top = Math.min(rect.top - this.screenRelativeOffset.y, mergeRects.top)\n            mergeRects.right = Math.max(rect.right - _this3.screenRelativeOffset.x, mergeRects.right);\n            // mergeRects.bottom = Math.max(rect.bottom - this.screenRelativeOffset.y, mergeRects.bottom)\n          }\n        });\n      }\n\n      this.positionRange.top = mergeRects.top;\n      this.positionRange.bottom = mergeRects.bottom;\n      this.positionRange.left = (mergeRects.left + mergeRects.right) / 2;\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      this.style.visibility = 'hidden';\n      this.style.opacity = '0';\n      this.reset();\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.options = {};\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      if (this.type === MenuType.HIGHLIGHT) {\n        this.element.classList.remove('em-menu-wrapper-select');\n        this.element.classList.add('em-menu-wrapper-highlight');\n      } else if (this.type === MenuType.SELECT) {\n        this.element.classList.remove('em-menu-wrapper-highlight');\n        this.element.classList.add('em-menu-wrapper-select');\n      }\n      var relativeTop = 0;\n      if (!this.height || !this.width) {\n        this.height = Number((window.getComputedStyle(this.menuElement).height || '').replace('px', ''));\n        this.width = Number((window.getComputedStyle(this.menuElement).width || '').replace('px', ''));\n      }\n\n      var _container$getBoundin = this.container.getBoundingClientRect(),\n          containerTop = _container$getBoundin.top,\n          containerRight = _container$getBoundin.right,\n          containerLeft = _container$getBoundin.left;\n\n      if (containerTop < 0 && this.positionRange.bottom < -containerTop) {\n        relativeTop = this.positionRange.bottom;\n        this.style.position = 'absolute';\n      } else if (this.positionRange.top - this.height - this.option.topOffset > -containerTop) {\n        relativeTop = this.positionRange.top;\n        this.style.position = 'absolute';\n      } else {\n        // relativeTop = this.option.topOffset + menuHeight - containerTop\n        this.style.position = 'fixed';\n        relativeTop = this.option.topOffset + this.height;\n      }\n\n      // this.style.display = 'block'\n      this.style.visibility = 'visible';\n      this.style.top = relativeTop + 'px';\n      if (this.positionRange.left + containerLeft + this.width / 2 > this.windowWidth) {\n        var right = void 0;\n        if (this.style.position === 'fixed' && !this.option.isMultiColumnLayout) {\n          right = containerRight - this.positionRange.left - this.width / 2;\n          right = containerLeft < 0 ? -this.width / 2 : right;\n        } else {\n          right = containerRight - this.positionRange.left - containerLeft - this.width / 2;\n        }\n        this.style.right = right + 'px';\n        this.style.left = '';\n      } else if (this.positionRange.left + containerLeft - this.width / 2 < 0) {\n        var left = void 0;\n        if (this.style.position === 'fixed' && !this.option.isMultiColumnLayout) {\n          left = this.width / 2 + this.positionRange.left + containerLeft;\n          left = left < 0 ? this.width / 2 : left;\n        } else {\n          left = this.width / 2 + this.positionRange.left;\n        }\n        this.style.left = left + 'px';\n        this.style.right = '';\n      } else {\n        var _left = void 0;\n        if (this.style.position === 'fixed' && !this.option.isMultiColumnLayout) {\n          _left = this.positionRange.left + containerLeft;\n          _left = _left < 0 ? this.width / 2 : _left;\n        } else {\n          // eslint-disable-next-line prefer-destructuring\n          _left = this.positionRange.left;\n        }\n        this.style.left = _left + 'px';\n        this.style.right = '';\n      }\n      this.style.opacity = '1';\n    }\n  }, {\n    key: 'copyListener',\n    value: function copyListener(options, e) {\n      var copyItem = void 0;\n      this.itemMap.forEach(function (item) {\n        if (item.id === 'copy' || item.text === '') {\n          copyItem = item;\n        }\n      });\n      if (!copyItem) return;\n      var selection = this.getSelection(options);\n      if (copyItem.id && this.easyMarker.menuOnClick) {\n        this.easyMarker.menuOnClick(copyItem.id, selection, _Object$assign({}, this.options, { e: e }));\n      } else {\n        copyItem.handler.call(this.easyMarker, selection, _Object$assign({}, this.options, { e: e }));\n      }\n    }\n  }, {\n    key: 'inRegion',\n    value: function inRegion(e) {\n      var tapTarget = this.getTapTarget(e.target);\n      if (!this.itemMap.has(tapTarget)) return false;\n      return true;\n    }\n  }, {\n    key: 'handleTap',\n    value: function handleTap(e, options) {\n      var tapTarget = this.getTapTarget(e.target);\n      if (!this.itemMap.has(tapTarget)) return false;\n\n      var selection = this.getSelection(options);\n\n      var item = this.itemMap.get(tapTarget);\n      if (item.id && this.easyMarker.menuOnClick) {\n        this.easyMarker.menuOnClick(item.id, selection, this.options);\n      } else {\n        item.handler.call(this.easyMarker, selection, this.options);\n      }\n      return true;\n    }\n  }, {\n    key: 'getSelection',\n    value: function getSelection(options) {\n      var selection = void 0;\n      if (this.mode === EasyMarkerMode.NODE) {\n        var start = options.start,\n            end = options.end,\n            content = options.content,\n            markdown = options.markdown;\n\n        selection = {\n          anchorNode: start.node,\n          anchorOffset: start.offset,\n          focusNode: end.node,\n          focusOffset: end.offset,\n          toString: function toString() {\n            return content;\n          },\n          toMarkdown: function toMarkdown() {\n            return markdown;\n          }\n        };\n      } else {\n        var _start = options.start,\n            _end = options.end,\n            _content = options.content,\n            _markdown = options.markdown;\n\n        selection = {\n          start: _start,\n          end: _end,\n          toString: function toString() {\n            return _content;\n          },\n          toMarkdown: function toMarkdown() {\n            return _markdown;\n          }\n        };\n      }\n      return selection;\n    }\n  }, {\n    key: 'getTapTarget',\n    value: function getTapTarget(target) {\n      if (this.itemMap.has(target)\n      // || (target.classList && target.classList.contains('em-menu'))\n      ) {\n          return target;\n        }\n      if (target.parentNode) {\n        return this.getTapTarget(target.parentNode);\n      }\n      return null;\n    }\n  }, {\n    key: 'handleScroll',\n    value: function handleScroll() {\n      var _this4 = this;\n\n      if (!this.ticking) {\n        window.requestAnimationFrame(function () {\n          _this4.show();\n          _this4.ticking = false;\n        });\n        this.ticking = true;\n      }\n    }\n  }, {\n    key: 'screenRelativeOffset',\n    get: function get() {\n      // const { top, left } = this.container.getBoundingClientRect()\n      // return {\n      //   x: left,\n      //   y: top,\n      // }\n      if (!this.easyMarker) {\n        return {\n          x: 0,\n          y: 0\n        };\n      }\n      return this.easyMarker.screenRelativeOffset;\n    }\n  }, {\n    key: 'isShow',\n    get: function get() {\n      return this.style.visibility === 'visible';\n    }\n  }]);\n\n  return Menu;\n}(BaseElement);\n\nvar ITERATOR$4 = _wks('iterator');\n\nvar core_isIterable = _core.isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR$4] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || _iterators.hasOwnProperty(_classof(O));\n};\n\nvar isIterable = core_isIterable;\n\nvar isIterable$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": isIterable, __esModule: true };\n});\n\nunwrapExports(isIterable$1);\n\nvar core_getIterator = _core.getIterator = function (it) {\n  var iterFn = core_getIteratorMethod(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return _anObject(iterFn.call(it));\n};\n\nvar getIterator = core_getIterator;\n\nvar getIterator$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": getIterator, __esModule: true };\n});\n\nunwrapExports(getIterator$1);\n\nvar slicedToArray = createCommonjsModule(function (module, exports) {\n\nexports.__esModule = true;\n\n\n\nvar _isIterable3 = _interopRequireDefault(isIterable$1);\n\n\n\nvar _getIterator3 = _interopRequireDefault(getIterator$1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n});\n\nvar _slicedToArray = unwrapExports(slicedToArray);\n\nvar MaskType = {\n  BLOCK: 'block',\n  LINE: 'line'\n};\n\nvar Mask = function (_BaseElement) {\n  _inherits(Mask, _BaseElement);\n\n  function Mask(container, option) {\n    _classCallCheck(this, Mask);\n\n    var _this = _possibleConstructorReturn(this, (Mask.__proto__ || _Object$getPrototypeOf(Mask)).call(this));\n\n    var defaultOptions = {\n      color: '#FEFFCA',\n      opacity: 0.5,\n      animateDuration: 100\n    };\n    _this.mode = option.mode || EasyMarkerMode.NODE;\n    _this.maskType = option.maskType || (_this.mode === EasyMarkerMode.NODE ? MaskType.BLOCK : MaskType.LINE);\n    _this.container = container;\n    _this.option = _Object$assign(defaultOptions, option);\n\n    if (_this.maskType === MaskType.BLOCK) {\n      _this.paths = [];\n      _this.position = {\n        header: new Position(),\n        body: new Position(),\n        footer: new Position()\n      };\n      _this.animateStartTime = 0;\n      _this.animateEndTime = 0;\n      _this.animatePercent = 0;\n      _this.polygonElement = null;\n    } else {\n      _this.rects = [];\n    }\n    _this.animating = false;\n    _this.easyMarker = null;\n    _this.createElement();\n    _this.mount();\n    return _this;\n  }\n\n  // get screenRelativeOffset() {\n  //   const { top, left } = this.container.getBoundingClientRect()\n  //   return {\n  //     x: left,\n  //     y: top,\n  //   }\n  // }\n\n  _createClass(Mask, [{\n    key: 'createElement',\n    value: function createElement() {\n      var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.style.zIndex = '20';\n      svg.style.pointerEvents = 'none';\n      svg.style.width = '100%';\n      svg.style.height = '100%';\n      svg.style.position = 'absolute';\n      svg.style.top = '0';\n      svg.style.left = '0';\n      svg.style.overflow = 'visible';\n\n      if (this.maskType === MaskType.BLOCK) {\n        var polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n        polygon.style.fill = this.option.color;\n        polygon.style.strokeWidth = 0;\n        polygon.style.strokeOpacity = this.option.opacity;\n        polygon.style.opacity = this.option.opacity;\n        polygon.style.transition = 'opacity 0.2s ease';\n        svg.appendChild(polygon);\n        this.polygonElement = polygon;\n      }\n      this.element = svg;\n    }\n  }, {\n    key: 'render',\n    value: function render(start, end) {\n      if (this.mode === EasyMarkerMode.NODE) {\n        if (this.maskType === 'line') {\n          var rects = void 0;\n          try {\n            var _TextNode$getSelectNo = TextNode.getSelectNodeRectAndText(start.node, end.node, start.offset, end.offset);\n\n            rects = _TextNode$getSelectNo.rects;\n          } catch (error) {\n            console.error('EasyMarkerError:', error); // eslint-disable-line no-console\n            rects = [];\n          }\n          var lineHeight = Number(window.getComputedStyle(start.node.parentElement).lineHeight.replace('px', ''));\n          this.renderRectsLine(rects, lineHeight);\n        } else {\n          var _TextNode$getSelectRe = TextNode.getSelectRects(start, end),\n              header = _TextNode$getSelectRe.header,\n              body = _TextNode$getSelectRe.body,\n              footer = _TextNode$getSelectRe.footer;\n\n          var relativeHeader = screenRelativeToContainerRelative(header, this.screenRelativeOffset);\n          var relativeBody = screenRelativeToContainerRelative(body, this.screenRelativeOffset);\n          var relativeFooter = screenRelativeToContainerRelative(footer, this.screenRelativeOffset);\n          this.renderBlock(relativeHeader, relativeBody, relativeFooter);\n        }\n      }\n\n      if (this.mode === EasyMarkerMode.REGION) {\n        var _rects = this.easyMarker.region.getRects(start, end);\n        if (this.maskType === 'line') {\n          this.renderRectsLine(_rects);\n        } else {\n          var _header = void 0;\n          var _footer = void 0;\n          var _body = void 0;\n          _rects.forEach(function (rect, index) {\n            if (index === 0) {\n              _header = new Position();\n              _body = new Position();\n              _footer = new Position();\n              _header.setAll(rect);\n              _body.setAll(rect);\n              _footer.setAll(rect);\n              _body.y = rect.y + rect.height;\n              _body.height = 0;\n              _footer.height = 0;\n              _footer.y = rect.y + rect.height;\n            } else if (index === _rects.length - 1) {\n              _footer.setAll(rect);\n              _body.height = rect.y - (_header.y + _header.height);\n            } else {\n              var right = _body.x + _body.width;\n              var left = _body.x;\n              if (rect.x < left) {\n                _body.x = rect.x;\n              }\n              if (rect.x + rect.width >= right) {\n                _body.width = rect.x + rect.width - _body.x;\n              }\n            }\n          });\n          this.renderBlock(_header, _body, _footer);\n        }\n      }\n    }\n  }, {\n    key: 'renderBlock',\n    value: function renderBlock(headerPosition, bodyPosition, footerPosition) {\n      var _position = this.position,\n          header = _position.header,\n          body = _position.body,\n          footer = _position.footer;\n\n      if (this.paths.length !== 0 && header.equal(headerPosition) && body.equal(bodyPosition) && footer.equal(footerPosition)) {\n        return;\n      }\n      this.polygonElement.style.opacity = this.option.opacity;\n      var fromPosition = this.position;\n      this.position.header.setAll(headerPosition);\n      this.position.body.setAll(bodyPosition);\n      this.position.footer.setAll(footerPosition);\n\n      this.animateStartTime = Date.now();\n      this.animateEndTime = this.animateStartTime + this.option.animateDuration;\n      this.animatePercent = 0;\n      if (!this.animating) {\n        this.animating = true;\n        this.animated(fromPosition);\n      }\n    }\n  }, {\n    key: 'animated',\n    value: function animated(from) {\n      var _this2 = this;\n\n      var realPercent = (Date.now() - this.animateStartTime) / (this.animateEndTime - this.animateStartTime);\n      var nextPercent = 0;\n\n      if (realPercent >= 1) {\n        nextPercent = 1;\n        this.animatePercent = 1;\n      } else {\n        var nextAnimationPercent = 1000 / 60 / this.option.animateDuration + (realPercent - this.animatePercent) * 1.3;\n        this.animatePercent += nextAnimationPercent;\n        nextPercent = nextAnimationPercent > 1 ? 1 : nextAnimationPercent / (1 - realPercent);\n      }\n\n      var nextHeaderPosition = this.constructor.getAnimateFrame(from.header, this.position.header, nextPercent);\n      var nextBodyPosition = this.constructor.getAnimateFrame(from.body, this.position.body, nextPercent);\n      var nextFooterPosition = this.constructor.getAnimateFrame(from.footer, this.position.footer, nextPercent);\n      var nextPosition = {\n        header: nextHeaderPosition,\n        body: nextBodyPosition,\n        footer: nextFooterPosition\n      };\n      this.paths = this.constructor.getPaths(nextPosition);\n      var points = this.paths.map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            x = _ref2[0],\n            y = _ref2[1];\n\n        return x + ',' + y;\n      }).join(' ');\n      this.polygonElement.setAttribute('points', points);\n      if (realPercent >= 1) {\n        this.animating = false;\n        return;\n      }\n      window.requestAnimationFrame(function () {\n        return _this2.animated(nextPosition);\n      });\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      if (this.maskType === MaskType.BLOCK) {\n        this.paths = [];\n        this.polygonElement.style.opacity = '0';\n        this.polygonElement.setAttribute('points', '');\n      }\n      if (this.maskType === MaskType.LINE) {\n        this.removeAllRectangle();\n      }\n    }\n  }, {\n    key: 'renderRectsLine',\n    value: function renderRectsLine(rects, lineHeight) {\n      var _this3 = this;\n\n      this.rects = rects;\n      var points = rects.map(function (rect) {\n        var margin = 0;\n        var offset = { x: 0, y: 0 };\n        if (_this3.mode === EasyMarkerMode.NODE) {\n          lineHeight = lineHeight || rect.height;\n          margin = _this3.option.margin || (lineHeight - rect.height) / 4;\n          offset = _this3.screenRelativeOffset;\n        }\n        return rectToPointArray(rect, offset, margin);\n      });\n      if (!this.animating) {\n        this.animating = true;\n        window.requestAnimationFrame(function () {\n          return _this3.renderRectsLineAnimated(points);\n        });\n      }\n    }\n  }, {\n    key: 'renderRectsLineAnimated',\n    value: function renderRectsLineAnimated(points) {\n      var _this4 = this;\n\n      this.removeAllRectangle();\n      points.forEach(function (linePoints) {\n        _this4.element.appendChild(_this4.createRectangle(linePoints));\n      });\n      this.animating = false;\n    }\n  }, {\n    key: 'createRectangle',\n    value: function createRectangle(pointList) {\n      var points = pointList.reduce(function (acc, _ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            x = _ref4[0],\n            y = _ref4[1];\n\n        return acc === '' ? x + ',' + y : acc + ' ' + x + ',' + y;\n      }, '');\n      var polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n      polygon.style.fill = this.option.color;\n      polygon.style.strokeWidth = 0;\n      polygon.style.strokeOpacity = this.option.opacity;\n      polygon.style.opacity = this.option.opacity;\n      polygon.setAttribute('points', points);\n      return polygon;\n    }\n  }, {\n    key: 'removeAllRectangle',\n    value: function removeAllRectangle() {\n      while (this.element.firstChild) {\n        this.element.removeChild(this.element.firstChild);\n      }\n    }\n  }, {\n    key: 'screenRelativeOffset',\n    get: function get() {\n      if (!this.easyMarker) {\n        return {\n          x: 0,\n          y: 0\n        };\n      }\n      return this.easyMarker.screenRelativeOffset;\n    }\n  }, {\n    key: 'top',\n    get: function get() {\n      if (this.maskType === MaskType.BLOCK) {\n        return this.position.header.y;\n      }\n      if (this.rects[0]) {\n        return this.mode === EasyMarkerMode.NODE ? this.rects[0].top - this.screenRelativeOffset.y : this.rects[0].top;\n      }\n      return 0;\n    }\n  }, {\n    key: 'left',\n    get: function get() {\n      if (this.maskType === MaskType.BLOCK) {\n        return this.position.header.x;\n      }\n      if (this.rects[0]) {\n        return this.mode === EasyMarkerMode.NODE ? this.rects[0].left - this.screenRelativeOffset.x : this.rects[0].left;\n      }\n      return 0;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      if (this.maskType === MaskType.BLOCK) {\n        return this.position.header.height + this.position.body.height + this.position.footer.height;\n      }\n      var lastRect = this.rects[this.rects.length - 1];\n      if (lastRect) {\n        return lastRect.top + lastRect.height;\n      }\n      return 0;\n    }\n  }], [{\n    key: 'getAnimateFrame',\n    value: function getAnimateFrame(from, to, percent) {\n      var framePosition = new Position();\n      framePosition.x = from.x + (to.x - from.x) * percent;\n      framePosition.y = from.y + (to.y - from.y) * percent;\n      framePosition.height = from.height + (to.height - from.height) * percent;\n      framePosition.width = from.width + (to.width - from.width) * percent;\n      return framePosition;\n    }\n  }, {\n    key: 'getPaths',\n    value: function getPaths(position) {\n      var header = position.header,\n          body = position.body,\n          footer = position.footer;\n\n      var paths = [];\n      if (header.isSet) {\n        paths.push([header.x, header.y]);\n        paths.push([header.x + header.width, header.y]);\n        paths.push([header.x + header.width, header.y + header.height]);\n      }\n      if (body.isSet) {\n        paths.push([body.x + body.width, body.y]);\n        paths.push([body.x + body.width, body.y + body.height]);\n      }\n      if (footer.isSet) {\n        paths.push([footer.x + footer.width, footer.y]);\n        paths.push([footer.x + footer.width, footer.y + footer.height]);\n        paths.push([footer.x, footer.y + footer.height]);\n        paths.push([footer.x, footer.y]);\n      }\n      if (body.isSet) {\n        paths.push([body.x, body.y + body.height]);\n        paths.push([body.x, body.y]);\n      }\n      if (header.isSet) {\n        paths.push([header.x, header.y + header.height]);\n      }\n\n      return paths;\n    }\n  }]);\n\n  return Mask;\n}(BaseElement);\n\n/**\n * Highlight\n *\n * @export\n * @class Highlight\n * @extends {BaseElement}\n */\n\nvar Highlight = function (_BaseElement) {\n  _inherits(Highlight, _BaseElement);\n\n  function Highlight(container, option) {\n    _classCallCheck(this, Highlight);\n\n    var _this = _possibleConstructorReturn(this, (Highlight.__proto__ || _Object$getPrototypeOf(Highlight)).call(this));\n\n    var defaultOptions = {\n      highlightColor: '#FEFFCA',\n      underlineColor: '#af8978',\n      underlineWidth: 1,\n      tagBackground: '#af8978',\n      tagColor: '#fff',\n      opacity: 1,\n      type: 'highlight'\n      // margin: '0.1rem',\n    };\n    _this.container = container;\n    _this.mode = option.mode || EasyMarkerMode.NODE;\n    _this.option = _Object$assign(defaultOptions, option);\n    if (option.color) {\n      _this.option.highlightColor = option.color;\n    }\n    _this.type = _this.option.type || NoteType.Highlight;\n    _this.option.margin = anyToPx(_this.option.margin);\n    _this.lineMap = new _Map();\n    // this.onClick = () => { }\n    _this.createElement();\n    _this.mount();\n    _this.id = 0;\n    _this.easyMarker = null;\n    return _this;\n  }\n\n  _createClass(Highlight, [{\n    key: 'getID',\n    value: function getID() {\n      return this.id++;\n    }\n\n    /**\n     *\n     *\n     * @param {Selection} selection\n     * @param {any} id\n     * @param {any} meta\n     * @memberof Highlight\n     */\n\n  }, {\n    key: 'highlight',\n    value: function highlight(selection, id) {\n      var _this2 = this;\n\n      var meta = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var lineID = id === undefined || id === null ? this.getID() : id;\n      var points = void 0;\n      var selectionContent = void 0;\n      var relativeRects = [];\n      var lineHeight = void 0;\n      if (this.mode === EasyMarkerMode.NODE) {\n        var startTextNode = new TextNode(selection.anchorNode, selection.anchorOffset);\n        var endTextNode = new TextNode(selection.focusNode, selection.focusOffset);\n        lineHeight = Number(window.getComputedStyle(selection.anchorNode.parentElement).lineHeight.replace('px', ''));\n        var rects = void 0;\n        var text = void 0;\n        try {\n          var _TextNode$getSelectNo = TextNode.getSelectNodeRectAndText(startTextNode.node, endTextNode.node, startTextNode.offset, endTextNode.offset);\n\n          rects = _TextNode$getSelectNo.rects;\n          text = _TextNode$getSelectNo.text;\n        } catch (error) {\n          console.error('EasyMarkerError:', error); // eslint-disable-line no-console\n          rects = [];\n          text = '';\n        }\n\n        var offset = this.screenRelativeOffset;\n\n        points = rects.map(function (rect) {\n          var relativeRect = {\n            top: rect.top - offset.y,\n            bottom: rect.bottom - offset.y,\n            height: rect.height,\n            width: rect.width,\n            left: rect.left - offset.x,\n            right: rect.right - offset.x\n          };\n          relativeRects.push(relativeRect);\n          lineHeight = lineHeight || rect.height;\n          var margin = _this2.option.margin || (lineHeight - rect.height) / 4;\n          return rectToPointArray(rect, offset, margin);\n        });\n        var markdown = void 0;\n        if (this.easyMarker && this.easyMarker.markdown) {\n          var _easyMarker$markdown$ = this.easyMarker.markdown.getSelectMarkdown(startTextNode.node, endTextNode.node, startTextNode.offset, endTextNode.offset);\n\n          markdown = _easyMarker$markdown$.markdown;\n        } else {\n          markdown = '';\n        }\n\n        selectionContent = _Object$assign({\n          toString: function toString() {\n            return text;\n          },\n          toMarkdown: function toMarkdown() {\n            return markdown;\n          }\n        }, selection);\n      } else {\n        var start = selection.start,\n            end = selection.end;\n\n        relativeRects = this.easyMarker && this.easyMarker.region.getRects(start, end);\n        var _text = this.easyMarker && this.easyMarker.region.getText(start, end);\n        var _markdown = this.easyMarker && this.easyMarker.constructor.getSelectMarkdown();\n        points = relativeRects.map(function (rect) {\n          var margin = 0;\n          return rectToPointArray(rect, { x: 0, y: 0 }, margin);\n        });\n        selectionContent = _Object$assign({\n          toString: function toString() {\n            return _text;\n          },\n          toMarkdown: function toMarkdown() {\n            return _markdown;\n          }\n        }, selection);\n      }\n\n      this.lineMap.set(lineID, {\n        selection: selectionContent, points: points, relativeRects: relativeRects, meta: meta, lineHeight: lineHeight\n      });\n      return lineID;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      this.removeAllRectangle();\n      this.lineMap.forEach(function (line) {\n        var type = line.meta.type || _this3.type;\n        line.points.forEach(function (points, index) {\n          if (type === NoteType.UNDERLINE) {\n            _this3.element.appendChild(_this3.createLine(points));\n          } else {\n            _this3.element.appendChild(_this3.createRectangle(points));\n          }\n          if (line.points.length - 1 === index && line.meta && line.meta.tag) {\n            var text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n            text.setAttribute('x', points[2][0] - 5);\n            text.setAttribute('y', points[2][1] + 4);\n            text.setAttribute('dominant-baseline', 'hanging');\n            text.setAttribute('text-anchor', 'end');\n            text.setAttribute('font-size', '10');\n            text.setAttribute('fill', _this3.option.tagColor);\n            text.textContent = line.meta.tag;\n            text.classList.add('em-highlight-tag-text');\n            _this3.element.appendChild(text);\n            // setTimeout(() => {\n            // \n            // getBox\n            // const textRect = text.getBBox()\n            var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n            // rect.setAttribute('x', textRect.x - 5)\n            // rect.setAttribute('y', textRect.y - 1)\n            rect.setAttribute('x', points[2][0] - 25 - 5);\n            rect.setAttribute('y', points[2][1] - 0);\n            rect.setAttribute('rx', 2);\n            rect.setAttribute('ry', 2);\n            rect.setAttribute('width', 20 + 10);\n            rect.setAttribute('height', 14 + 2);\n            rect.setAttribute('fill', _this3.option.tagBackground);\n            _this3.element.insertBefore(rect, text);\n            // }, 10)\n          }\n        });\n      });\n    }\n\n    /**\n     *\n     *\n     * @param {Object[]} lines\n     * @param {Selection} lines[].selection\n     * @param {any} [lines[].id]\n     * @param {any} [lines[].meta]\n     * @memberof Highlight\n     */\n\n  }, {\n    key: 'highlightLines',\n    value: function highlightLines(lines) {\n      var _this4 = this;\n\n      this.lineMap.clear();\n      var ids = lines.map(function (_ref) {\n        var selection = _ref.selection,\n            id = _ref.id,\n            meta = _ref.meta;\n        return _this4.highlight(selection, id, meta);\n      });\n      this.render();\n      return ids;\n    }\n\n    /**\n     *\n     *\n     * @param {Selection} selection\n     * @param {*} id\n     * @param {*} meta\n     * @memberof Highlight\n     */\n\n  }, {\n    key: 'highlightLine',\n    value: function highlightLine(selection, id, meta) {\n      var lineID = this.highlight(selection, id, meta);\n      this.render();\n      return lineID;\n    }\n\n    /**\n     *\n     *\n     * @param {any} id\n     * @returns {boolean}\n     * @memberof Highlight\n     */\n\n  }, {\n    key: 'cancelHighlightLine',\n    value: function cancelHighlightLine(id) {\n      this.lineMap.delete(id);\n      this.render();\n    }\n  }, {\n    key: 'createElement',\n    value: function createElement() {\n      var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.style.zIndex = '10';\n      svg.style.pointerEvents = 'none';\n      svg.style.width = '100%';\n      svg.style.height = '100%';\n      svg.style.position = 'absolute';\n      svg.style.top = '0';\n      svg.style.left = '0';\n      svg.style.overflow = 'visible';\n      this.element = svg;\n    }\n  }, {\n    key: 'createLine',\n    value: function createLine(pointList) {\n      var x1 = pointList[2][0];\n      var y1 = pointList[2][1] + 1;\n      var x2 = pointList[3][0];\n      var y2 = pointList[3][1] + 1;\n      var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n      line.style.stroke = this.option.underlineColor;\n      line.style.strokeWidth = this.option.underlineWidth;\n      line.setAttribute('x1', x1);\n      line.setAttribute('y1', y1);\n      line.setAttribute('x2', x2);\n      line.setAttribute('y2', y2);\n      return line;\n    }\n  }, {\n    key: 'createRectangle',\n    value: function createRectangle(pointList) {\n      var points = pointList.reduce(function (acc, _ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            x = _ref3[0],\n            y = _ref3[1];\n\n        return acc === '' ? x + ',' + y : acc + ' ' + x + ',' + y;\n      }, '');\n      var polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n      polygon.style.fill = this.option.highlightColor;\n      polygon.style.strokeWidth = 0;\n      polygon.style.strokeOpacity = this.option.opacity;\n      polygon.style.opacity = this.option.opacity;\n      polygon.setAttribute('points', points);\n      return polygon;\n    }\n  }, {\n    key: 'handleTap',\n    value: function handleTap(e) {\n      var _getTouchPosition = getTouchPosition(e),\n          x = _getTouchPosition.x,\n          y = _getTouchPosition.y;\n\n      var _container$getBoundin = this.container.getBoundingClientRect(),\n          top = _container$getBoundin.top,\n          left = _container$getBoundin.left;\n\n      var clickLine = void 0;\n      this.lineMap.forEach(function (line, id) {\n        for (var i = 0; i < line.relativeRects.length; i++) {\n          var rect = line.relativeRects[i];\n          var margin = line.lineHeight ? (line.lineHeight - rect.height) / 2 : 0;\n          if (inRectangle(x - left, y - top, rect, margin)) {\n            clickLine = { id: id, line: line };\n            break;\n          }\n        }\n      });\n      if (clickLine && this.easyMarker) {\n        if (this.easyMarker.highlightLineClick) {\n          this.easyMarker.highlightLineClick(clickLine.id, clickLine.line.meta, clickLine.line.selection, e);\n        } else {\n          this.easyMarker.showHighlightMenu(clickLine.line.selection, { id: clickLine.id, meta: clickLine.line.meta });\n        }\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'inRegion',\n    value: function inRegion(e) {\n      var _getTouchPosition2 = getTouchPosition(e),\n          x = _getTouchPosition2.x,\n          y = _getTouchPosition2.y;\n\n      var _container$getBoundin2 = this.container.getBoundingClientRect(),\n          top = _container$getBoundin2.top,\n          left = _container$getBoundin2.left;\n\n      var clickLine = void 0;\n      this.lineMap.forEach(function (line, id) {\n        for (var i = 0; i < line.relativeRects.length; i++) {\n          var rect = line.relativeRects[i];\n          var margin = line.lineHeight ? (line.lineHeight - rect.height) / 2 : 0;\n          if (inRectangle(x - left, y - top, rect, margin)) {\n            clickLine = { id: id, line: line };\n            break;\n          }\n        }\n      });\n      if (clickLine && this.easyMarker) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'removeAllRectangle',\n    value: function removeAllRectangle() {\n      while (this.element.firstChild) {\n        this.element.removeChild(this.element.firstChild);\n      }\n    }\n  }, {\n    key: 'screenRelativeOffset',\n    get: function get() {\n      if (!this.easyMarker) {\n        return {\n          x: 0,\n          y: 0\n        };\n      }\n      return this.easyMarker.screenRelativeOffset;\n    }\n  }]);\n\n  return Highlight;\n}(BaseElement);\n\n// 19.1.2.5 Object.freeze(O)\n\nvar meta = _meta.onFreeze;\n\n_objectSap('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && _isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n\nvar freeze = _core.Object.freeze;\n\nvar freeze$1 = createCommonjsModule(function (module) {\nmodule.exports = { \"default\": freeze, __esModule: true };\n});\n\nvar _Object$freeze = unwrapExports(freeze$1);\n\nvar defaultOptions$1 = _Object$freeze({\n  H1: function H1(text) {\n    return '\\n# ' + text + '\\n\\n';\n  },\n  H2: function H2(text) {\n    return '\\n## ' + text + '\\n\\n';\n  },\n  H3: function H3(text) {\n    return '\\n### ' + text + '\\n\\n';\n  },\n  H4: function H4(text) {\n    return '\\n#### ' + text + '\\n\\n';\n  },\n  H5: function H5(text) {\n    return '\\n##### ' + text + '\\n\\n';\n  },\n  H6: function H6(text) {\n    return '\\n###### ' + text + '\\n\\n';\n  },\n  P: function P(text) {\n    return text + '\\n\\n';\n  },\n  FIGCAPTION: function FIGCAPTION(text) {\n    return text + '\\n\\n';\n  },\n  STRONG: function STRONG(text) {\n    return '**' + text + '**';\n  },\n  B: function B(text) {\n    return '**' + text + '**';\n  },\n  EM: function EM(text) {\n    return '*' + text + '*';\n  },\n  I: function I(text) {\n    return '*' + text + '*';\n  },\n  S: function S(text) {\n    return '~~' + text + '~~';\n  },\n  INS: function INS(text) {\n    return '++' + text + '++';\n  },\n  IMG: function IMG(option) {\n    return '![' + option.alt + '](' + option.src + '?size=' + option.width + 'x' + option.height + ')\\n';\n  },\n  UL: function UL(text, option) {\n    if (option.listLevel > 1) {\n      return '\\n' + text;\n    }\n    return '\\n' + text + '\\n\\n';\n  },\n  OL: function OL(text, option) {\n    if (option.listLevel > 1) {\n      return '\\n' + text;\n    }\n    return '\\n' + text + '\\n\\n';\n  },\n  LI: function LI(text, option) {\n    var spaceString = '';\n    for (var i = 1; i < option.itemLevel; i++) {\n      spaceString += '    ';\n    }\n    var endString = '\\n';\n    if (option.hasChild || option.isLastOne) {\n      endString = '';\n    }\n    if (option.type === 'UL') {\n      return spaceString + '- ' + text + endString;\n    }\n    return '' + spaceString + option.index + '. ' + text + endString;\n  }\n});\n\n/**\n * Markdown\n *\n * @export\n * @class Markdown\n */\n\nvar Markdown = function () {\n  function Markdown(container) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Markdown);\n\n    this.container = container;\n    this.wrapMarkdown = Markdown.wrapMarkdown;\n    this.options = _Object$assign({}, defaultOptions$1, options);\n  }\n\n  /**\n   * Get the selected markdown\n   *\n   * @param {Node} startNode\n   * @param {Node} endNode\n   * @param {Number} startIndex\n   * @param {number} endIndex\n   * @param {Stack} markdownStack\n   */\n\n\n  _createClass(Markdown, [{\n    key: 'getSelectMarkdown',\n    value: function getSelectMarkdown(startNode, endNode, startIndex, endIndex, markdownStack) {\n      var result = {\n        markdown: ''\n      };\n      var popText = '';\n      if (markdownStack === undefined) markdownStack = [];\n      if (startNode.childNodes.length > 0 && startNode.nodeName !== 'SCRIPT' && startNode.nodeName !== 'STYLE') {\n        var childNode = startNode.childNodes[0];\n\n        var _getSelectMarkdown = this.getSelectMarkdown(childNode, endNode, 0, endIndex, markdownStack),\n            markdown = _getSelectMarkdown.markdown;\n\n        result.markdown = markdown;\n        return result;\n      }\n\n      if (startNode.nodeName === '#text') {\n        var node = startNode;\n        var tempMarkdownStack = [];\n        var textEndIndex = startNode === endNode ? endIndex : startNode.textContent.length;\n        var currentText = startNode.textContent.substring(startIndex, textEndIndex).replace(/(^\\s*)|(\\s*$)/g, '');\n        if (markdownStack.length !== 0 && node.parentNode === markdownStack[markdownStack.length - 1].node) {\n          popText = currentText;\n        }\n        var isContainer = false;\n        while (!isContainer && (markdownStack.length === 0 || node.parentNode !== markdownStack[markdownStack.length - 1].node)) {\n          if (node === this.container) isContainer = true;\n          var text = '';\n          if (node.nodeName === '#text') {\n            text = currentText;\n          }\n          node = node.parentNode;\n          tempMarkdownStack.push({\n            node: node,\n            text: text\n          });\n        }\n        while (tempMarkdownStack.length !== 0) {\n          markdownStack.push(tempMarkdownStack.pop());\n        }\n      }\n\n      if (startNode.nodeName === 'IMG') {\n        if (markdownStack.length > 0) {\n          markdownStack[markdownStack.length - 1].text += this.wrapMarkdown(startNode, this.options);\n        } else {\n          result.markdown += this.wrapMarkdown(startNode, this.options);\n        }\n      }\n\n      if (startNode === endNode) {\n        if (markdownStack.length !== 0) {\n          var popMarkdown = markdownStack.pop();\n          popMarkdown.text += popText;\n          result.markdown = this.wrapMarkdown(popMarkdown.node, this.options, popMarkdown.text);\n          if (markdownStack.length !== 0) {\n            markdownStack[markdownStack.length - 1].text += result.markdown;\n          }\n        }\n        while (markdownStack.length !== 0) {\n          var _popMarkdown = markdownStack.pop();\n          result.markdown = this.wrapMarkdown(_popMarkdown.node, this.options, _popMarkdown.text);\n          if (markdownStack.length !== 0) {\n            markdownStack[markdownStack.length - 1].text += result.markdown;\n          }\n        }\n        return result;\n      }\n      var nextNode = startNode.nextSibling;\n      if (nextNode) {\n        var _getSelectMarkdown2 = this.getSelectMarkdown(nextNode, endNode, 0, endIndex, markdownStack),\n            _markdown = _getSelectMarkdown2.markdown;\n\n        if (markdownStack.length > 0) {\n          markdownStack[markdownStack.length - 1].text += _markdown;\n        } else {\n          result.markdown += _markdown;\n        }\n      } else {\n        var currentNode = startNode.parentNode;\n        var _popMarkdown2 = markdownStack.pop();\n        _popMarkdown2.text += popText;\n        result.markdown += this.wrapMarkdown(_popMarkdown2.node, this.options, _popMarkdown2.text);\n        if (markdownStack.length !== 0) {\n          markdownStack[markdownStack.length - 1].text += result.markdown;\n        }\n        while (currentNode && currentNode.nextSibling === null) {\n          currentNode = currentNode.parentNode;\n          _popMarkdown2 = markdownStack.pop();\n          _popMarkdown2.text += popText;\n          result.markdown = this.wrapMarkdown(_popMarkdown2.node, this.options, _popMarkdown2.text);\n          if (markdownStack.length !== 0) {\n            markdownStack[markdownStack.length - 1].text += result.markdown;\n          }\n        }\n        if (currentNode) {\n          var _getSelectMarkdown3 = this.getSelectMarkdown(currentNode.nextSibling, endNode, 0, endIndex, markdownStack),\n              _markdown2 = _getSelectMarkdown3.markdown;\n\n          if (markdownStack.length !== 0) {\n            markdownStack[markdownStack.length - 1].text += _markdown2;\n          } else {\n            result.markdown = _markdown2;\n          }\n        } else {\n          throw new Error('Invalid end node');\n        }\n      }\n      return result;\n    }\n  }], [{\n    key: 'wrapMarkdown',\n    value: function wrapMarkdown(node, options, text) {\n      if (node.nodeName === 'IMG') {\n        var imgOption = {\n          alt: node.alt,\n          src: node.src,\n          width: node.width,\n          height: node.height\n        };\n        return options[node.nodeName] ? options[node.nodeName](imgOption) : '';\n      } else if (node.nodeName === 'LI') {\n        var itemLevel = 1;\n        var tempNode = node.parentNode;\n        while (tempNode.parentNode) {\n          tempNode = tempNode.parentNode;\n          if (tempNode.nodeName === node.parentNode.nodeName) itemLevel++;\n        }\n        var hasChild = false;\n        if (domCollectionToArray(node.childNodes).some(function (childNode) {\n          return childNode.nodeName === 'UL' || childNode.nodeName === 'OL';\n        })) {\n          hasChild = true;\n        }\n        var isLastOne = false;\n        if (!node.nextElementSibling) {\n          isLastOne = true;\n        }\n        var option = {\n          type: node.parentNode.nodeName,\n          isLastOne: isLastOne,\n          itemLevel: itemLevel,\n          hasChild: hasChild,\n          index: [].indexOf.call(node.parentNode.children, node) + 1\n        };\n        return options[node.nodeName] ? options[node.nodeName](text, option) : text;\n      } else if (node.nodeName === 'UL' || node.nodeName === 'OL') {\n        var listLevel = 1;\n        var _tempNode = node.parentNode;\n        while (_tempNode.parentNode) {\n          _tempNode = _tempNode.parentNode;\n          if (_tempNode.nodeName === node.nodeName) listLevel++;\n        }\n        return options[node.nodeName] ? options[node.nodeName](text, { listLevel: listLevel }) : text;\n      }\n      return options[node.nodeName] ? options[node.nodeName](text) : text;\n    }\n  }]);\n\n  return Markdown;\n}();\n\nvar EventType = {\n  TOUCH_START: 'touchstart',\n  TOUCH_MOVE: 'touchmove',\n  TOUCH_MOVE_THROTTLE: 'touchmovethrottle',\n  TOUCH_END: 'touchend',\n  TAP: 'tap',\n  LONG_TAP: 'longtap'\n\n  /**\n   * Touch Event class\n   *\n   * @export\n   * @class TouchEvent\n   */\n};\nvar TouchEvent = function () {\n  function TouchEvent(element, options) {\n    _classCallCheck(this, TouchEvent);\n\n    this.disabled = false;\n    this.options = {\n      longTapTime: 600,\n      tapTime: 500,\n      slideDistance: 20,\n      throttleTime: 50\n      // this.element = getDeviceType() === DeviceType.MOBILE ? element : window\n    };this.element = element || window;\n    this.options = _Object$assign(this.options, options);\n    this.touchStartCallbacks = [];\n    this.touchMoveCallbacks = [];\n    this.touchMoveThrottleCallbacks = [];\n    this.touchEndCallbacks = [];\n    this.tapCallbacks = [];\n    this.longTapCallbacks = [];\n    this.hook = function () {\n      return true;\n    };\n\n    this.touchStartPosition = { x: 0, y: 0 };\n    this.longTapTimerHandler = null;\n    this.touchMoveTimerHandler = null;\n    this.touchStartTime = Date.now();\n    this.lastMoveTime = Date.now();\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.startEventName = getDeviceType() === DeviceType.MOBILE ? 'touchstart' : 'mousedown';\n    this.moveEventName = getDeviceType() === DeviceType.MOBILE ? 'touchmove' : 'mousemove';\n    this.endEventName = getDeviceType() === DeviceType.MOBILE ? 'touchend' : 'mouseup';\n    this.cancelEventName = getDeviceType() === DeviceType.MOBILE ? 'touchcancel' : 'mouseleave';\n    this.element.addEventListener(this.startEventName, this.onTouchStart);\n    this.element.addEventListener(this.moveEventName, this.onTouchMove, {\n      passive: false\n    });\n    this.element.addEventListener(this.endEventName, this.onTouchEnd);\n    this.element.addEventListener(this.cancelEventName, this.onTouchEnd);\n  }\n\n  _createClass(TouchEvent, [{\n    key: 'disable',\n    value: function disable() {\n      this.disabled = true;\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      this.disabled = false;\n    }\n    /**\n     * Register event\n     *\n     * @param {string} eventType\n     * @param {Function} callback\n     * @memberof TouchEvent\n     */\n\n  }, {\n    key: 'registerEvent',\n    value: function registerEvent(eventType, callback) {\n      if (typeof callback !== 'function') return;\n\n      switch (eventType) {\n        case EventType.TOUCH_START:\n          this.touchStartCallbacks.push(callback);\n          break;\n        case EventType.TOUCH_MOVE:\n          this.touchMoveCallbacks.push(callback);\n          break;\n        case EventType.TOUCH_MOVE_THROTTLE:\n          this.touchMoveThrottleCallbacks.push(callback);\n          break;\n        case EventType.TOUCH_END:\n          this.touchEndCallbacks.push(callback);\n          break;\n        case EventType.TAP:\n          this.tapCallbacks.push(callback);\n          break;\n        case EventType.LONG_TAP:\n          this.longTapCallbacks.push(callback);\n          break;\n        default:\n          break;\n      }\n    }\n  }, {\n    key: 'registerHook',\n    value: function registerHook(callback) {\n      this.hook = callback;\n    }\n  }, {\n    key: 'onTouchStart',\n    value: function onTouchStart(e) {\n      var _this = this;\n\n      if (this.disabled) return;\n      if (e.touches && e.touches.length > 1) return;\n      if (!this.hook('touchstart', e)) return;\n      this.touchStartCallbacks.forEach(function (callback) {\n        return callback(e);\n      });\n\n      this.longTapTimerHandler = setTimeout(function () {\n        _this.onLongTap(e);\n      }, this.options.longTapTime);\n\n      this.touchStartPosition = getTouchPosition(e);\n      this.touchStartTime = Date.now();\n    }\n  }, {\n    key: 'onTouchMove',\n    value: function onTouchMove(e) {\n      var _this2 = this;\n\n      if (this.disabled) return;\n      if (e.touches && e.touches.length > 1) return;\n      if (!this.hook('touchmove', e)) return;\n\n      this.touchMoveCallbacks.forEach(function (callback) {\n        return callback(e);\n      });\n\n      clearTimeout(this.touchMoveTimerHandler);\n      this.touchMoveTimerHandler = setTimeout(function () {\n        _this2.onTouchMoveThrottle(e);\n      }, this.options.throttleTime);\n      if (Date.now() - this.lastMoveTime > this.options.throttleTime) {\n        this.lastMoveTime = Date.now();\n        this.onTouchMoveThrottle(e);\n      }\n\n      var currentPosition = getTouchPosition(e);\n      var moveDistance = getDistance(currentPosition, this.touchStartPosition);\n      if (moveDistance > this.options.slideDistance) {\n        clearTimeout(this.longTapTimerHandler);\n        this.longTapTimerHandler = null;\n      }\n    }\n  }, {\n    key: 'onTouchEnd',\n    value: function onTouchEnd(e) {\n      if (this.disabled) return;\n      if (e.touches && e.touches.length > 1) return;\n      if (!this.hook('touchmove', e)) return;\n\n      this.touchEndCallbacks.forEach(function (callback) {\n        return callback(e);\n      });\n\n      clearTimeout(this.longTapTimerHandler);\n      this.longTapTimerHandler = null;\n      if (Date.now() - this.touchStartTime < this.options.tapTime) {\n        var currentPosition = getTouchPosition(e);\n        var moveDistance = getDistance(currentPosition, this.touchStartPosition);\n        if (moveDistance < this.options.slideDistance) {\n          e.preventDefault();\n          var clickEvent = this.constructor.createMouseEvent('click', e);\n          this.onTap(e);\n          e.target.dispatchEvent(clickEvent);\n        }\n      }\n    }\n  }, {\n    key: 'onTouchMoveThrottle',\n    value: function onTouchMoveThrottle(e) {\n      this.touchMoveThrottleCallbacks.forEach(function (callback) {\n        return callback(e);\n      });\n    }\n  }, {\n    key: 'onTap',\n    value: function onTap(e) {\n      if (this.disabled) return;\n      if (!this.hook('tap', e)) return;\n\n      this.tapCallbacks.forEach(function (callback) {\n        return callback(e);\n      });\n    }\n  }, {\n    key: 'onLongTap',\n    value: function onLongTap(e) {\n      if (this.disabled) return;\n      this.longTapCallbacks.forEach(function (callback) {\n        return callback(e);\n      });\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.element.removeEventListener(this.startEventName, this.onTouchStart);\n      this.element.removeEventListener(this.moveEventName, this.onTouchMove);\n      this.element.removeEventListener(this.endEventName, this.onTouchEnd);\n      this.element.removeEventListener(this.cancelEventName, this.onTouchEnd);\n    }\n  }], [{\n    key: 'createMouseEvent',\n    value: function createMouseEvent(type, e) {\n      var touch = getTouch(e);\n      var event = new MouseEvent(type);\n      event.initMouseEvent(type, true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n      event.forwardedTouchEvent = true;\n      return event;\n    }\n  }]);\n\n  return TouchEvent;\n}();\n\nvar defaultOptions$2 = {\n  disableSelect: false,\n  menuItems: [],\n  menuTopOffset: 0,\n  isMultiColumnLayout: false,\n  cursor: {\n    same: false\n  },\n  scrollOffsetBottom: 100,\n  scrollSpeedLevel: 4,\n  adjustTextStyleDisabled: false\n};\n\nvar preventDefaultCb = function preventDefaultCb(e) {\n  return e.preventDefault();\n};\nvar copyListener = function copyListener() {};\n/**\n * A simple article  marker library\n * @example\n * // A simple example\n * const em = new EasyMarker({\n *   menuTopOffset: '2rem',\n *   menuItems: [\n *     {\n *       text: '',\n *       id: 1\n *     },\n *     {\n *       text: '',\n *       style: {\n *         backgroundColor: '#407ff2',\n *         paddingLeft: '0.5rem'\n *       },\n *       id: 2\n *     },\n *     {\n *       text: '',\n *       id: 3\n *     }\n *   ],\n *  )\n *\n *  em.create(document.querySelector('.article-body'),\n *    document.body,\n *    document.querySelectorAll('.article-body>:not(.text)')\n *\n * // a markdown example\n * const em = new EasyMarker({\n * menuTopOffset:'2rem',\n * scrollSpeedLevel: 6,\n * scrollOffsetBottom: '1.5rem',\n *   menuItems: [\n *     {\n *       text: '',\n *       id: 1,\n *       iconName:'iconfont icon-mark'\n *     },\n *     {\n *       text: '',\n *       style: {\n *         backgroundColor: '#407ff2',\n *         paddingLeft: '0.5rem'\n *       },\n *       id: 2,\n *       iconName:'iconfont icon-share'\n *     },\n *     {\n *       text: '',\n *       id: 3,\n *       iconName:'iconfont icon-copy'\n *     }\n *   ],\n * // Not required\n *  markdownOptions: {\n *   H1: text => `\\n# ${text}\\n\\n`,\n *   H2: text => `\\n## ${text}\\n\\n`,\n *   H3: text => `\\n### ${text}\\n\\n`,\n *   H4: text => `\\n#### ${text}\\n\\n`,\n *   H5: text => `\\n##### ${text}\\n\\n`,\n *   H6: text => `\\n###### ${text}\\n\\n`,\n *   P: text => `${text}\\n\\n`,\n *   FIGCAPTION: text => `${text}\\n\\n`,\n *   STRONG: text => `**${text}**`,\n *   B: text => `**${text}**`,\n *   EM: text => `*${text}*`,\n *   I: text => `*${text}*`,\n *   S: text => `~~${text}~~`,\n *   INS: text => `++${text}++`,\n *   // IMG\n *   // option.alt: IMG alt\n *   // option.src: IMG src\n *   // option.width: IMG width\n *   // option.height: IMG height\n *   IMG: option => `![${option.alt}](${option.src}?size=${option.width}x${option.height})\\n`,\n *   // UL\n *   // option.listLevel: List nesting level\n *   UL: (text, option) => {\n *     if (option.listLevel > 1) {\n *       return `\\n${text}`\n *     }\n *     return `\\n${text}\\n`\n *   },\n *   // OL\n *   // option.listLevel: List nesting level\n *   OL: (text, option) => {\n *     if (option.listLevel > 1) {\n *       return `\\n${text}`\n *     }\n *     return `\\n${text}\\n`\n *   },\n *   // LI\n *   // option.type: parentNode nodeName,\n *   // option.isLastOne: Whether the last item in the list\n *   // option.itemLevel: List nesting level\n *   // option.hasChild: Is the node has child node\n *   // option.index: The index in the list\n *   LI: (text, option) => {\n *     let spaceString = ''\n *     for (let i = 1; i < option.itemLevel; i++) { spaceString += '    ' }\n *     let endString = '\\n'\n *     if (option.hasChild || option.isLastOne) {\n *       endString = ''\n *     }\n *     if (option.type === 'UL') { return `${spaceString}- ${text}${endString}` }\n *     return `${spaceString}${option.index}. ${text}${endString}`\n *   },\n *  }\n * })\n *\n * em.create(document.querySelector('.article-body'), document.body)\n * em.onMenuClick((id, data) => {\n *   console.log('You click the menu!');\n *   console.log(id, data);\n * });\n *\n * // A Region example\n *\n * const em = new EasyMarker({\n *  regions: texts,\n *  menuTopOffset: '120px',\n *  scrollSpeedLevel: 6,\n *  scrollOffsetBottom: '1.5rem',\n *  mask: {\n *    color: '#407ff2',\n *  },\n *  menuStyle: {\n *    menu: {},\n *    item: {\n *      fontSize: '15px',\n *      padding: '0px 10px',\n *      lineHeight: '30px',\n *    },\n *    triangle: {},\n *  },\n *  menuItems: [\n *    {\n *      text: '',\n *      type: 'select',\n *      iconName: 'iconfont mark',\n *      id: '302',\n *      style: {\n *        backgroundColor: 'yellow',\n *        paddingLeft: '1rem',\n *      },\n *      iconStyle: {\n *        background: 'green',\n *      },\n *    },\n *    {\n *      text: '',\n *      type: 'highlight',\n *      iconName: 'iconfont icon-delete',\n *      id: '302',\n *    },\n *    {\n *      id: 222,\n *      text: '',\n *      iconName: 'iconfont icon-copy',\n *    },\n *   ],\n * });\n *\n * em.onMenuClick(function (id, data) {\n *   console.log('You click the menu!', id, data);\n * });\n *\n * em.onSelectStatusChange((val) => {\n *   console.log('onSelectStatusChange', val);\n * });\n *\n * em.create(document.body);\n *\n * @export\n */\n\nvar EasyMarker = function () {\n  /**\n   * Creates an instance of EasyMarker.\n   * @param {Object} options options\n   * @param {Object[]} options.menuItems menu item option\n   * @param {string} options.menuItems[].text menu text\n   * @param {string} options.menuItems[].type menu type 'select'(Show menu only when selected) 'highlight' (Show menu only when click highlight)\n   * @param {string[]} options.menuItems[].iconName menu icon class\n   * @param {Object} options.menuItems[].style menu item style\n   * @param {Object} options.menuItems[].iconStyle menu item icon style\n   * @param {number|string} options.menuTopOffset the offset from the top of the menu relative screen, default 0.\n   * @param {Object} options.menuStyle the menu style\n   * @param {Object} options.menuStyle.menu the menu style\n   * @param {Object} options.menuStyle.triangle the triangle style\n   * @param {Object} options.menuStyle.item the sub menu style\n   * @param {Object} options.menuStyle.icon the sub menu icon style\n   * @param {boolean} options.disableTapHighlight disable highlight when tap\n   * @param {Object} options.cursor cursor config\n   * @param {string} options.cursor.color cursor color\n   * @param {boolean} options.cursor.same whether the cursor is in the same direction\n   * @param {Object} options.mask mask config\n   * @param {string} options.mask.color mask color\n   * @param {Object} options.highlight highlight config\n   * @param {string} options.highlight.color highlight color\n   * @param {number} options.scrollSpeedLevel The speed of scrolling when touching bottom, default 4\n   * @param {number|string} options.scrollOffsetBottom triggering scrolling, distance from the bottom, default 100\n   * @param {Object} options.markdownOptions Customize options about the mapping relations between HTML and Markdown\n   * @param {Object[]} options.regions In region mode, all region info\n   * @param {string} options.regions[].text region text\n   * @param {number} options.regions[].top region top\n   * @param {number} options.regions[].left region left\n   * @param {number} options.regions[].width region width\n   * @param {number} options.regions[].height region height\n   * @param {boolean} options.disableSelect disabled select\n   */\n  function EasyMarker(options) {\n    _classCallCheck(this, EasyMarker);\n\n    this.options = _Object$assign({}, defaultOptions$2, options);\n    this.$selectStatus = SelectStatus.NONE;\n    this.windowHeight = null;\n    this.container = null;\n    this.scrollContainer = null;\n    this.excludeElements = [];\n    this.includeElements = [];\n    this.highlight = null;\n    this.movingCursor = null;\n    this.touchEvent = null;\n    this.scrollInterval = null;\n    this.cursor = {\n      start: null,\n      end: null\n    };\n\n    this.mask = null;\n    this.menu = null;\n    this.scrollOffsetBottom = null;\n    this.scrollSpeedLevel = null;\n    this.containerScroll = null;\n    this.deviceType = getDeviceType();\n    this.selectStatusChangeHandler = function () {};\n    this.menuOnClick = function () {};\n    this.highlightLineClick = null;\n  }\n\n  _createClass(EasyMarker, [{\n    key: 'create',\n\n\n    /**\n     * Initialization\n     *\n     * @param {HTMLElement} containerElement container element\n     * @param {HTMLElement} [scrollContainerElement] scroll container element\n     * @param {Object} options options\n     * @param {Object} options.includeElements included elements\n     * @param {Object} options.excludeElements not included elements, Higher priority\n     * @memberof EasyMarker\n     */\n    value: function create(containerElement, scrollContainerElement) {\n      var _this = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n      this.container = containerElement;\n      this.adjustTextStyle();\n      // eslint-disable-next-line arrow-parens\n      this.container.oncontextmenu = function (event) {\n        event.returnValue = false;\n      };\n\n      this.windowHeight = document.documentElement.clientHeight;\n      if (options.constructor === Object) {\n        this.excludeElements = options.excludeElements ? [].concat(_toConsumableArray(options.excludeElements)) : [];\n        this.includeElements = options.includeElements ? [].concat(_toConsumableArray(options.includeElements)) : [containerElement];\n      } else {\n        // deprecated\n        // Compatible with older versions,options equivalent to excludeElements\n        this.excludeElements = [].concat(_toConsumableArray(options));\n        this.includeElements = [containerElement];\n      }\n      this.scrollContainer = scrollContainerElement || document.body;\n      this.container.addEventListener('contextmenu', preventDefaultCb);\n      copyListener = function copyListener(e) {\n        return _this.copyListener(e);\n      };\n      document.addEventListener('copy', copyListener);\n      if (this.scrollContainer === document.body) {\n        this.scrollContainer.onscroll = this.handleScroll.bind(this);\n      } else {\n        this.containerScroll = function () {\n          _this.handleScroll();\n        };\n        this.scrollContainer.addEventListener('scroll', this.containerScroll);\n      }\n      // this.position.setAll(getElementAbsolutePosition(this.container))\n\n      this.container.style.userSelect = 'none';\n      this.container.style.webkitUserSelect = 'none';\n      this.container.style.position = 'relative';\n\n      this.touchEvent = new TouchEvent(this.container);\n      if (!this.options.disableSelect) {\n        this.touchEvent.registerEvent(EventType.TOUCH_START, this.handleTouchStart.bind(this));\n        this.touchEvent.registerEvent(EventType.TOUCH_MOVE, this.handleTouchMove.bind(this));\n        this.touchEvent.registerEvent(EventType.TOUCH_MOVE_THROTTLE, this.handleTouchMoveThrottle.bind(this));\n        this.touchEvent.registerEvent(EventType.TOUCH_END, this.handleTouchEnd.bind(this));\n        this.touchEvent.registerEvent(EventType.LONG_TAP, this.handleLongTap.bind(this));\n      }\n\n      this.touchEvent.registerEvent(EventType.TAP, this.handleTap.bind(this));\n\n      var CursorElement = this.options.cursor && this.options.cursor.Cursor ? this.options.cursor.Cursor : Cursor;\n\n      if (this.options.cursor.same) {\n        this.cursor.start = new CursorElement(this.container, CursorType.END, _Object$assign({ mode: this.mode }, this.options.cursor || {}));\n      } else {\n        this.cursor.start = new CursorElement(this.container, CursorType.START, _Object$assign({ mode: this.mode }, this.options.cursor || {}));\n      }\n      this.cursor.end = new CursorElement(this.container, CursorType.END, this.options.cursor || {});\n      this.movingCursor = this.cursor.end;\n\n      this.mask = new Mask(this.container, _Object$assign({ mode: this.mode }, this.options.mask || {}));\n      this.highlight = new Highlight(this.container, _Object$assign({ mode: this.mode }, this.options.highlight || {}));\n      this.menu = new Menu(this.container, {\n        menuItems: this.options.menuItems,\n        topOffset: this.options.menuTopOffset,\n        style: this.options.menuStyle,\n        isMultiColumnLayout: this.options.isMultiColumnLayout,\n        mode: this.mode\n      });\n      this.menu.easyMarker = this;\n      this.highlight.easyMarker = this;\n      this.mask.easyMarker = this;\n      this.markdown = new Markdown(this.container, this.options.markdownOptions);\n      this.scrollOffsetBottom = anyToPx(this.options.scrollOffsetBottom);\n      this.scrollSpeedLevel = this.options.scrollSpeedLevel;\n    }\n\n    /**\n     * Disable touch event\n     */\n\n  }, {\n    key: 'disable',\n    value: function disable() {\n      this.touchEvent.disable();\n    }\n\n    /**\n     * Enable touch event\n     */\n\n  }, {\n    key: 'enable',\n    value: function enable() {\n      this.touchEvent.enable();\n    }\n    /**\n     * Highlight the lines between the specified nodes\n     * @example\n     * const id = 2;\n     * const selection = {\n     *   anchorNode: textNodeA,\n     *   anchorOffset: 1,\n     *   focusNode: textNodeB,\n     *   focusOffset: 2\n     * };\n     * const meta = { someKey: 'someValue' };\n     * em.highlightLine(selection, id, meta);\n     * @param {Object} selection selection\n     * @param {Node} selection.anchorNode start node\n     * @param {number} selection.anchorOffset start node's text offset\n     * @param {Node} selection.focusNode end node\n     * @param {number} selection.focusOffset start node's text offset\n     * @param {*} [id] line id\n     * @param {*} [meta] meta information\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'highlightLine',\n    value: function highlightLine(selection, id, meta) {\n      this.highlight.highlightLine(selection, id, meta);\n    }\n\n    /**\n     * Highlight multiple lines\n     * @example\n     * const id = 2;\n     * const selection = {\n     *   anchorNode: textNodeA,\n     *   anchorOffset: 1,\n     *   focusNode: textNodeB,\n     *   focusOffset: 2\n     * };\n     * const meta = { someKey: 'someValue' };\n     * em.highlightLines([{selection, id, meta}]);\n     * @param {Object[]} lines\n     * @param {*} [lines[].id]\n     * @param {*} [lines[].meta]\n     * @param {Object} lines[].selection\n     * @param {Node} lines[].selection.anchorNode\n     * @param {number} lines[].selection.anchorOffset\n     * @param {Node} lines[].selection.focusNode\n     * @param {number} lines[].selection.focusOffset\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'highlightLines',\n    value: function highlightLines(lines) {\n      this.highlight.highlightLines(lines);\n    }\n\n    /**\n     * Cancel highlight\n     *\n     * @param {*} id line ID\n     * @returns {boolean}\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'cancelHighlightLine',\n    value: function cancelHighlightLine(id) {\n      this.highlight.cancelHighlightLine(id);\n    }\n\n    /**\n     * Highlight line click handler\n     *\n     * @param {EasyMarker~highlightLineClickHandler} cb\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'onHighlightLineClick',\n    value: function onHighlightLineClick(cb) {\n      this.highlightLineClick = cb;\n    }\n\n    /**\n     * Select status changing callback\n     *\n     * @param {Function} cb\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'onSelectStatusChange',\n    value: function onSelectStatusChange(cb) {\n      this.selectStatusChangeHandler = cb;\n    }\n\n    /**\n     * menu item click handler\n     *\n     * @param {EasyMarker~menuClickHandler} cb\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'onMenuClick',\n    value: function onMenuClick(cb) {\n      // this.menu.handler = cb\n      this.menuOnClick = cb;\n    }\n\n    /**\n     * Register event hook\n     *\n     * @param {*} cb\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'registerEventHook',\n    value: function registerEventHook(cb) {\n      this.touchEvent.registerHook(cb);\n    }\n    /**\n     * Destroy instance\n     *\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.container.oncontextmenu = null;\n      this.container.removeEventListener('contextmenu', preventDefaultCb);\n      document.removeEventListener('copy', copyListener);\n      if (this.containerScroll !== null) {\n        this.scrollContainer.removeEventListener('scroll', this.containerScroll);\n        this.containerScroll = null;\n      }\n      this.scrollContainer.onscroll = null;\n\n      this.touchEvent.destroy();\n      this.cursor.start.destroy();\n      this.cursor.end.destroy();\n      this.mask.destroy();\n      this.highlight.destroy();\n      this.menu.destroy();\n\n      this.$selectStatus = SelectStatus.NONE;\n      this.container = null;\n      this.scrollContainer = null;\n      this.excludeElements = [];\n      this.highlight = null;\n      this.movingCursor = null;\n      this.touchEvent = null;\n      this.cursor = {\n        start: null,\n        end: null\n      };\n      this.mask = null;\n      this.menu = null;\n\n      this.windowHeight = null;\n      this.includeElements = [];\n      this.scrollInterval = null;\n      this.scrollOffsetBottom = null;\n      this.scrollSpeedLevel = null;\n      this.selectStatusChangeHandler = function () {};\n      this.menuOnClick = function () {};\n      this.highlightLineClick = null;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.selectStatus = SelectStatus.NONE;\n      this.cursor.start.hide();\n      this.cursor.end.hide();\n      this.mask.reset();\n      this.menu.hide();\n    }\n\n    // endregion\n\n    // region private fields\n\n    /**\n     * Screen relative offset\n     *\n     * @readonly\n     * @private\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'adjustTextStyle',\n\n    /**\n     *\n     * @private\n     * @memberof EasyMarker\n     */\n    value: function adjustTextStyle() {\n      if (this.options.adjustTextStyleDisabled) return;\n      var children = this.container.children;\n\n      for (var i = 0; i < children.length; i++) {\n        children[i].style.zIndex = '40';\n        children[i].style.position = 'relative';\n      }\n    }\n\n    /**\n     *\n     * @private\n     * @param {HTMLElement} element\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'isContains',\n    value: function isContains(element) {\n      // exclude > include\n      return this.includeElements.findIndex(function (el) {\n        return el.contains(element);\n      }) !== -1 && this.excludeElements.findIndex(function (el) {\n        return el.contains(element);\n      }) === -1;\n    }\n\n    /**\n     * Long press event\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'handleLongTap',\n    value: function handleLongTap() {}\n\n    /**\n     * Tap event\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'handleTap',\n    value: function handleTap() {}\n\n    /**\n     * copy listener\n     *\n     * @private\n     * @memberof EasyMarker\n     */\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'copyListener',\n    value: function copyListener() {}\n\n    /**\n     * touchstart event handler\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart(e) {\n      if (this.selectStatus === SelectStatus.FINISH && this.menu.isShow && this.menu.type !== MenuType.HIGHLIGHT) {\n        var position = this.getTouchRelativePosition(e);\n        var startCursorRegion = this.cursor.start.inRegion(position);\n        var endCursorRegion = this.cursor.end.inRegion(position);\n        if (startCursorRegion.inRegion && endCursorRegion.inRegion) {\n          this.selectStatus = SelectStatus.SELECTING;\n          this.movingCursor = startCursorRegion.distance < endCursorRegion.distance ? this.cursor.start : this.cursor.end;\n        } else if (endCursorRegion.inRegion) {\n          this.selectStatus = SelectStatus.SELECTING;\n          this.movingCursor = this.cursor.end;\n        } else if (startCursorRegion.inRegion) {\n          this.selectStatus = SelectStatus.SELECTING;\n          this.movingCursor = this.cursor.start;\n        }\n      }\n      // if (!this.highlight.inRegion(e)) {\n      //   e.preventDefault()\n      // }\n    }\n\n    /**\n     * touchmove event handler\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTouchMove',\n    value: function handleTouchMove(e) {\n      if (this.selectStatus === SelectStatus.SELECTING) {\n        e.preventDefault();\n      }\n    }\n\n    /**\n     * Throttle event of touchmove\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTouchMoveThrottle',\n    value: function handleTouchMoveThrottle(e) {\n      var _this2 = this;\n\n      // cursor\n      if (this.selectStatus === SelectStatus.SELECTING) {\n        var cursorOffset = this.deviceType === DeviceType.MOBILE ? this.movingCursor.height / 2 : 0;\n        var offset = this.movingCursor.offset || {\n          x: 0,\n          y: -cursorOffset\n        };\n        var touch = getTouch(e);\n        var targetY = e.clientY || touch.clientY;\n        if (targetY >= this.windowHeight - this.scrollOffsetBottom) {\n          if (this.scrollInterval !== null) clearInterval(this.scrollInterval);\n          var rate = (targetY - this.windowHeight + this.scrollOffsetBottom) * this.scrollSpeedLevel / this.scrollOffsetBottom;\n          this.scrollInterval = setInterval(function () {\n            _this2.scrollContainer.scrollTop += rate;\n            document.documentElement.scrollTop += rate;\n          }, 1);\n        } else {\n          clearInterval(this.scrollInterval);\n        }\n\n        var _getTouchPosition = getTouchPosition(e, offset),\n            x = _getTouchPosition.x,\n            y = _getTouchPosition.y;\n\n        var target = document.elementFromPoint(x, y);\n        if (this.isContains(target)) {\n          this.moveCursor(target, x, y);\n        }\n      }\n    }\n\n    /**\n     * touchmove event handler\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTouchEnd',\n    value: function handleTouchEnd() {\n      if (this.selectStatus === SelectStatus.SELECTING) {\n        if (this.scrollInterval) {\n          clearInterval(this.scrollInterval);\n          this.scrollInterval = null;\n        }\n      }\n    }\n\n    /**\n     * handleScroll\n     *\n     * @private\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleScroll',\n    value: function handleScroll() {\n      if (this.selectStatus === SelectStatus.FINISH) {\n        this.menu.handleScroll();\n      }\n    }\n  }, {\n    key: 'showHighlightMenu',\n    value: function showHighlightMenu(selection, options) {\n      this.setSelection(selection);\n      this.selectStatus = SelectStatus.FINISH;\n      this.menu.setPosition(this.start, this.end);\n      this.menu.type = MenuType.HIGHLIGHT;\n      this.menu.options = options;\n      this.menu.show();\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'setSelection',\n    value: function setSelection() {}\n  }, {\n    key: 'getTouchRelativePosition',\n    value: function getTouchRelativePosition(e) {\n      var cursorOffset = this.deviceType === DeviceType.MOBILE ? this.movingCursor.height / 2 : 0;\n      var offset = {\n        x: 0,\n        y: -cursorOffset\n      };\n      var position = getTouchPosition(e, offset);\n      position.x -= this.screenRelativeOffset.x;\n      position.y -= this.screenRelativeOffset.y;\n      return position;\n    }\n\n    // copy(e) {\n    //   if (this.selectStatus === SelectStatus.FINISH) {\n    //     const text = this.getSelectText() || ''\n    //     e.clipboardData.setData('text/plain', text)\n    //     this.reset()\n    //     e.preventDefault()\n    //   }\n    // }\n\n    // endregion\n\n  }, {\n    key: 'selectStatus',\n    get: function get() {\n      return this.$selectStatus;\n    },\n    set: function set(val) {\n      if (val !== this.$selectStatus) {\n        this.selectStatusChangeHandler(val);\n      }\n      this.$selectStatus = val;\n      if (val === SelectStatus.FINISH) {\n        this.menu.setPosition(this.start, this.end);\n        this.menu.type = MenuType.SELECT;\n        this.menu.show();\n      } else {\n        this.menu.hide();\n      }\n    }\n\n    /**\n     * Initialization factory\n     *\n     * @static\n     * @param {HTMLElement} containerElement container element\n     * @param {HTMLElement} [scrollContainerElement] scroll container element\n     * @param {Object} options options\n     * @param {Object} options.includeElements included elements\n     * @param {Object} options.excludeElements not included elements, Higher priority\n     * @returns {EasyMarker}\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'screenRelativeOffset',\n    get: function get() {\n      var _container$getBoundin = this.container.getBoundingClientRect(),\n          top = _container$getBoundin.top,\n          left = _container$getBoundin.left;\n\n      return {\n        x: left,\n        y: top\n      };\n    }\n  }], [{\n    key: 'create',\n    value: function create(containerElement, scrollContainerElement) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n      var easyMarker = new this();\n      easyMarker.create(containerElement, scrollContainerElement, options);\n      return easyMarker;\n    }\n  }]);\n\n  return EasyMarker;\n}();\n\n/**\n * Menu item click handler\n * @callback EasyMarker~menuClickHandler\n * @param {*} id menu ID\n * @param {Object} selection selection\n * @param {Node} selection.anchorNode start node\n * @param {number} selection.anchorOffset start node's text offset\n * @param {Node} selection.focusNode end node\n * @param {number} selection.focusOffset start node's text offset\n */\n\n/**\n * Menu item click handler\n * @callback EasyMarker~highlightLineClickHandler\n * @param {*} id line ID\n * @param {*} meta meta information\n * @param {Object} selection selection\n * @param {Node} selection.anchorNode start node\n * @param {number} selection.anchorOffset start node's text offset\n * @param {Node} selection.focusNode end node\n * @param {number} selection.focusOffset start node's text offset\n */\n\nvar NodeEasyMarker = function (_BaseEasyMarker) {\n  _inherits(NodeEasyMarker, _BaseEasyMarker);\n\n  function NodeEasyMarker(options) {\n    _classCallCheck(this, NodeEasyMarker);\n\n    var _this = _possibleConstructorReturn(this, (NodeEasyMarker.__proto__ || _Object$getPrototypeOf(NodeEasyMarker)).call(this, options));\n\n    _this.textNode = {\n      start: null,\n      end: null\n    };\n    _this.markdown = null;\n    _this.mode = EasyMarkerMode.NODE;\n    _this.touchStartTime = 0;\n    return _this;\n  }\n\n  _createClass(NodeEasyMarker, [{\n    key: 'getSelectText',\n\n\n    /**\n     * Get the selected text\n     *\n     * @memberof EasyMarker\n     * @returns {string}\n     */\n    value: function getSelectText() {\n      var text = TextNode.getSelectText(this.textNode.start, this.textNode.end) || '';\n      return matchSubString(this.container.innerText, text) || text;\n    }\n  }, {\n    key: 'getSelectMarkdown',\n    value: function getSelectMarkdown() {\n      return this.markdown.getSelectMarkdown(this.textNode.start.node, this.textNode.end.node, this.textNode.start.offset, this.textNode.end.offset).markdown || '';\n    }\n\n    /**\n     * Swap the start and end cursors\n     *\n     * @private\n     * @param {any} clickPosition\n     * @param {any} currentPosition\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'swapCursor',\n    value: function swapCursor(clickPosition, currentPosition) {\n      var x = currentPosition.x,\n          y = currentPosition.y;\n\n      if (this.movingCursor === this.cursor.start) {\n        var endPosition = this.cursor.end.position;\n        if (y > endPosition.y || y === endPosition.y && x >= endPosition.x) {\n          this.cursor.start.position = this.cursor.end.position;\n          this.movingCursor = this.cursor.end;\n          this.textNode.start = new TextNode(this.textNode.end.node, this.textNode.end.offset);\n          this.textNode.end = new TextNode(clickPosition.node, clickPosition.index);\n        } else {\n          this.textNode.start = new TextNode(clickPosition.node, clickPosition.index);\n        }\n      } else {\n        var startPosition = this.cursor.start.position;\n        if (y < startPosition.y || y === startPosition.y && x <= startPosition.x) {\n          this.cursor.end.position = this.cursor.start.position;\n          this.movingCursor = this.cursor.start;\n          this.textNode.end = new TextNode(this.textNode.start.node, this.textNode.start.offset);\n          this.textNode.start = new TextNode(clickPosition.node, clickPosition.index);\n        } else {\n          this.textNode.end = new TextNode(clickPosition.node, clickPosition.index);\n        }\n      }\n    }\n\n    /**\n     * Start text selection\n     *\n     * @private\n     * @param {any} element\n     * @param {any} x\n     * @param {any} y\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'selectWords',\n    value: function selectWords(element, x, y) {\n      var separators = ['\\u3002\\u201D', '\\uFF1F\\u201D', '\\uFF01\\u201D', '\\u3002', '\\uFF1F', '\\uFF01'];\n\n      var _ref = getClickWordsPosition(element, x, y, separators) || {},\n          rects = _ref.rects,\n          node = _ref.node,\n          index = _ref.index,\n          wordsLength = _ref.wordsLength;\n\n      if (!rects || rects && rects.length === 0) return;\n      var startRect = rects[0];\n      var endRect = rects[rects.length - 1];\n      // start\n      var startLeft = startRect.left - this.screenRelativeOffset.x;\n      var startTop = startRect.top - this.screenRelativeOffset.y;\n      this.textNode.start = new TextNode(node, index);\n      this.cursor.start.height = startRect.height;\n      this.cursor.start.position = { x: startLeft, y: startTop\n\n        // end\n      };var endLeft = endRect.left - this.screenRelativeOffset.x;\n      var endTop = endRect.top - this.screenRelativeOffset.y;\n      this.textNode.end = new TextNode(node, index + wordsLength);\n      this.cursor.end.height = endRect.height;\n      this.cursor.end.position = { x: endLeft + endRect.width, y: endTop };\n\n      this.cursor.start.show();\n      this.cursor.end.show();\n\n      this.renderMask();\n      this.selectStatus = SelectStatus.FINISH;\n    }\n\n    /**\n     * Renders the selected mask layer\n     * @private\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'renderMask',\n    value: function renderMask() {\n      this.mask.render(this.textNode.start, this.textNode.end);\n    }\n\n    /**\n     * Move the cursor to the specified location\n     *\n     * @private\n     * @param {HTMLElement} element\n     * @param {number} x Relative to the screen positioning x\n     * @param {number} y Relative to the screen positioning Y\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'moveCursor',\n    value: function moveCursor(element, x, y) {\n      var clickPosition = getClickPosition(element, x, y, this.movingCursor === this.cursor.start);\n      if (clickPosition === null) return;\n      var relativeX = clickPosition.x - this.screenRelativeOffset.x;\n      var relativeY = clickPosition.y - this.screenRelativeOffset.y;\n      var unmovingCursor = this.movingCursor === this.cursor.start ? this.cursor.end : this.cursor.start;\n      if (unmovingCursor.position.x === relativeX && unmovingCursor.position.y === relativeY) {\n        return;\n      }\n      this.swapCursor(clickPosition, { x: relativeX, y: relativeY });\n\n      this.movingCursor.height = clickPosition.height;\n      this.movingCursor.position = { x: relativeX, y: relativeY };\n\n      this.cursor.start.show();\n      this.cursor.end.show();\n      this.renderMask();\n    }\n\n    /**\n     * touchstart event handler\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart(e) {\n      _get(NodeEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(NodeEasyMarker.prototype), 'handleTouchStart', this).call(this, e);\n      if (this.deviceType === DeviceType.PC) {\n        if (this.selectStatus === SelectStatus.FINISH) {\n          var isMenuClick = this.menu.inRegion(e);\n          var position = this.getTouchRelativePosition(e);\n          var startCursorRegion = this.cursor.start.inRegion(position);\n          var endCursorRegion = this.cursor.end.inRegion(position);\n          if (!isMenuClick && !startCursorRegion.inRegion && !endCursorRegion.inRegion) {\n            this.reset();\n          }\n        }\n        if (this.selectStatus === SelectStatus.NONE && this.isContains(e.target)) {\n          this.touchStartTime = Date.now();\n\n          var _getTouchPosition = getTouchPosition(e),\n              x = _getTouchPosition.x,\n              y = _getTouchPosition.y;\n\n          var element = document.elementFromPoint(x, y);\n          var clickPosition = getClickPosition(element, x, y, this.movingCursor !== this.cursor.start);\n          if (clickPosition) {\n            this.textNode.start = new TextNode(clickPosition.node, clickPosition.index);\n            if (this.textNode.start) {\n              var startLeft = clickPosition.x - this.screenRelativeOffset.x;\n              var startTop = clickPosition.y - this.screenRelativeOffset.y;\n\n              this.cursor.start.height = clickPosition.height;\n              this.cursor.start.position = { x: startLeft, y: startTop };\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'handleTouchMoveThrottle',\n    value: function handleTouchMoveThrottle(e) {\n      if (this.deviceType === DeviceType.PC) {\n        if (this.selectStatus === SelectStatus.NONE && this.textNode.start && !this.textNode.end) {\n          if (Date.now() - this.touchStartTime < 100) return;\n\n          var _getTouchPosition2 = getTouchPosition(e),\n              x = _getTouchPosition2.x,\n              y = _getTouchPosition2.y;\n\n          var element = document.elementFromPoint(x, y);\n          var clickPosition = getClickPosition(element, x, y, this.movingCursor === this.cursor.start);\n          if (clickPosition) {\n            this.textNode.end = new TextNode(clickPosition.node, clickPosition.index);\n\n            if (this.textNode.end) {\n              var endLeft = clickPosition.x - this.screenRelativeOffset.x;\n              var endTop = clickPosition.y - this.screenRelativeOffset.y;\n\n              this.cursor.end.height = clickPosition.height;\n              this.cursor.end.position = { x: endLeft, y: endTop };\n              this.selectStatus = SelectStatus.SELECTING;\n            }\n          }\n        }\n      }\n      _get(NodeEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(NodeEasyMarker.prototype), 'handleTouchMoveThrottle', this).call(this, e);\n    }\n\n    /**\n     * copy listener\n     *\n     * @private\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'copyListener',\n    value: function copyListener(e) {\n      if (this.selectStatus === SelectStatus.FINISH) {\n        this.menu.copyListener({\n          start: this.textNode.start,\n          end: this.textNode.end,\n          content: this.getSelectText(),\n          markdown: this.getSelectMarkdown()\n        }, e);\n        this.reset();\n      }\n    }\n\n    /**\n     * Tap event\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTap',\n    value: function handleTap(e) {\n      if (this.selectStatus === SelectStatus.FINISH) {\n        this.menu.handleTap(e, {\n          start: this.textNode.start,\n          end: this.textNode.end,\n          content: this.getSelectText(),\n          markdown: this.getSelectMarkdown()\n        });\n        var position = this.getTouchRelativePosition(e);\n        var startCursorRegion = this.cursor.start.inRegion(position);\n        var endCursorRegion = this.cursor.end.inRegion(position);\n        if (startCursorRegion.inRegion || endCursorRegion.inRegion) return;\n        this.reset();\n      } else if (this.selectStatus === SelectStatus.NONE) {\n        var inHighlightLine = this.highlight.handleTap(e);\n        if (!inHighlightLine && !this.options.disableTapHighlight && !this.options.disableSelect && this.isContains(e.target) && this.deviceType === DeviceType.MOBILE) {\n          var _getTouchPosition3 = getTouchPosition(e),\n              x = _getTouchPosition3.x,\n              y = _getTouchPosition3.y;\n\n          this.selectWords(e.target, x, y);\n        }\n      }\n    }\n\n    /**\n     * Long press event\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleLongTap',\n    value: function handleLongTap(e) {\n      if (this.deviceType === DeviceType.MOBILE) {\n        if (this.isContains(e.target)) {\n          var _getTouchPosition4 = getTouchPosition(e),\n              x = _getTouchPosition4.x,\n              y = _getTouchPosition4.y;\n\n          this.selectWords(e.target, x, y);\n        }\n      }\n    }\n\n    /**\n     * touchmove event handler\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTouchEnd',\n    value: function handleTouchEnd(e) {\n      _get(NodeEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(NodeEasyMarker.prototype), 'handleTouchEnd', this).call(this, e);\n      if (this.selectStatus === SelectStatus.SELECTING) {\n        this.selectStatus = SelectStatus.FINISH;\n      }\n      if (this.deviceType === DeviceType.PC) {\n        if (this.selectStatus === SelectStatus.NONE) {\n          this.reset();\n        }\n      }\n    }\n  }, {\n    key: 'setSelection',\n    value: function setSelection(selection) {\n      this.textNode.start = new TextNode(selection.anchorNode, selection.anchorOffset);\n      this.textNode.end = new TextNode(selection.focusNode, selection.focusOffset);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      _get(NodeEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(NodeEasyMarker.prototype), 'destroy', this).call(this);\n      this.textNode = {\n        start: null,\n        end: null\n      };\n      this.markdown = null;\n      this.mode = EasyMarkerMode.NODE;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      _get(NodeEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(NodeEasyMarker.prototype), 'reset', this).call(this);\n      this.textNode = {\n        start: null,\n        end: null\n      };\n    }\n  }, {\n    key: 'start',\n    get: function get$$1() {\n      return this.textNode.start;\n    }\n  }, {\n    key: 'end',\n    get: function get$$1() {\n      return this.textNode.end;\n    }\n  }]);\n\n  return NodeEasyMarker;\n}(EasyMarker);\n\nvar Region = function () {\n  function Region(list) {\n    _classCallCheck(this, Region);\n\n    this.originalRegionList = list;\n    this.regions = [];\n    // {\n    //   text: '', required\n    //   width: '', required\n    //   height: '', required\n    //   left: '', required\n    //   top: '', required\n    //   page: '', required\n    // }\n\n    this.initRectRegion();\n  }\n\n  _createClass(Region, [{\n    key: 'initRectRegion',\n    value: function initRectRegion() {\n      this.regions = Region.getLineRectRegionList(this.originalRegionList);\n    }\n  }, {\n    key: 'setRegions',\n    value: function setRegions(list) {\n      var regions = Region.getLineRectRegionList(list);\n      this.originalRegionList = list;\n      this.regions = regions;\n    }\n  }, {\n    key: 'getSentenceByPosition',\n    value: function getSentenceByPosition(point) {\n      var startRegion = void 0;\n      var endRegion = void 0;\n      var currentRegion = this.getRegionByPoint(point);\n      var separators = ['\\u3002\\u201D', '\\uFF1F\\u201D', '\\uFF01\\u201D', '\\u3002', '\\uFF1F', '\\uFF01'];\n      var separatorRegStr = separators.reduce(function (acc, separator) {\n        if (separator === '') return acc;\n        if (acc === '') return '\\\\' + separator;\n        return acc + '|\\\\' + separator;\n      }, '');\n      var separator = new RegExp('(' + separatorRegStr + ')');\n      var tempEndRegion = currentRegion;\n      while (!endRegion) {\n        var nextRegion = this.getNextRegion(tempEndRegion);\n        if (nextRegion === null) {\n          endRegion = tempEndRegion;\n        } else if (separator.test(nextRegion.text)) {\n          endRegion = nextRegion;\n        } else {\n          tempEndRegion = nextRegion;\n        }\n      }\n      var tempStartRegion = currentRegion;\n      while (!startRegion) {\n        var _nextRegion = this.getPreviousRegion(tempStartRegion);\n        if (_nextRegion === null) {\n          startRegion = tempStartRegion;\n        } else if (separator.test(_nextRegion.text)) {\n          startRegion = tempStartRegion;\n        } else {\n          tempStartRegion = _nextRegion;\n        }\n      }\n      return { start: startRegion, end: endRegion };\n    }\n  }, {\n    key: 'getText',\n    value: function getText(startRegion, endRegion) {\n      var startIndex = startRegion.originalIndex;\n      var endIndex = endRegion.originalIndex;\n      var resultRegions = this.originalRegionList.slice(startIndex, endIndex + 1);\n      var text = '';\n      resultRegions.forEach(function (item) {\n        text += item.text;\n      });\n      return text;\n    }\n  }, {\n    key: 'getRects',\n    value: function getRects(startRegion, endRegion) {\n      var startPageIndex = startRegion.pageIndex;\n      var endPageIndex = endRegion.pageIndex;\n      var startLineIndex = startRegion.lineIndex;\n      var endLineIndex = endRegion.lineIndex;\n      var startColumnIndex = startRegion.columnIndex;\n      var endColumnIndex = endRegion.columnIndex;\n      var rects = [];\n      if (startLineIndex === endLineIndex && startPageIndex === endPageIndex) {\n        var lineRectRegion = this.regions[startPageIndex].regions[startLineIndex];\n        rects.push(new DOMRect(startRegion.left, lineRectRegion.top, endRegion.left + endRegion.width - startRegion.left, lineRectRegion.height));\n        return rects;\n      }\n\n      if (startPageIndex === endPageIndex) {\n        var regions = this.regions[startPageIndex].regions.slice(startLineIndex, endLineIndex + 1);\n        rects.push.apply(rects, _toConsumableArray(Region.getRectsByRegions(regions, startColumnIndex, endColumnIndex)));\n      } else {\n        for (var i = startPageIndex; i <= endPageIndex; i++) {\n          if (i === startPageIndex) {\n            var _regions = this.regions[i].regions.slice(startLineIndex);\n            rects.push.apply(rects, _toConsumableArray(Region.getRectsByRegions(_regions, startColumnIndex, null)));\n          } else if (i === endPageIndex) {\n            var _regions2 = this.regions[i].regions.slice(0, endLineIndex + 1);\n            rects.push.apply(rects, _toConsumableArray(Region.getRectsByRegions(_regions2, null, endColumnIndex)));\n          } else {\n            var _regions3 = this.regions[i].regions;\n\n            rects.push.apply(rects, _toConsumableArray(Region.getRectsByRegions(_regions3, null, null)));\n          }\n        }\n      }\n      return rects;\n    }\n  }, {\n    key: 'getRegionByPoint',\n\n    /**\n     * get Region By Point\n     *\n     * @public\n     * @param {object} point\n     * @param {number} point.x\n     * @param {number} point.y\n     * @param {boolean} is the boundary strict\n     * @returns {(Region | null)}\n     */\n    value: function getRegionByPoint(point) {\n      var isLoose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var pointPosition = {\n        top: point.y,\n        left: point.x\n      };\n      if (this.regions.length <= 0) return null;\n      var pageRegions = BSearchUpperBound(this.regions, pointPosition, 'left', isLoose);\n      if (pageRegions === -1) return null;\n      var lineRectRegionList = this.regions[pageRegions].regions;\n      var lineRegions = BSearchUpperBound(lineRectRegionList, pointPosition, 'top', isLoose);\n      if (lineRegions === -1) return null;\n\n      var touchLine = lineRectRegionList[lineRegions];\n      var regionIndex = BSearchUpperBound(touchLine.regions, pointPosition, 'left', isLoose);\n      if (regionIndex === -1) return null;\n      return touchLine.regions[regionIndex];\n    }\n  }, {\n    key: 'getLineInfoByRegion',\n    value: function getLineInfoByRegion(region) {\n      var pageIndex = region.pageIndex,\n          lineIndex = region.lineIndex;\n      var _regions$pageIndex$re = this.regions[pageIndex].regions[lineIndex],\n          top = _regions$pageIndex$re.top,\n          left = _regions$pageIndex$re.left,\n          height = _regions$pageIndex$re.height,\n          width = _regions$pageIndex$re.width;\n\n\n      return {\n        top: top,\n        left: left,\n        height: height,\n        width: width\n      };\n    }\n  }, {\n    key: 'getPreviousRegion',\n    value: function getPreviousRegion(region) {\n      var lineIndex = region.lineIndex,\n          columnIndex = region.columnIndex,\n          pageIndex = region.pageIndex;\n\n      var previousRegion = void 0;\n      if (columnIndex === 0) {\n        if (lineIndex !== 0) {\n          var lineRectRegion = this.regions[pageIndex].regions[lineIndex - 1];\n          if (lineRectRegion) {\n            previousRegion = lineRectRegion.regions[lineRectRegion.regions.length - 1];\n          }\n        } else if (pageIndex !== 0) {\n          var _lineRectRegion = this.regions[pageIndex - 1].regions[this.regions[pageIndex - 1].region.length - 1];\n          if (_lineRectRegion) {\n            previousRegion = _lineRectRegion.regions[_lineRectRegion.regions.length - 1];\n          }\n        }\n      } else {\n        previousRegion = this.regions[pageIndex].regions[lineIndex].regions[columnIndex - 1];\n      }\n      return previousRegion || null;\n    }\n  }, {\n    key: 'getNextRegion',\n    value: function getNextRegion(region) {\n      var lineIndex = region.lineIndex,\n          columnIndex = region.columnIndex,\n          pageIndex = region.pageIndex;\n\n      var nextRegion = void 0;\n      var lineRectRegion = this.regions[pageIndex].regions[lineIndex];\n      if (lineRectRegion) {\n        if (columnIndex === lineRectRegion.regions.length - 1) {\n          var nextLineRectRegion = this.regions[pageIndex].regions[lineIndex + 1];\n          if (nextLineRectRegion) {\n            var _nextLineRectRegion$r = _slicedToArray(nextLineRectRegion.regions, 1);\n\n            nextRegion = _nextLineRectRegion$r[0];\n          } else if (this.regions[pageIndex + 1]) {\n            var _regions$regions$0$re = _slicedToArray(this.regions[pageIndex + 1].regions[0].regions, 1);\n\n            nextRegion = _regions$regions$0$re[0];\n          }\n        } else {\n          nextRegion = lineRectRegion.regions[columnIndex + 1];\n        }\n      }\n      return nextRegion || null;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.originalRegionList = [];\n      this.regions = [];\n    }\n  }], [{\n    key: 'getLineRectRegionList',\n    value: function getLineRectRegionList(originalRegionList) {\n      var pageRegionList = [];\n      var pageRegion = {\n        page: 0,\n        top: 0,\n        right: 0,\n        left: 0,\n        width: 0,\n        height: 0,\n        regions: []\n      };\n      var lineRectRegion = {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        width: 0,\n        height: 0,\n        regions: []\n      };\n      var lineIndex = 0;\n      var columnIndex = 0;\n      var pageIndex = 0;\n      originalRegionList.forEach(function (region, index) {\n        var top = region.top,\n            height = region.height,\n            left = region.left,\n            page = region.page,\n            width = region.width;\n\n\n        if (lineRectRegion.regions.length === 0) {\n          // \n          pageRegion.page = region.page;\n          pageRegion.top = top;\n          pageRegion.right = left + width;\n          pageRegion.left = left;\n          pageRegion.width = width;\n\n          lineRectRegion.top = top;\n          lineRectRegion.bottom = top + height;\n          lineRectRegion.left = left;\n          lineRectRegion.height = height;\n          lineRectRegion.page = page;\n\n          lineRectRegion.regions.push(_Object$assign({\n            originalIndex: index, lineIndex: lineIndex, columnIndex: columnIndex, pageIndex: pageIndex\n          }, region));\n        } else if (pageRegion.page === region.page && Region.isSameLine({ top: lineRectRegion.top, height: lineRectRegion.bottom - lineRectRegion.top }, region)) {\n          //   \n          columnIndex++;\n          lineRectRegion.regions.push(_Object$assign({\n            originalIndex: index, lineIndex: lineIndex, columnIndex: columnIndex, pageIndex: pageIndex\n          }, region));\n          lineRectRegion.top = Math.min(lineRectRegion.top, top);\n          lineRectRegion.bottom = Math.max(lineRectRegion.bottom, top + height);\n          lineRectRegion.height = Math.max(lineRectRegion.height, lineRectRegion.bottom - lineRectRegion.top);\n        } else if (pageRegion.page === region.page) {\n          // \n          lineIndex++;\n          columnIndex = 0;\n          var lastItem = lineRectRegion.regions[lineRectRegion.regions.length - 1];\n          var lastWidth = lastItem.width;\n          var lastLeft = lastItem.left;\n          lineRectRegion.width = lastLeft + lastWidth - lineRectRegion.left;\n\n          pageRegion.regions.push(_Object$assign({}, lineRectRegion));\n          pageRegion.top = Math.min(pageRegion.top, lineRectRegion.top);\n          pageRegion.left = Math.min(pageRegion.left, lineRectRegion.left);\n          pageRegion.right = Math.max(pageRegion.right, lineRectRegion.left + lineRectRegion.width);\n          pageRegion.width = Math.max(pageRegion.width, pageRegion.right - lineRectRegion.left);\n\n          lineRectRegion.top = top;\n          lineRectRegion.bottom = top + height;\n          lineRectRegion.left = left;\n          lineRectRegion.height = height;\n          lineRectRegion.page = page;\n          lineRectRegion.regions = [];\n          lineRectRegion.regions.push(_Object$assign({\n            originalIndex: index, lineIndex: lineIndex, columnIndex: columnIndex, pageIndex: pageIndex\n          }, region));\n        } else {\n          // \n          var _lastItem = lineRectRegion.regions[lineRectRegion.regions.length - 1];\n          var _lastWidth = _lastItem.width;\n          var _lastLeft = _lastItem.left;\n          lineRectRegion.width = _lastLeft + _lastWidth - lineRectRegion.left;\n          pageRegion.regions.push(_Object$assign({}, lineRectRegion));\n\n          var lastLineItem = pageRegion.regions[pageRegion.regions.length - 1];\n          var lastLineTop = lastLineItem.top;\n          var lastLineHeight = lastLineItem.height;\n          pageRegion.height = lastLineTop + lastLineHeight - pageRegion.top;\n          pageRegionList.push(_Object$assign({}, pageRegion));\n\n          pageIndex++;\n          lineIndex = 0;\n          columnIndex = 0;\n\n          pageRegion.page = region.page;\n          pageRegion.top = top;\n          pageRegion.right = left + width;\n          pageRegion.left = left;\n          pageRegion.width = width;\n          pageRegion.regions = [];\n\n          lineRectRegion.top = top;\n          lineRectRegion.bottom = top + height;\n          lineRectRegion.left = left;\n          lineRectRegion.height = height;\n          lineRectRegion.page = page;\n          lineRectRegion.regions = [];\n\n          lineRectRegion.regions.push(_Object$assign({\n            originalIndex: index, lineIndex: lineIndex, columnIndex: columnIndex, pageIndex: pageIndex\n          }, region));\n        }\n        if (index === originalRegionList.length - 1) {\n          var _lastItem2 = lineRectRegion.regions[lineRectRegion.regions.length - 1];\n          var _lastWidth2 = _lastItem2.width;\n          var _lastLeft2 = _lastItem2.left;\n          lineRectRegion.width = _lastLeft2 + _lastWidth2 - lineRectRegion.left;\n          pageRegion.regions.push(_Object$assign({}, lineRectRegion));\n\n          var _lastLineItem = pageRegion.regions[pageRegion.regions.length - 1];\n          var _lastLineTop = _lastLineItem.top;\n          var _lastLineHeight = _lastLineItem.height;\n          pageRegion.height = _lastLineTop + _lastLineHeight - pageRegion.top;\n          pageRegionList.push(_Object$assign({}, pageRegion));\n        }\n      });\n      return pageRegionList;\n    }\n  }, {\n    key: 'getRectsByRegions',\n    value: function getRectsByRegions(LineRegions, startColumnIndex, endColumnIndex) {\n      var rects = [];\n      LineRegions.forEach(function (lineRectRegion, index) {\n        if (index === 0 && startColumnIndex !== null) {\n          var region = lineRectRegion.regions[startColumnIndex];\n          rects.push(new DOMRect(region.left, lineRectRegion.top, lineRectRegion.width - region.left + lineRectRegion.left, lineRectRegion.height));\n        } else if (index === LineRegions.length - 1 && endColumnIndex !== null) {\n          var _region = lineRectRegion.regions[endColumnIndex];\n          rects.push(new DOMRect(lineRectRegion.left, lineRectRegion.top, _region.left + _region.width - lineRectRegion.left, lineRectRegion.height));\n        } else {\n          rects.push(new DOMRect(lineRectRegion.left, lineRectRegion.top, lineRectRegion.width, lineRectRegion.height));\n        }\n      });\n      return rects;\n    }\n  }, {\n    key: 'pointInRect',\n    value: function pointInRect(targetPoint, leftTopPoint, rightBottomPoint) {\n      if (targetPoint.x > leftTopPoint.x && targetPoint.x <= rightBottomPoint.x && targetPoint.y > leftTopPoint.y && targetPoint.y <= rightBottomPoint.y) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'isSameLine',\n    value: function isSameLine(region1, region2) {\n      return (region1.top - (region2.top + region2.height)) * (region2.top - (region1.top + region1.height)) > 0;\n    }\n  }]);\n\n  return Region;\n}();\n\nvar RegionEasyMarker = function (_BaseEasyMarker) {\n  _inherits(RegionEasyMarker, _BaseEasyMarker);\n\n  function RegionEasyMarker(options) {\n    _classCallCheck(this, RegionEasyMarker);\n\n    var _this = _possibleConstructorReturn(this, (RegionEasyMarker.__proto__ || _Object$getPrototypeOf(RegionEasyMarker)).call(this, options));\n\n    _this.selectRegion = {\n      start: null,\n      end: null\n    };\n    _this.region = new Region(options.regions || []);\n    _this.mode = EasyMarkerMode.REGION;\n    _this.touchStartTime = 0;\n    return _this;\n  }\n\n  _createClass(RegionEasyMarker, [{\n    key: 'setRegions',\n\n    /**\n     * Update Regions\n     *\n     * @memberof EasyMarker\n     * @returns {string}\n     */\n    value: function setRegions(regions) {\n      this.region.setRegions(regions);\n    }\n\n    /**\n     * Get the selected text\n     *\n     * @memberof EasyMarker\n     * @returns {string}\n     */\n\n  }, {\n    key: 'getSelectText',\n    value: function getSelectText() {\n      var text = this.region.getText(this.selectRegion.start, this.selectRegion.end) || '';\n      return text;\n    }\n\n    /**\n     * touchstart event handler\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart(e) {\n      _get(RegionEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(RegionEasyMarker.prototype), 'handleTouchStart', this).call(this, e);\n      if (this.deviceType === DeviceType.PC) {\n        if (this.selectStatus === SelectStatus.FINISH) {\n          var isMenuClick = this.menu.inRegion(e);\n          var position = this.getTouchRelativePosition(e);\n          var startCursorRegion = this.cursor.start.inRegion(position);\n          var endCursorRegion = this.cursor.end.inRegion(position);\n          if (!isMenuClick && !startCursorRegion.inRegion && !endCursorRegion.inRegion) {\n            this.reset();\n          }\n        }\n\n        if (this.selectStatus === SelectStatus.NONE && this.isContains(e.target)) {\n          this.touchStartTime = Date.now();\n          var _position = this.getTouchRelativePosition(e);\n          this.selectRegion.start = this.region.getRegionByPoint(_position, true);\n          if (this.selectRegion.start) {\n            var _region$getLineInfoBy = this.region.getLineInfoByRegion(this.selectRegion.start),\n                lineHeight = _region$getLineInfoBy.height;\n\n            this.cursor.start.height = lineHeight;\n            this.cursor.start.position = { x: this.selectRegion.start.left, y: this.selectRegion.start.top };\n          }\n        }\n      }\n    }\n  }, {\n    key: 'handleTouchMoveThrottle',\n    value: function handleTouchMoveThrottle(e) {\n      if (this.deviceType === DeviceType.PC) {\n        if (this.selectStatus === SelectStatus.NONE && this.selectRegion.start && !this.selectRegion.end) {\n          if (Date.now() - this.touchStartTime < 100) return;\n          var position = this.getTouchRelativePosition(e);\n          this.selectRegion.end = this.region.getRegionByPoint(position);\n          if (this.selectRegion.end) {\n            var _region$getLineInfoBy2 = this.region.getLineInfoByRegion(this.selectRegion.end),\n                lineHeight = _region$getLineInfoBy2.height;\n\n            this.cursor.end.height = lineHeight;\n            this.cursor.end.position = {\n              x: this.selectRegion.end.left + this.selectRegion.end.width,\n              y: this.selectRegion.end.top\n            };\n            this.selectStatus = SelectStatus.SELECTING;\n          }\n        }\n      }\n      _get(RegionEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(RegionEasyMarker.prototype), 'handleTouchMoveThrottle', this).call(this, e);\n    }\n  }, {\n    key: 'handleTouchEnd',\n    value: function handleTouchEnd(e) {\n      _get(RegionEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(RegionEasyMarker.prototype), 'handleTouchEnd', this).call(this, e);\n      if (this.selectStatus === SelectStatus.SELECTING) {\n        this.selectStatus = SelectStatus.FINISH;\n      }\n      if (this.deviceType === DeviceType.PC) {\n        if (this.selectStatus === SelectStatus.NONE) {\n          this.reset();\n        }\n      }\n    }\n\n    /**\n     * copy listener\n     *\n     * @private\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'copyListener',\n    value: function copyListener(e) {\n      if (this.selectStatus === SelectStatus.FINISH) {\n        this.menu.copyListener({\n          start: this.selectRegion.start,\n          end: this.selectRegion.end,\n          content: this.getSelectText(),\n          markdown: RegionEasyMarker.getSelectMarkdown()\n        }, e);\n        this.reset();\n      }\n    }\n\n    /**\n     * Tap event\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleTap',\n    value: function handleTap(e) {\n      if (this.selectStatus === SelectStatus.FINISH) {\n        this.menu.handleTap(e, {\n          start: this.selectRegion.start,\n          end: this.selectRegion.end,\n          content: this.getSelectText(),\n          markdown: RegionEasyMarker.getSelectMarkdown()\n        });\n        var position = this.getTouchRelativePosition(e);\n        var startCursorRegion = this.cursor.start.inRegion(position);\n        var endCursorRegion = this.cursor.end.inRegion(position);\n        if (startCursorRegion.inRegion || endCursorRegion.inRegion) return;\n        this.reset();\n      } else if (this.selectStatus === SelectStatus.NONE) {\n        var inHighlightLine = this.highlight.handleTap(e);\n        if (!inHighlightLine && !this.options.disableTapHighlight && !this.options.disableSelect && this.isContains(e.target) && this.deviceType === DeviceType.MOBILE) {\n          var _position2 = this.getTouchRelativePosition(e);\n          this.selectThisSentence(_position2);\n        }\n      }\n    }\n\n    /**\n     * Long press event\n     *\n     * @private\n     * @param {TouchEvent} e\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'handleLongTap',\n    value: function handleLongTap(e) {\n      if (this.deviceType === DeviceType.MOBILE) {\n        if (this.isContains(e.target)) {\n          var position = this.getTouchRelativePosition(e);\n          this.selectThisSentence(position);\n        }\n      }\n    }\n  }, {\n    key: 'selectThisSentence',\n    value: function selectThisSentence(position) {\n      var _region$getSentenceBy = this.region.getSentenceByPosition(position),\n          start = _region$getSentenceBy.start,\n          end = _region$getSentenceBy.end;\n\n      this.selectRegion = {\n        start: start,\n        end: end\n      };\n      this.cursor.start.height = this.region.getLineInfoByRegion(this.selectRegion.start).height;\n      this.cursor.start.position = { x: this.selectRegion.start.left, y: this.selectRegion.start.top\n        // { height: lineHeight } = this.region.getLineInfoByRegion(this.selectRegion.end)\n      };this.cursor.end.height = this.region.getLineInfoByRegion(this.selectRegion.end).height;\n      this.cursor.end.position = {\n        x: this.selectRegion.end.left + this.selectRegion.end.width,\n        y: this.selectRegion.end.top\n      };\n      this.cursor.start.show();\n      this.cursor.end.show();\n\n      this.renderMask();\n      this.selectStatus = SelectStatus.FINISH;\n    }\n    /**\n     * Move the cursor to the specified location\n     *\n     * @private\n     * @param {HTMLElement} element\n     * @param {number} x Relative to the screen positioning x\n     * @param {number} y Relative to the screen positioning Y\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'moveCursor',\n    value: function moveCursor(element, x, y) {\n      var relativeX = x - this.screenRelativeOffset.x;\n      var relativeY = y - this.screenRelativeOffset.y;\n      // const relativePosition = this.getTouchRelativePosition({ x, y })\n      var clickRegion = this.region.getRegionByPoint({ x: relativeX, y: relativeY });\n      if (!clickRegion) return;\n      var unmovingCursor = this.movingCursor === this.cursor.start ? this.cursor.end : this.cursor.start;\n      if (unmovingCursor.position.x === relativeX && unmovingCursor.position.y === relativeY) {\n        return;\n      }\n\n      this.swapCursor(clickRegion, { x: relativeX, y: relativeY });\n\n      var _region$getLineInfoBy3 = this.region.getLineInfoByRegion(clickRegion),\n          lineHeight = _region$getLineInfoBy3.height;\n\n      if (this.movingCursor === this.cursor.start) {\n        this.movingCursor.height = lineHeight;\n        this.movingCursor.position = {\n          x: clickRegion.left,\n          y: clickRegion.top\n        };\n      } else {\n        this.movingCursor.height = lineHeight;\n        this.movingCursor.position = {\n          x: clickRegion.left + clickRegion.width,\n          y: clickRegion.top\n        };\n      }\n\n      this.cursor.start.show();\n      this.cursor.end.show();\n      this.renderMask();\n    }\n\n    /**\n     * Swap the start and end cursors\n     *\n     * @private\n     * @param {any} clickRegion\n     * @param {any} currentPosition\n     * @memberof EasyMarker\n     */\n\n  }, {\n    key: 'swapCursor',\n    value: function swapCursor(clickRegion) {\n      if (this.movingCursor === this.cursor.start) {\n        if (clickRegion.originalIndex > this.selectRegion.end.originalIndex) {\n          this.cursor.start.position = this.cursor.end.position;\n          this.movingCursor = this.cursor.end;\n          this.selectRegion.start = this.region.getNextRegion(this.selectRegion.end);\n          this.selectRegion.end = clickRegion;\n        } else {\n          this.selectRegion.start = clickRegion;\n        }\n      } else {\n        // eslint-disable-next-line no-lonely-if\n        if (clickRegion.originalIndex < this.selectRegion.start.originalIndex) {\n          this.cursor.end.position = this.cursor.start.position;\n          this.movingCursor = this.cursor.start;\n          this.selectRegion.end = this.region.getPreviousRegion(this.selectRegion.start);\n          this.selectRegion.start = clickRegion;\n        } else {\n          this.selectRegion.end = clickRegion;\n        }\n      }\n    }\n  }, {\n    key: 'renderMask',\n    value: function renderMask() {\n      this.mask.render(this.selectRegion.start, this.selectRegion.end);\n    }\n  }, {\n    key: 'setSelection',\n    value: function setSelection(selection) {\n      this.selectRegion.start = selection.start;\n      this.selectRegion.end = selection.end;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      _get(RegionEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(RegionEasyMarker.prototype), 'reset', this).call(this);\n      this.selectRegion = {\n        start: null,\n        end: null\n      };\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      _get(RegionEasyMarker.prototype.__proto__ || _Object$getPrototypeOf(RegionEasyMarker.prototype), 'destroy', this).call(this);\n      this.selectRegion = {\n        start: null,\n        end: null\n      };\n      this.region.destroy();\n      this.region = null;\n      this.mode = EasyMarkerMode.REGION;\n      this.touchStartTime = 0;\n    }\n  }, {\n    key: 'start',\n    get: function get$$1() {\n      return this.selectRegion.start;\n    }\n  }, {\n    key: 'end',\n    get: function get$$1() {\n      return this.selectRegion.end;\n    }\n  }], [{\n    key: 'getSelectMarkdown',\n    value: function getSelectMarkdown() {\n      return 'Markdown is not supported in current mode.';\n    }\n  }]);\n\n  return RegionEasyMarker;\n}(EasyMarker);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (NodeEasyMarker);\n\n\n\n//# sourceURL=webpack:////root/codingci/tools/jenkins_home/workspace/3831939-cci-38627206-957086/node_modules/.pnpm/registry.npmmirror.com+easy-marker@1.1.23/node_modules/easy-marker/dist/easy-marker.esm.js?")}}]);